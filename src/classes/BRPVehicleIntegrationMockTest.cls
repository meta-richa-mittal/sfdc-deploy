@isTest
global class BRPVehicleIntegrationMockTest implements HttpCalloutMock{
    @testSetup
    private static void setupTestData() {
		TestDataFactory.disableFLSChecks();
   }
	private String vehicleExist;
	 
	public BRPVehicleIntegrationMockTest(String vehicleExist) {
		this.vehicleExist = vehicleExist;
	}
	
    global HTTPResponse respond(HTTPRequest request){
        HttpResponse res = new HttpResponse(); 
        if(String.isNotBlank(vehicleExist)) {
            res.setHeader('Content-Type', 'text/xml');
            if(vehicleExist == 'Exist') {
                res.setBody('<?xml version="1.0" encoding="UTF-8"?><ns0:ShowVehicleSpecifications xmlns:ns0="http://www.starstandard.org/STAR/5" releaseID="5.8.1">   <ns0:ApplicationArea>      <ns0:Sender>         <ns0:TaskID>VehicleSpecifications</ns0:TaskID>         <ns0:ReferenceID>0a58ef11-eb78-4104-81eb-9cf474d2b7ac</ns0:ReferenceID>         <ns0:CreatorNameCode>BRP</ns0:CreatorNameCode>         <ns0:SenderNameCode>BD</ns0:SenderNameCode>         <ns0:SystemVersion>1</ns0:SystemVersion>         <ns0:ServiceID>ShowVehicleSpecifications</ns0:ServiceID>      </ns0:Sender>      <ns0:CreationDateTime>2019-03-25T06:58:20-00:00</ns0:CreationDateTime>      <ns0:Destination>         <ns0:DestinationNameCode>BP</ns0:DestinationNameCode>         <ns0:DealerNumberID>0000694305</ns0:DealerNumberID>      </ns0:Destination>   </ns0:ApplicationArea>   <ns0:ShowVehicleSpecificationsDataArea>      <ns0:Show />      <ns0:VehicleSpecifications>         <ns0:VehicleSpecificationsHeader>            <ns0:DocumentIdentificationGroup>               <ns0:DocumentIdentification>                  <ns0:DocumentID>0205dbf4-ee74-463f-81e1-a842477bff43</ns0:DocumentID>                  <ns0:AgencyRoleCode>Manufacturer</ns0:AgencyRoleCode>               </ns0:DocumentIdentification>            </ns0:DocumentIdentificationGroup>         </ns0:VehicleSpecificationsHeader>         <ns0:VehicleSpecificationsLine>            <ns0:LineNumberString>1</ns0:LineNumberString>            <ns0:Vehicle>               <ns0:Model languageID="en">0006TDA00</ns0:Model>               <ns0:ModelYear>2013</ns0:ModelYear>               <ns0:ModelDescription languageID="en">SSV COMMANDER DPS 800REFI Y 13</ns0:ModelDescription>               <ns0:SaleClassCode>New</ns0:SaleClassCode>               <ns0:VehicleClassCode>sidebyside</ns0:VehicleClassCode>               <ns0:VehiclePassengersNumeric>0</ns0:VehiclePassengersNumeric>               <ns0:Engine>                  <ns0:NumberOfEngineCylindersNumeric>2</ns0:NumberOfEngineCylindersNumeric>                  <ns0:DisplacementMeasure unitCode="cubic centimeter">799</ns0:DisplacementMeasure>               </ns0:Engine>               <ns0:VehicleID>3JBKGCN10DJ000014</ns0:VehicleID>               <ns0:ManufacturerName languageID="en">BRP MEXICO S.A. DE C.V.</ns0:ManufacturerName>               <ns0:VehicleWeightMeasure unitCode="kilogram">608</ns0:VehicleWeightMeasure>               <ns0:ModelGroup languageID="en">4X4 DPS</ns0:ModelGroup>               <ns0:VehicleDescription languageID="en">SSV COMMANDER DPS 800REFI Y 13</ns0:VehicleDescription>            </ns0:Vehicle>         </ns0:VehicleSpecificationsLine>      </ns0:VehicleSpecifications>   </ns0:ShowVehicleSpecificationsDataArea></ns0:ShowVehicleSpecifications>');
            } else if(vehicleExist == 'Not Exist'){
                res.setBody('<?xml version="1.0" encoding="UTF-8"?><ns0:ShowVehicleSpecifications xmlns:ns0="http://www.starstandard.org/STAR/5" releaseID="5.8.1">   <ns0:ApplicationArea>      <ns0:Sender>         <ns0:TaskID>VehicleSpecifications</ns0:TaskID>         <ns0:ReferenceID>0a58ef11-eb78-4104-81eb-9cf474d2b7ac</ns0:ReferenceID>         <ns0:CreatorNameCode>BRP</ns0:CreatorNameCode>         <ns0:SenderNameCode>BD</ns0:SenderNameCode>         <ns0:SystemVersion>1</ns0:SystemVersion>         <ns0:ServiceID>ShowVehicleSpecifications</ns0:ServiceID>      </ns0:Sender>      <ns0:CreationDateTime>2019-03-25T06:58:20-00:00</ns0:CreationDateTime>      <ns0:Destination>         <ns0:DestinationNameCode>BP</ns0:DestinationNameCode>         <ns0:DealeApplicationArearNumberID>0000694305</ns0:DealerNumberID>      </ns0:Destination>   </ns0:ApplicationArea>   </ns0:ShowVehicleSpecifications>');
            }
        } else {
            if(request.getEndpoint().containsIgnoreCase('service_history/v1/article')) {
                res.setBody('{"last_publish_date":"2020-03-26T18:04:05.000Z","content_type":"PDF","content":"872639gwdgi++E8Q46NSoH2nYV1Gt1NwTLnguS/jrcJSl7mL5VNQkjHEtWrggxog8qVwUAX3AhEgSPUAAWM4SJUd6G5jerYuIUAPbcURjs4djUPMaN8CnN0YXJ0eHJlZgoxODQwNDEKJSVFT0YK","article_url":"https://brp--qauat--c.visualforce.com/apex/Article_Detail_Warranty_Bulletin?lang=en_US&id=kAA3x000000TNCYGA4","article_no":"000137651","article_id":"kaA3x000000XadmEAC","article_descr":"PWC 2019-16 Risk Of Unpredictable Vehicle Behavior - Intake Grate May Detach_137651_WQB21Y019S05_en"}');
            } else if(request.getEndpoint().containsIgnoreCase('service_history/v1/vin') && request.getEndpoint().containsIgnoreCase('campaigns')) {
                res.setBody('{"vin":"2BPSCEKCXKV000009","usage_descr":"Personal/Recreational","target_market_descr":"Canada, US","product_code":"000CEKC00","platform_descr":"REV-G4","package_descr":"SP","model_year":"2019","model_descr":"Summit","length":"154 (3923 mm)","is_cross_border":false,"engine_type":"850 E-TEC","comments":"","color_descr":"Black","campaigns":[{"type_descr":"Regular","period_valid_to":"2022-01-31","period_valid_from":"2019-01-22","is_claimed":true,"campaing_no":"0010","campaign_descr":"ENGINE COOLANT OUTLET HOSE LEAK","bulletin_no":"2019-9","articles":[{"last_publish_date":"2019-03-11T17:10:42.000Z","content_type":"PDF","article_url":"https://brp--qauat.my.salesforce.com/kAA0c000000fxSR?lang=en_US","article_no":"000136062","article_id":"kaA0c000000L42WEAS","article_descr":"SKI-DOO 2019-9 Engine Coolant Outlet Hose Leak_136062_WCN11Y019S01_en"}]},{"type_descr":"Safety","period_valid_to":"9999-12-31","period_valid_from":"2019-07-02","is_claimed":false,"campaing_no":"0012","campaign_descr":"FUEL INJECTOR POTENTIAL LEAK","bulletin_no":"2019-11","articles":[{"last_publish_date":"2019-07-03T16:52:52.000Z","content_type":"PDF","article_url":"https://brp--qauat.my.salesforce.com/kAA0c000000KzTR?lang=en_US","article_no":"000136589","article_id":"kaA0c000000L48jEAC","article_descr":"SKI-DOO 2019-11 Fuel Injector - Potential Leak_136589_WSC11Y019S02_en"},{"last_publish_date":"2019-07-03T15:07:14.000Z","content_type":"URL","article_url":"https://brp--qauat.my.salesforce.com/kA90c000000004S?lang=en_US","article_no":"000136553","article_id":"ka90c00000000LOAAY","article_descr":"Ski-Doo Fuel Injector Bolts Replacement"}]}],"brand_descr":"Ski-Doo Snowmobile"}');
            }
        }
        res.setStatusCode(200);
        return res;  
    }
}