<apex:page standardStylesheets="false" showChat="false" showHeader="false" sidebar="false" docType="html-5.0"
   controller="GlobalController">
   <!-- <apex:stylesheet value="{!URLFOR($Resource.angular_calender, 'mbdatepicker.css')}"/> -->
   <!--  <apex:stylesheet value="{!Application}/css/ViewCustomer.css"/> -->
   <c:COUInfoPopUp />
   <div class="fadein" ui-view="EditCustomer" autoscroll='false'></div>
   <div class="fadein" ui-view="CustomerMessaging" autoscroll='false'></div>
   <div>
   <route-loading-indicator></route-loading-indicator>
   <div ng-cloak="ng-cloak" ng-if="ViewCustomer.ShowContent" >
   <!-- ng-if="!isRouteLoading" -->
   <div class="content">
      <div class="col-lg-2 col-md-2 sidePanel left-panel-scroll">
         <div class="sidepaneluserinfo row">
            <div class="userNameblock userNameblock_ML5">
               <p class="T3">
                  <span ng-show="ViewCustomer.CustomerInfo.CustomerInfo.Type == 'Individual'"> 
                     {{ViewCustomer.CustomerInfo.CustomerInfo.FirstName}} 
                     <span ng-show="ViewCustomer.CustomerInfo.CustomerInfo.MiddleName">{{ViewCustomer.CustomerInfo.CustomerInfo.MiddleName}} </span>
                     {{ViewCustomer.CustomerInfo.CustomerInfo.LastName}}
                  </span>
                  <span ng-show="ViewCustomer.CustomerInfo.CustomerInfo.Type != 'Individual'"> {{ViewCustomer.CustomerInfo.CustomerInfo.BusinessName}} </span>
               </p>
               <p class="customerNumber">{{ViewCustomer.CustomerInfo.CustomerInfo.CustomerNumber}}</p>
            </div>
         </div>
         <div class="clearfix"></div>
         <div class="row statusRow">
            <span class="userType T3" ng-show="ViewCustomer.CustomerInfo.CustomerInfo.Type == 'Individual'">{{ 'Label_Individual' | translate }}</span>
            <span class="userType T3" ng-show="ViewCustomer.CustomerInfo.CustomerInfo.Type != 'Individual'">{{ 'Label_Business' | translate }}</span> <span class="divider">|</span>
            <span class="userStatus" ng-show="ViewCustomer.CustomerInfo.CustomerInfo.Active== true" >{{ 'Label_Active' | translate }}</span>
            <span class="userStatus" style="color:#E80000" ng-show="ViewCustomer.CustomerInfo.CustomerInfo.Active == false" >{{ 'Label_Deactive' | translate }}</span>
         </div>
         <div class="row statusRow dummy-animation ar-balance" ng-if = "(ViewCustomer.IsQBEnabled || ViewCustomer.isXeroEnabled)">
            <div class="userType T3" ng-if="ViewCustomer.OpenARBalance != 0">{{ 'AR_Balance' | translate }}</div>
            <div class="dummy-tag-name ar-balance-dummy" ng-if = "ViewCustomer.OpenARBalance == undefined || ViewCustomer.OpenARBalance == null"></div>
            <div ng-if = "ViewCustomer.OpenARBalance != undefined && ViewCustomer.OpenARBalance != null">
               <a class="customerNumber" ng-if="ViewCustomer.OpenARBalance != 'unknown' && ViewCustomer.OpenARBalance != 0 && GroupOnlyPermissions['Payment on account'].enabled" href="#ARActivitySection" ng-click="ViewCustomer.sidepanelLink($event, 'ARActivity'); ViewCustomer.getARActivityList()" >{{ ViewCustomer.OpenARBalance | currency }}</a>
               <span class="customerNumber" ng-if="ViewCustomer.OpenARBalance != 'unknown' && ViewCustomer.OpenARBalance != 0 && !GroupOnlyPermissions['Payment on account'].enabled" >{{ ViewCustomer.OpenARBalance | currency }}</span>
               <span style="color:#E80000" ng-if="ViewCustomer.OpenARBalance == 'unknown'">{{ ViewCustomer.OpenARBalance }}</span>
            </div>
         </div>
         <div class="leftPanelLinks">
            <a class="row T10 mainSectionLink" ng-class="{'active' : ViewCustomer.activeSidepanelink =='#InfoSection'}"
               href="#InfoSection" ng-click="ViewCustomer.sidepanelLink($event, 'Info')" ><span class="alphabetLetter">{{ 'A' | translate }}</span>{{ 'Page_Section_Info' | translate }}</a>
                    
            <a class="row T10 subSectionLink" href="#Info_General" ng-click="ViewCustomer.sidepanelLink($event, 'Info')"> <span
               class="alphabetLetter"></span>{{ 'Label_General' | translate }}</a>
            <a class="row T10 subSectionLink" href="#Info_Notes" ng-click="ViewCustomer.sidepanelLink($event, 'Info')"> <span
               class="alphabetLetter"></span>{{ 'Label_Notes' | translate }}</a>
                    
            <a class="row T10 mainSectionLink" ng-class="{'active' : ViewCustomer.activeSidepanelink =='#StatisticsSection'}"
               href="#StatisticsSection" ng-click="ViewCustomer.sidepanelLink($event, 'Statistics')" ><span class="alphabetLetter">{{ 'B' | translate }}</span>{{ 'Page_Section_Statistics' | translate }}</a>
            <a class="row T10 subSectionLink" href="#StatisticsSection" ng-click="ViewCustomer.sidepanelLink($event, 'Statistics')">
            <span class="alphabetLetter"></span>{{ 'Page_Section_VitalStatistics' | translate }}</a>
            <!--  <a class="row T10 subSectionLink" href="#TelemetryStatistics" ng-click="ViewCustomer.sidepanelLink($event, 'Statistics')">
               <span class="alphabetLetter"></span>Telemetry</a> -->
            <a class="row T10 mainSectionLink" ng-class="{'active' : ViewCustomer.activeSidepanelink =='#RelatedSection'}"
               href="#RelatedSection" ng-click="ViewCustomer.sidepanelLink($event, 'Related')" ><span class="alphabetLetter">{{ 'C' | translate }}</span>{{ 'Page_Section_Related' | translate }}</a>
            <!--                 <a class="subSectionLink row T10" href="#RelatedSection" ng-click="ViewCustomer.sidepanelLink($event)"> -->
            <!--                     <span class="alphabetLetter"></span>Active Orders</a> -->
            <a class="row T10 subSectionLink" href="#RelatedSection_Cou_Block" ng-click="ViewCustomer.sidepanelLink($event, 'Related')">
            <span class="alphabetLetter"></span>{{ 'Tooltip_View_Vendor_COU' | translate }}</a>
            <a class="row T10 subSectionLink" href="#RelatedSection_ActiveOrders_Block" ng-click="ViewCustomer.sidepanelLink($event, 'Related')"
               ng-if="ViewCustomer.isActiveOrdersAndOrderHistoryBlockAccessible()">
            <span class="alphabetLetter"></span>{{ 'ViewLabour_Active_Orders' | translate }}</a>
            <a class="row T10 subSectionLink" href="#RelatedSection_ActiveQuotes_Block" ng-click="ViewCustomer.sidepanelLink($event, 'Related')"
               ng-if="ViewCustomer.isActiveOrdersAndOrderHistoryBlockAccessible()">
               <span class="alphabetLetter"></span>{{ 'Active_Quotes' | translate }}
            </a>
            <!-- Start: Added By Pooja 26 Jan. 2016 -->
            <a class="row T10 subSectionLink" href="#RelatedSection_CustomerOrders_Block" ng-click="ViewCustomer.sidepanelLink($event, 'Related')"
               ng-if="ViewCustomer.isActiveOrdersAndOrderHistoryBlockAccessible()">
            <span class="alphabetLetter"></span>{{ 'Label_Invoice_History' | translate }}
            </a>
            <a class="row T10 subSectionLink" href="#RelatedSection_ArchivedQuotes_Block" ng-click="ViewCustomer.sidepanelLink($event, 'Related')"
               ng-if="ViewCustomer.isActiveOrdersAndOrderHistoryBlockAccessible()">
               <span class="alphabetLetter"></span>{{ 'Archived_Quotes' | translate }}
            </a>
            <!-- End: Added By Pooja 26 Jan. 2016 -->
            <a class="row T10 subSectionLink" href="#RelatedSection_Customer_BLock" ng-click="ViewCustomer.sidepanelLink($event, 'Related')">
            <span class="alphabetLetter"></span>{{ 'Customers' | translate }}</a>
            <a class="row T10 subSectionLink" href="#RelatedSection_Contact_BLock" ng-click="ViewCustomer.sidepanelLink($event, 'Related')">
            <span class="alphabetLetter"></span>Contacts &amp; Shipping Addresses </a>
            <a class="row T10 subSectionLink text-transform-none" ng-if="ViewCustomer.SMSMessageList.length > 0" href="#RelatedSection_SMSAndEmail_BLock" ng-click="ViewCustomer.sidepanelLink($event, 'Related')">
            <span class="alphabetLetter"></span>{{ 'Text_and_emails' | translate }}</a>
            <a class="row T10 mainSectionLink" ng-class="{'active' : ViewCustomer.activeSidepanelink == '#StoreCreditsSection'}"
               href="#StoreCreditsSection" ng-click="ViewCustomer.sidepanelLink($event, 'StoreCredits')" ><span class="alphabetLetter">{{ 'D' | translate }}</span>{{ 'Store_credits' | translate }}</a>
            <a class="row T10 subSectionLink" href="#StoreCreditsSection_Summary_BLock" ng-click="ViewCustomer.sidepanelLink($event, 'StoreCredits')">
            <span class="alphabetLetter"></span>{{ 'Summary' | translate }}</a>
            <a class="row T10 subSectionLink" href="#StoreCreditsSection_Activity_BLock" ng-click="ViewCustomer.sidepanelLink($event, 'StoreCredits')">
            <span class="alphabetLetter"></span>{{ 'Activity' | translate }}</a>
              <a ng-if = "(ViewCustomer.IsQBEnabled || ViewCustomer.isXeroEnabled) && GroupOnlyPermissions['Payment on account'].enabled" class="row T10 mainSectionLink" ng-class="{'active' : ViewCustomer.activeSidepanelink == '#ARActivitySection'}"
               href="#ARActivitySection" ng-click="ViewCustomer.sidepanelLink($event, 'ARActivity')" ><span class="alphabetLetter">{{ 'E' | translate }}</span>{{ 'AR_Activity' | translate }}</a>
         </div>
      </div>
      <div class="col-lg-10 col-md-10 mainSection">
         <div class=" sectionHeader row fixedRow" >
            <div class="col-lg-6 col-md-6" ng-show="ViewCustomer.activeSidepanelink =='#InfoSection'">
               <div class="fixedHeaderText">
                  <span class="headerlabel">
                  <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                     ng-show="!ViewCustomer.displaySections.Info"
                     ng-Click="ViewCustomer.displaySections.Info = true">
                  </i>
                  <i class="fa fa-angle-down" style="width:10px;"
                     ng-show="ViewCustomer.displaySections.Info"
                     ng-Click="ViewCustomer.displaySections.Info = false">
                  </i>
                  <span class="divider">|</span>
                  <span class="T2">{{ 'A' | translate }} {{ 'Page_Section_Info' | translate }}</span>
                  </span>
               </div>
            </div>
            <div class="col-lg-6 col-md-6" ng-show="ViewCustomer.activeSidepanelink =='#StatisticsSection'">
               <div class="fixedHeaderText">
                  <span class="headerlabel">
                  <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                     ng-show="!ViewCustomer.displaySections.Statistics"
                     ng-Click="ViewCustomer.displaySections.Statistics = true">
                  </i>
                  <i class="fa fa-angle-down" style="width:10px;"
                     ng-show="ViewCustomer.displaySections.Statistics"
                     ng-Click="ViewCustomer.displaySections.Statistics = false">
                  </i>
                  <span class="divider">|</span>
                  <span class="T2">{{ 'B' | translate }} {{ 'Page_Section_Statistics' | translate }}</span>
                  </span>
               </div>
            </div>
            <div class="col-lg-6 col-md-6" ng-show="ViewCustomer.activeSidepanelink =='#RelatedSection'">
               <div class="fixedHeaderText">
                  <span class="headerlabel">
                  <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                     ng-show="!ViewCustomer.displaySections.Related"
                     ng-Click="ViewCustomer.displaySections.Related = true">
                  </i>
                  <i class="fa fa-angle-down" style="width:10px;"
                     ng-show="ViewCustomer.displaySections.Related"
                     ng-Click="ViewCustomer.displaySections.Related = false">
                  </i>
                  <span class="divider">|</span>
                  <span class="T2">{{ 'C' | translate }} {{ 'Page_Section_Related' | translate }}</span>
                  </span>
               </div>
            </div>
            <div class="col-lg-6 col-md-6" ng-show="ViewCustomer.activeSidepanelink =='#StoreCreditsSection'">
               <div class="fixedHeaderText">
                  <span class="headerlabel">
                     <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                        ng-show="!ViewCustomer.displaySections.StoreCredits"
                        ng-Click="ViewCustomer.displaySections.StoreCredits = true">
                     </i>
                     <i class="fa fa-angle-down" style="width:10px;"
                        ng-show="ViewCustomer.displaySections.StoreCredits"
                        ng-Click="ViewCustomer.displaySections.StoreCredits = false">
                     </i>
                     <span class="divider">|</span>
                     <span class="T2">{{ 'D' | translate }} {{ 'Store_credits' | translate }}</span>
                     <span class="ActionIcons pull-left" ng-if="GroupOnlyPermissions['Adjust store credits'].enabled">
                        <div class="dropdown selectDropdown checkboxDropdown" id="StoreCreditsActionsDiv">
                           <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">{{ 'Label_Actions' | translate }}
                           <span class="caret"></span></button>
                           <ul class="dropdown-menu">
                              <li>
                                 <a ng-click="ViewCustomer.ShowAdjustStoreCreditsPopup()">{{ 'Adjust_store_credits' | translate }}</a>
                              </li>
                           </ul>
                        </div>
                     </span>
                  </span>
               </div>
            </div>
            
            <div class="col-lg-6 col-md-6"  ng-show="ViewCustomer.activeSidepanelink =='#ARActivitySection' && (ViewCustomer.IsQBEnabled || ViewCustomer.isXeroEnabled) && GroupOnlyPermissions['Payment on account'].enabled" >
               <div class="fixedHeaderText">
                  <span class="headerlabel">
                     <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                        ng-show="!ViewCustomer.displaySections.ARActivity"
                        ng-Click="ViewCustomer.displaySections.ARActivity = true">
                     </i>
                     <i class="fa fa-angle-down" style="width:10px;"
                        ng-show="ViewCustomer.displaySections.ARActivity"
                        ng-Click="ViewCustomer.displaySections.ARActivity = false">
                     </i>
                     <span class="divider">|</span>
                     <span class="T2">{{ 'E' | translate }} {{ 'AR_Activity' | translate }}</span>
                  </span>
               </div>
            </div>
            <div class="col-lg-6 col-md-6 fixedContent">
               <div class="fa-icons">
                  <i class="fa fa-refresh fa-2x fa-fw" ng-class="{'fa-spin' : ViewCustomer.isrefresh}" ng-click="ViewCustomer.refreshViewCustomer();"></i>
               </div>
               <button type="button" class="flatBtn text-uppercase" ng-click="ViewCustomer.editCustomerDetails()"
                  ng-class="{'permissionDisabledButton': !GroupOnlyPermissions['Customers'].enabled}"
                  ng-disabled="!GroupOnlyPermissions['Customers'].enabled">
               {{ 'Edit_Label' | translate }}
               </button>
               <div class="col-lg-7 col-md-6 searchToAdd searchToAdd_ML110 pull-right">
                  <div class="input-group">
                     <div class="input-group-btn">
                        <button type="button" class="btn C5 LabelBtn">
                        <span class="T5" style="color: #939CA9;">{{ 'Label_To' | translate }}:</span>
                        <span style="color: #FFFFFF;">{{ViewCustomer.selectedItem}}</span>
                        </button>
                        <button type="button" class="btn C5 dropdown-toggle caretBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="caret"></span>
                        <span class="sr-only">{{ 'Label_Toggle_Dropdown' | translate }}</span>
                        </button>
                        <ul class="dropdown-menu">
                           <li><a href="#InfoSection" ng-click="ViewCustomer.dropDownItem($event, 'Info')">{{ 'Page_Section_Info' | translate }}</a></li>
                           <li><a href="#StatisticsSection" ng-click="ViewCustomer.dropDownItem($event, 'Statistics')">{{ 'Page_Section_Statistics' | translate }}</a></li>
                           <li><a href="#RelatedSection" ng-click="ViewCustomer.dropDownItem($event, 'Related')">{{ 'Page_Section_Related' | translate }}</a></li>
                           <li><a href="#StoreCreditsSection" ng-click="ViewCustomer.dropDownItem($event, 'StoreCredits')">{{ 'Store_credits' | translate }}</a></li>
                           <li ng-if = "(ViewCustomer.IsQBEnabled || ViewCustomer.isXeroEnabled) && GroupOnlyPermissions['Payment on account'].enabled" ><a href="#ARActivitySection" ng-click="ViewCustomer.dropDownItem($event, 'ARActivity')">{{ 'AR_Activity' | translate }}</a></li>
                           <!--Commented by Nidhi - Ticket #1896 <li><a href="#ActivitySection" ng-click="ViewCustomer.dropDownItem($event, 'ActivityStream')">{{ 'Page_Section_ActivityStream' | translate }}</a></li>
                              <li role="separator" class="divider"></li>
                              <li class="text-uppercase"><a href="">{{ 'Label_Advanced' | translate }} {{ 'Label_Search' | translate }}</a></li> -->
                        </ul>
                     </div>
                     <!-- /btn-group -->
                     <div class="inner-addon right-addon" ng-class="{'disabledSearchToAddElement' : (ViewCustomer.CustomerInfo.CustomerInfo.Id == '' || ViewCustomer.CustomerInfo.CustomerInfo.Id == null || !GroupOnlyPermissions['Customers'].enabled)}">
                        <i class="fa fa-search fa-flip-horizontal"></i>
                        <c:SearchToAddHtml />
                        <!-- <input class="header-search form-control"  placeholder="search to Add Related" type="text" /> -->
                     </div>
                  </div>
                  <!-- /input-group -->
               </div>
            </div>
         </div>
         <div id="InfoSection" >
            <div class="main_section row main_section_margin_top" ng-show="ViewCustomer.displaySections.Info">
               <div class="Info_General" id="Info_General">
                  <p class="actionRow T2">
                     <span class="sectionText">{{ 'Page_Section_General' | translate }}</span>
                     <!-- <span class="actionText">Actions</span> -->
                     <span class="ActionIcons">
                        <!-- <i class="fa fa-th"></i> -->
                        <i class="fa fa-question-circle" data-toggle="tooltip" title="General Information"></i>
                     </span>
                  </p>
                  <div class="row rowGeneral" >
                     <div class="col-md-5 col-lg-5 subsectionGeneral_rightonly">
                        <div  class="row">
                           <div class="col-md-7 col-lg-7" >
                              <div class="row">
                                 <div class="col-md-12 col-lg-12">
                                    <div class="T1">
                                       <span ng-if="ViewCustomer.CustomerInfo.CustomerInfo.Type == 'Individual'"> 
                                          {{ViewCustomer.CustomerInfo.CustomerInfo.FirstName}} 
                                          <span ng-show="ViewCustomer.CustomerInfo.CustomerInfo.MiddleName">{{ViewCustomer.CustomerInfo.CustomerInfo.MiddleName}} </span>
                                          {{ViewCustomer.CustomerInfo.CustomerInfo.LastName}}
                                       </span>
                                       <span ng-if="ViewCustomer.CustomerInfo.CustomerInfo.Type != 'Individual'"> {{ViewCustomer.CustomerInfo.CustomerInfo.BusinessName}} </span>
                                    </div>
                                    <div class="T7">
                                       <span ng-if="ViewCustomer.CustomerInfo.CustomerInfo.Type == 'Individual' && ViewCustomer.CustomerInfo.CustomerInfo.Nickname != ''">
                                       "{{ViewCustomer.CustomerInfo.CustomerInfo.Nickname}}"
                                       </span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="row" >
                                    <div class="col-md-7 col-lg-7 non_favorite" >
                                        <div class="social_icon_row label_favorite" ng-if= "ViewCustomer.CustomerInfo.CustomerInfo.TwitterLink != '' || ViewCustomer.CustomerInfo.CustomerInfo.FacebookLink != '' || ViewCustomer.CustomerInfo.CustomerInfo.LinkedInLink != ''">
                                 <span>
                                    <a href="{{ViewCustomer.CustomerInfo.CustomerInfo.TwitterLink}}" target="_blank" ng-if="ViewCustomer.CustomerInfo.CustomerInfo.TwitterLink != ''">
                                    <i class="fa fa-twitter-square icon_tweet"></i>
                                    </a>
                                 </span>
                                 <span>
                                    <a href="{{ViewCustomer.CustomerInfo.CustomerInfo.FacebookLink}}" target="_blank" ng-if="ViewCustomer.CustomerInfo.CustomerInfo.FacebookLink != ''">
                                    <i class="fa fa-facebook-square icon_fb"></i>
                                    </a>
                                 </span>
                                 <span>
                                    <a href="{{ViewCustomer.CustomerInfo.CustomerInfo.LinkedInLink}}" target="_blank" ng-if="ViewCustomer.CustomerInfo.CustomerInfo.LinkedInLink != ''">
                                    <i class="fa fa-linkedin-square icon_in"></i>
                                    </a>
                                 </span>
                              </div>
                           </div>
                        </div>
                        <div class="general_info_customer">
                           <div class="row" ng-if="(ViewCustomer.setPrefferedEmail() != '')">
                              <!-- condition added by pooja -->
                              <div class="col-lg-5 col-md-5  customer_general_column">
                                 <span style="padding-top:10px;">
                                 <i class="fa fa-star orange favorite" ></i><label class="T7 label_favorite" for="labelFirstName">{{ 'Send_email' | translate }}  </label>
                                 </span>
                              </div>
                              <div  class="col-lg-7 col-md-7 " >
                                 <span class="blue T3_1 emailBreak"  ng-bind="ViewCustomer.setPrefferedEmail()"> </span>
                              </div>
                           </div>
                           <div class="row" ng-if="(ViewCustomer.setPrefferedSMS() != '')">
                              <div class="col-lg-5 col-md-5 customer_general_column">
                                 <span style="padding-top:10px;">
                                 <i class="fa fa-star orange favorite" ></i><label class="T7 label_favorite" for="labelFirstName">{{ 'SMS_mobile' | translate }}</label>
                                 </span>
                              </div>
                              <div  class="col-lg-7 col-md-7" >
                                 <span class="blue T3"  ng-bind="(ViewCustomer.setPrefferedSMS());"> </span>
                              </div>
                           </div>
                           <div class="row" ng-if="ViewCustomer.CustomerInfo.CustomerInfo.Fax != undefined || ViewCustomer.CustomerInfo.CustomerInfo.Fax != null">
                              <div class="col-lg-5 col-md-5 customer_general_column">
                                 <span style="padding-top:10px;">
                                    <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Send_fax' | translate }}  </label></div>
                                 </span>
                              </div>
                              <div  class="col-lg-7 col-md-7" >
                                 <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.Fax}} </span>
                              </div>
                           </div>
                           <div class="MoreSectionContent animate-showContent" >
                              <div class="row " ng-show="ViewCustomer.CustomerInfo.CustomerInfo.PreferredEmail != 'HomeEmail' && ViewCustomer.CustomerInfo.CustomerInfo.Type == 'Individual'  &&  ViewCustomer.CustomerInfo.CustomerInfo.PreferredEmail != ''
                                 && ViewCustomer.CustomerInfo.CustomerInfo.HomeEmail != ''">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Vendor_Home_Email' | translate }}  </label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3_1 emailBreak"  >{{ViewCustomer.CustomerInfo.CustomerInfo.HomeEmail}} </span>
                                 </div>
                              </div>
                              <div class="row " ng-show="ViewCustomer.CustomerInfo.CustomerInfo.PreferredEmail != 'WorkEmail' && ViewCustomer.CustomerInfo.CustomerInfo.Type == 'Business'
                                 && ViewCustomer.CustomerInfo.CustomerInfo.WorkEmail != ''" >
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Vendor_Work_Email' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3_1 emailBreak"  >{{ViewCustomer.CustomerInfo.CustomerInfo.WorkEmail}} </span>
                                 </div>
                              </div>
                              <div class="row " ng-show="ViewCustomer.CustomerInfo.CustomerInfo.PreferredEmail != 'OtherEmail' && ViewCustomer.CustomerInfo.CustomerInfo.OtherEmail != ''" >
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Vendor_Other_Email' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3_1 emailBreak"  >{{ViewCustomer.CustomerInfo.CustomerInfo.OtherEmail}} </span>
                                 </div>
                              </div>
                              <div class="row " ng-show=" ViewCustomer.CustomerInfo.CustomerInfo.Type == 'Individual'
                                 && ViewCustomer.CustomerInfo.CustomerInfo.PreferredPhoneLabel != 'HomeNumber'
                                 && ViewCustomer.CustomerInfo.CustomerInfo.HomeNumber != ''" >
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                    <i class="fa fa-star orange favorite" ng-show="ViewCustomer.setPrefferedPhone() === ViewCustomer.CustomerInfo.CustomerInfo.FormattedHomeNumber" ></i>
                                    <label ng-class="{'ml-small': ViewCustomer.setPrefferedPhone() !== ViewCustomer.CustomerInfo.CustomerInfo.FormattedHomeNumber}" class="T7 label_favorite" for="labelFirstName">{{ 'Call_home' | translate }}</label>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.FormattedHomeNumber}} </span>
                                 </div>
                              </div>
                              <div class="row "  ng-show="ViewCustomer.CustomerInfo.CustomerInfo.HomeNumberSMS==true && ViewCustomer.CustomerInfo.CustomerInfo.Type == 'Individual' &&
                                 ViewCustomer.CustomerInfo.CustomerInfo.PreferredPhoneLabel != 'HomeNumber' && ViewCustomer.CustomerInfo.CustomerInfo.HomeNumber != ''">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'SMS_home' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.FormattedHomeNumber}} </span>
                                 </div>
                              </div>
                              <div class="row" ng-if="ViewCustomer.CustomerInfo.CustomerInfo.Type == 'Business' && ViewCustomer.CustomerInfo.CustomerInfo.PreferredPhoneLabel != 'WorkNumber'
                                 && ViewCustomer.CustomerInfo.CustomerInfo.WorkNumber != ''">
                                 <!-- condition added by pooja -->
                                 <div class="col-lg-5 col-md-5  customer_general_column">
                                    <span style="padding-top:10px;">
                                    <i class="fa fa-star orange favorite" ng-show="ViewCustomer.setPrefferedPhone() === ViewCustomer.CustomerInfo.CustomerInfo.FormattedWorkNumber" ></i>
                                    <label ng-class="{ 'ml-small' : ViewCustomer.setPrefferedPhone() !== ViewCustomer.CustomerInfo.CustomerInfo.FormattedWorkNumber}"
                                       class="T7 label_favorite" for="labelFirstName">{{ 'Call_work' | translate }}</label>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.FormattedWorkNumber}} </span>
                                 </div>
                              </div>
                              <div class="row " ng-show="ViewCustomer.CustomerInfo.CustomerInfo.PreferredSMSLabel != 'WorkNumberSMS' && ViewCustomer.CustomerInfo.CustomerInfo.WorkNumber != ''
                                 && ViewCustomer.CustomerInfo.CustomerInfo.PreferredPhoneLabel != 'WorkNumberSMS'">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'SMS_work' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.FormattedWorkNumber}} </span>
                                 </div>
                              </div>
                              <div class="row "  ng-show="ViewCustomer.CustomerInfo.CustomerInfo.PreferredPhoneLabel != 'OtherPhone' &&
                                 ViewCustomer.CustomerInfo.CustomerInfo.OtherPhone != ''">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                    <i class="fa fa-star orange favorite" ng-show="ViewCustomer.setPrefferedPhone() === ViewCustomer.CustomerInfo.CustomerInfo.FormattedOtherPhone" ></i>
                                    <label ng-class="{'ml-small' : ViewCustomer.setPrefferedPhone() !== ViewCustomer.CustomerInfo.CustomerInfo.FormattedOtherPhone}"
                                       class="T7 label_favorite" for="labelFirstName">{{ 'Call_other' | translate }}</label>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.FormattedOtherPhone }} </span>
                                 </div>
                              </div>
                              <div class="row "   ng-show="ViewCustomer.CustomerInfo.CustomerInfo.PreferredSMSLabel != 'MobileNumberSMS' && ViewCustomer.CustomerInfo.CustomerInfo.OtherPhone != '' &&  ViewCustomer.CustomerInfo.CustomerInfo.MobileNumberSMS ==true">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Sms_other' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.FormattedOtherPhone }} </span>
                                    <!-- | tel: Added By Pooja 4 Feb. 2017 -->
                                 </div>
                              </div>
                              <div class="row "   ng-show="ViewCustomer.CustomerInfo.CustomerInfo.JobTitle != ''">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Job_Title' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.JobTitle}} </span>
                                 </div>
                              </div>
                              <div class="row "   ng-show="ViewCustomer.CustomerInfo.CustomerInfo.Company != ''">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Label_Company' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.Company}} </span>
                                 </div>
                              </div>
                              <div class="row "   ng-show="ViewCustomer.CustomerInfo.CustomerInfo.Birthdate != null">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Label_Birthday' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.Birthdate | date:ViewCustomer.ExtendedDateFormat}}  </span>
                                 </div>
                              </div>               
                              <div class="row "   ng-show="ViewCustomer.CustomerInfo.CustomerInfo.DriversLicense != null">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Drivers_License' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.DriversLicense}}</span>
                                 </div>
                                        </div>
                              <div class="row" ng-show="ViewCustomer.CustomerInfo.CustomerInfo.LicenseExpiryDate != null">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">Drivers License Expiry</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7">
                                    <span class="blue T3">{{ViewCustomer.CustomerInfo.CustomerInfo.LicenseExpiryDate | date:ViewCustomer.ExtendedDateFormat}}  </span>
                                 </div>
                              </div>
	                                            
                              <div class="row "   ng-show="ViewCustomer.CustomerInfo.CustomerInfo.PriceLevelName != ''">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Label_Price_Level' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.PriceLevelName}}</span>
                                 </div>
                              </div>
                              <div class="row "   ng-show="ViewCustomer.CustomerInfo.CustomerInfo.PurchaseTaxName != ''">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Vendor_tax' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.PurchaseTaxName}}</span>
                                 </div>
                              </div>
                              <div class="row">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Account_Type' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.AccountTypeName}}</span>
                                 </div>
                              </div>
                              <div class="row" ng-if="ViewCustomer.IsChargeOnAccountRestricted">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Allow_charge_on_account' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{(ViewCustomer.CustomerInfo.CustomerInfo.AllowChargeOnAccount) ? 'Yes' : 'No'}}</span>
                                 </div>
                              </div>
                              <div class="row" ng-if="ViewCustomer.CustomerInfo.CustomerInfo.TaxExemptions">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Page_Section_TaxExemptions' | translate }}</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.TaxExemptions}}</span>
                                 </div>
                              </div>
                              <div class="row" ng-show="ViewCustomer.CustomerInfo.CustomerInfo.TaxId">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">Tax ID#</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.TaxId}} </span>
                                 </div>
                              </div>
                              <div class="row" ng-show="ViewCustomer.CustomerInfo.CustomerInfo.OtherId">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">Ag/Other ID#</label></div>
                                    </span>
                                 </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3"  >{{ViewCustomer.CustomerInfo.CustomerInfo.OtherId}} </span>
                                 </div>
                              </div>
                              <div class="row" ng-if="ViewCustomer.isShopifyEnabled && ViewCustomer.CustomerInfo.CustomerInfo.ShopifyId">
                                 <div class="col-lg-5 col-md-5 customer_general_column">
                                    <span style="padding-top:10px;">
                                       <div class="non_favorite"><label class="T7 label_favorite" for="labelFirstName">{{ 'Shopify_ID' | translate }}</label></div>
                                    </span>
                           </div>
                                 <div  class="col-lg-7 col-md-7" >
                                    <span class="blue T3" ng-if = "!ViewCustomer.CustomerInfo.CustomerInfo.ShopifyUrl">{{ViewCustomer.CustomerInfo.CustomerInfo.ShopifyId}}</span>
                                    <span class="blue T3" ng-if = "ViewCustomer.CustomerInfo.CustomerInfo.ShopifyUrl"><a href="{{ViewCustomer.CustomerInfo.CustomerInfo.ShopifyUrl}}" target = "_blank"> {{ViewCustomer.CustomerInfo.CustomerInfo.ShopifyId}} </a></span>
                                 </div>
                              </div>
                           </div>
                           <div class="row"  ng-if="ViewCustomer.setPrefferedPhone() != ''">
                              <div class="col-md-12 col-lg-12 see_more_button_row">
                                 <button type="button" class="bp-btn bp-btn-secondaryCTA  sendText"
                                    ng-click="ViewCustomer.openMessagePopUp()">{{ 'send_a_text' | translate }}</button>
                              </div>
                           </div>
	                                    
                        </div>
                     </div>
	                            
                     <div class="col-md-6 col-lg-6 subsectionGeneral" ng-if = " (ViewCustomer.CustomerInfo.CustomerInfo.BillingCity != '' || ViewCustomer.CustomerInfo.CustomerInfo.BillingPostalCode != '')">
                        <div class="row">
                           <div class=" col-lg-4 col-md-4 " style="padding-left:10px ;text-align:center;cursor:pointer">
                                 <div class="T4 round_btn" ng-click="ViewCustomer.changeActiveAddress('BillingAddress')"
                                    ng-class="{C11: ViewCustomer.activeAddressId == 'BillingAddress', C5: ViewCustomer.activeAddressId != 'BillingAddress'}"> {{ 'Label_Billing' | translate }} </div>
                              </div>
                              <div ng-repeat="shippingAddress in ViewCustomer.CMContacts">
                              <div ng-if="shippingAddress.IsShippingAddress" class=" col-lg-4 col-md-4 " style="padding-left:10px ;text-align:center;cursor:pointer">
                                    <div class="T4 round_btn" ng-click="ViewCustomer.changeActiveAddress(shippingAddress.Id)"
                                       ng-class="{C11: ViewCustomer.activeAddressId == shippingAddress.Id, C5: ViewCustomer.activeAddressId != shippingAddress.Id}">{{shippingAddress.LastName}}</div>
                                 </div>
                              </div>
                        </div>
                        <div class="row">
                           <div class="col-lg-12 col-md-12" style="padding:10px">
                              <p class="T3">
                                 <b ng-show="ViewCustomer.activeAddressId != 'BillingAddress'">{{ViewCustomer.activeAddress.LastName}}</b>
                                 <b ng-show="ViewCustomer.activeAddressId == 'BillingAddress'" >{{ 'Billing_address' | translate }}</b>
                              </p>
                              <div>
                                 <div ng-show="ViewCustomer.activeAddressId != 'BillingAddress'">
                                    <p class="T7">{{ViewCustomer.activeAddress.ShippingAddressLine1}}</p>
                                    <p class="T7">{{ViewCustomer.activeAddress.ShippingAddressLine2}}</p>
                                 </div>
                                 <div ng-show="ViewCustomer.activeAddressId == 'BillingAddress'">
                                    <p class="T7">{{ViewCustomer.CustomerInfo.CustomerInfo.BillingAddressLine1}}</p>
                                    <p class="T7">{{ViewCustomer.CustomerInfo.CustomerInfo.BillingAddressLine2}}</p>
                                 </div>
                              </div>
                           </div>
                        </div>

                        <div class="row"  ng-if="!ViewCustomer.viewMap">
                           <div class=" col-lg-4 col-md-4 viewMapBtn">
                              <div class="C11 T4 round_btn"  ng-click="ViewCustomer.handleViewMap()" > {{ 'Label_View_Map' | translate }} </div>
                           </div>
                        </div>

                        <div class="row mapBox" ng-if="ViewCustomer.viewMap">
                           <div class="col-lg-12 col-md-12 mapBoxInnerDiv">
                              <map zoom="12" center="37.7699298, -122.4469157" class="mapBoxMap">
                                 <directions
                                    draggable="false"
                                    panel="directions-panel"
                                    travel-mode="DRIVING"
                                    origin="{{ViewCustomer.OriginAddress}}"
                                    destination="{{ViewCustomer.addressOnMap}}">
                                 </directions>
                              </map>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
                  <div id="Info_Notes" class="Info_Notes">
                     <p class="actionRow T2">
                        <span class="sectionText">{{ 'Label_Notes' | translate }}</span>
                        <span class="ActionIcons">
                           <i class="fa fa-question-circle" data-toggle="tooltip" title="Notes about the customer"></i><!--  title="{{ViewPart.helpText['General']}}" -->
                        </span>
                     </p>
                     <div class="row rowNotes">
                        <div class="col-md-12 col-lg-12 section-container MT0    ">
                           <textarea ng-if="ViewCustomer.CustomerInfo.CustomerInfo.isNoteEditable" type="text" id="customerNotes" rows="4"
                              placeholder="Notes about the customer" ng-blur="ViewCustomer.updateCustomerNotes()"
                              ng-model="ViewCustomer.CustomerInfo.CustomerInfo.Notes" ng-focus="ViewCustomer.selectAllText('customerNotes')"></textarea>
                              <p ng-if="!ViewCustomer.CustomerInfo.CustomerInfo.isNoteEditable" ng-click="ViewCustomer.editCustomerNote($event)" ng-bind-html="ViewCustomer.checkForValidURL(ViewCustomer.CustomerInfo.CustomerInfo.Notes)"></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sectionHeader row" style="margin-top: 48px;">
               <!-- Scroll Issue: style="margin-top: 48px;": Added By Dinesh -->
               <div class="col-lg-4 col-lg-5">
                  <div class="fixedHeaderText">
                     <span class="headerlabel">
                     <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                        ng-show="!ViewCustomer.displaySections.Statistics"
                        ng-Click="ViewCustomer.displaySections.Statistics = true">
                     </i>
                     <i class="fa fa-angle-down" style="width:10px;"
                        ng-show="ViewCustomer.displaySections.Statistics"
                        ng-Click="ViewCustomer.displaySections.Statistics = false">
                     </i>
                     <span class="divider">|</span>
                     <span class="T2">{{ 'B' | translate }} {{ 'Page_Section_Statistics' | translate }}</span>
                     </span>
                  </div>
               </div>
            </div>
            <div id="StatisticsSection" >
               <div class="main_section row" ng-show="ViewCustomer.displaySections.Statistics">
                  <div id="VitalStatistics">
                     <p class="actionRow T2">
                        <span class="sectionText">{{ 'Page_Section_VitalStatistics' | translate }}</span>
                        <!-- <span class="actionText">Actions</span> -->
                        <span class="ActionIcons">
                           <!-- <i class="fa fa-th"></i> -->
                           <i class="fa fa-question-circle" data-toggle="tooltip" title="{{ViewCustomer.helpText['Vital_Statistics']}}"></i>
                        </span>
                     </p>
                     <div class="row statistics_row">
                        <div  style="  height:84px ; float :left ; margin-left: 1%;" class="C7" >
                           <div>
                              <div class="T4"  style="width: 100%"> {{ 'Open_orders' | translate }}</div>
                              <div class="T13"  style="width: 100%" ng-show="ViewCustomer.TotalActiveOrderRecords != null"> {{ViewCustomer.TotalActiveOrderRecords}}</div>
                              <div class="T13"  style="width: 100%" ng-show="ViewCustomer.TotalActiveOrderRecords == null"> 0</div>
                           </div>
                        </div>
                        <div  style="  height:84px ; float :left ; margin-left: 1%;" class="C7" >
                           <div>
                              <div class="T4" style="width: 100%" > {{ 'Invoices_lifetime' | translate }}</div>
                              <div class="T13"  style="width: 100%" ng-show="ViewCustomer.TotalInvoice != null" >{{ViewCustomer.TotalInvoice}}</div>
                              <div class="T13"  style="width: 100%" ng-show="ViewCustomer.TotalInvoice == null" >0</div>
                           </div>
                        </div>
                        <div  style="  height:84px ; float :left ; margin-left: 1%;" class="C7" >
                           <div>
                              <div class="T4" style="width: 100%"  > {{ 'Average_spend_per_invoice' | translate }} </div>
                              <div class="T13"  style="width: 100%" ng-show="ViewCustomer.AverageSpendPerInvoice != null" > {{ 'Currency_Symbol' | translate }}{{ViewCustomer.AverageSpendPerInvoice | number : 2}}</div>
                              <div class="T13"  style="width: 100%" ng-show="ViewCustomer.AverageSpendPerInvoice == null" > {{ 'Currency_Symbol' | translate }}0</div>
                           </div>
                        </div>
                        <div  style="  height:84px ; float :left ; margin-left: 1%;" class="C7" >
                           <div>
                              <div>
                                 <div class="T4" style="width: 100%" > {{ 'Last_visit' | translate }} </div>
                                 <div class="T13" style="width: 100%;" ng-show="ViewCustomer.CustomerInfo.LastVisit != ''" > {{ViewCustomer.CustomerInfo.LastVisit}}</div>
                                 <div class="T13" style="width: 100%"  ng-show="ViewCustomer.CustomerInfo.LastVisit == ''"  > 0</div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sectionHeader row">
               <div class="col-lg-4 col-lg-5">
                  <div class="fixedHeaderText">
                     <span class="headerlabel">
                     <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                        ng-show="!ViewCustomer.displaySections.Related"
                        ng-Click="ViewCustomer.displaySections.Related = true">
                     </i>
                     <i class="fa fa-angle-down" style="width:10px;"
                        ng-show="ViewCustomer.displaySections.Related"
                        ng-Click="ViewCustomer.displaySections.Related = false">
                     </i>
                     <span class="divider">|</span>
                     <span class="T2">{{ 'C' | translate }} {{ 'Page_Section_Related' | translate }}</span>
                     </span>
                  </div>
               </div>
            </div>
            <div id="RelatedSection" >
               <div ng-show="ViewCustomer.displaySections.Related">
                  <div id="RelatedSection_Cou_Block">
                     <div class="main_section_COU row">
                        <div class="main_section_COU_Header row" >
                           <p class="actionRow T2">
                              <span class="sectionText">{{ 'Tooltip_View_Vendor_COU' | translate }} <i class="fa fa-plus cou_plus_icon "
                                 ng-click="ViewCustomer.openAddCustomerOwnedUnitPopup($event)"
                                 ng-if="GroupOnlyPermissions['Customers'].enabled"></i></span>
                              <!-- <span class="actionText">Actions</span> -->
                              <span class="ActionIcons">
                                 <!-- <i class="fa fa-th"></i> -->
                                 <i class="fa fa-question-circle" data-toggle="tooltip" title="{{ViewCustomer.helpText['COU']}}"></i>
                              </span>
                           </p>
                        </div>
                        <div class="gid_container T6" id="CM_Owned_UnitsGrid_Empty_Div"
                           ng-show="ViewCustomer.CMOwnedUnits.length == 0" style="padding-left: 44px;">
                           {{ 'Label_No_Records_Found' | translate }}
                        </div>
                        <div ng-show="ViewCustomer.CMOwnedUnits.length != 0">
                           <div class="gid_container_Customer customer_owned_units" id="Customer_Owned_Units" >
                              <table class="table" id="CM_Owned_UnitsGrid">
                                 <col width="1%"  />
                                 <col width="1%"  />
                                 <col width="9%"  />
                                 <col width="8%"  />
                                 <col width="16%" />
                                 <col width="11%"  />
                                 <col width="12%" />
                                 <col width="14%" />
                                 <col width="10%"  />
                                 <col width="8%" />
                                 <col width="13%"  />
                                 <col width="1%"  />
                                 <tr  class="tableHeader T3 C2">
                                    <th></th>
                                    <th></th>
                                    <th>{{ 'Unit_ID' | translate }}</th>
                                    <th>{{ 'Label_Year' | translate }}</th>
                                    <th>{{ 'Make_Object_Display_Label' | translate }}</th>
                                    <th>{{ Custom_Label_Model | translate }}</th>
                                    <th>{{ Custom_Label_Sub_Model | translate }}</th>
                                    <th>{{ 'Label_VIN' | translate }}</th>
                                    <th>{{ 'Label_Plate' | translate }}</th>
                                    <th>{{ 'Label_Mileage' | translate }}</th>
                                    <th>{{ 'Label_Color' | translate }}</th>
                                    <th></th>
                                 </tr>
                                 <tbody ng-repeat="ownedUnit in ViewCustomer.CMOwnedUnits" >
                                    <!-- Display rows -->
                                    <tr class="clickable_row lineHeight35" id="row1" rel="owned_unit_row{{$index}}_edit" ng-mousedown ="ViewCustomer.editOwnedUnit($event, $index)"
                                       ng-blur = "ViewCustomer.editOwnedUnit($event, $index)"  ng-class-even="'C2'"   >
                                       <td style="background:#fff"></td>
                                       <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_1_{{$index}}" >
                                       </td>
                                       <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_10_{{$index}}" class="T7"  ng-mouseleave="ViewCustomer.hideCOUPopUp();" ng-mouseover="ViewCustomer.openCOUpopup($event, ownedUnit.Id);"><span class="text-underline" ng-if="ownedUnit.UnitType != 'STOCK'">{{ownedUnit.UnitId}}</span><span class="text-underline" ng-if="ownedUnit.UnitType == 'STOCK'">{{ownedUnit.StockId}}</span> </td>
                                       <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7">  <span>{{ownedUnit.Year}}</span> </td>
                                       <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_3_{{$index}}" class="T7 " >  {{ownedUnit.MakeName}}</td>
                                       <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_4_{{$index}}" class="T7">  {{ownedUnit.ModelName}} </td>
                                       <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_5_{{$index}}" class="T7">  {{ownedUnit.SubModelName}}      </td>
                                       <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_6_{{$index}}"  class="T7"> {{ownedUnit.VIN}}           </td>
                                       <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_7_{{$index}}" class="T7">  {{ownedUnit.Plate}}         </td>
                                       <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_8_{{$index}}" class="T7">  {{ownedUnit.Mileage}}       </td>
                                       <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_9_{{$index}}" class="T7 ">  {{ownedUnit.Color}}     </td>
                                       <td></td>
                                    </tr>
                                    <!-- action editable Row -->
                                    <tr ng-show="ViewCustomer.CMOwnedUnits_editRow[$index].isEdit" class="edit_panel sample-show-hide" id="owned_unit_row{{$index}}_edit">
                                       <td style="background:#fff"></td>
                                       <td colspan="9" id="CM_Owned_Units_block_grid_container_tbody_expandtr_td_1_{{$index}}" ng-mousedown="ViewCustomer.allowHidingActionPanel = false;">
                                          <div id="CM_Owned_Units_block_grid_container_tbody_expandtr_edit_box_{{$index}}" class="edit_box col-lg-9 col-md-9" ng-show="ViewCustomer.CMOwnedUnits_editRow[$index].isEdit">
                                             <div class="its-heading" id="CM_Owned_Units_block_grid_container_tbody_expandtr_edit_box_its-heading_{{$index}}">
                                                <img src="{!Application_Images}/edit_icon.png" class="img_action"/>
                                                <!-- <div class="sprite edit_icon pull-left" style="margin: 2px 4px 2px 2px;"></div> -->
                                                <span>{{ 'Label_Actions' | translate }} ({{ 'Two_available' | translate }})</span>
                                             </div>
                                             <div id="CM_Owned_Units_block_grid_container_tbody_expandtr_edit_box_its-heading_edit-body_{{$index}}" class="edit-body">
                                                <form>
                                                   <!-- Edit link as action -->
                                                   <div class="radio" id="CM_Owned_Units_block_grid_container_tbody_expandtr_edit_box_its-heading_edit-body_{{$index}}_radio_1">
                                                      <label>
                                                      <input type="radio" name="optionsRadios" id="optionsRadios1" value="1" checked="checked"
                                                         ng-model= "ViewCustomer.CMOwnedUnits_editRow[$index].radioValue" ng-blur="ViewCustomer.hideAllCOUActionPanel()"/>
                                                      <span>
                                                      <i class="fa fa-pencil-square-o"></i>
                                                      {{ 'Edit_Label' | translate }}
                                                      </span>
                                                      </label>
                                                   </div>
                                                   <div class="radio" id="CM_Owned_Units_block_grid_container_tbody_expandtr_edit_box_its-heading_edit-body_{{$index}}_radio_4">
                                                      <label>
                                                      <input type="radio" name="optionsRadios" id="optionsRadios4" value="4"
                                                         ng-model= "ViewCustomer.CMOwnedUnits_editRow[$index].radioValue"/>
                                                      <span>
                                                      <i class="fa fa-times"></i>
                                                      {{ 'Remove_link' | translate }}
                                                      </span>
                                                      </label>
                                                   </div>
                                                   <!-- Action button (Go) -->
                                                   <a  id="CM_Owned_Units_block_grid_container_tbody_expandtr_edit_box_its-heading_edit-body_{{$index}}_go_btn"
                                                      class="btn C11 T4 addmoreinfoBtn editform_btn" role="button"
                                                      ng-click="ViewCustomer.CM_OwnedUnits_GoAction($index)"> {{ 'Label_Go' | translate }}  </a>
                                                </form>
                                             </div>
                                          </div>
                                       </td>
                                       <td style="background:#fff"></td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- Pagination container -->
                           <div class="row pagination_container" id="COU_Items_Pagination" style="margin-left: 10px; margin-right: 0;"
                              ng-if="ViewCustomer.TotalCOURecords != undefined" >
                              <list-pagination id-value = "COU_Items_Pagination_"
                                 total-records-length = "ViewCustomer.TotalCOURecords"
                                 page-size = "ViewCustomer.COUPageSortAttrsJSON.PageSize"
                                 current-page = "ViewCustomer.COUPageSortAttrsJSON.CurrentPage"
                                 changes-count = "ViewCustomer.COUPageSortAttrsJSON.ChangesCount"
                                 pagination-control-method = "ViewCustomer.COUs_paginationControlsAction" />
                           </div>
                        </div>
                     </div>
                  </div>
                  <!-- START: Active Orders section (Customer Orders) -->
                  <div id="RelatedSection_ActiveOrders_Block" ng-if="ViewCustomer.isActiveOrdersAndOrderHistoryBlockAccessible()">
                     <div class="main_section_COU row">
                        <div class="main_section_COU_Header row" >
                           <p class="actionRow T2">
                              <span class="sectionText">{{ 'ViewLabour_Active_Orders' | translate }}</span>
                              <!-- <span class="actionText">Actions</span> -->
                              <span class="ActionIcons">
                                 <!-- <i class="fa fa-th"></i> -->
                                 <i class="fa fa-question-circle" data-toggle="tooltip" title="Active Orders"></i>
                              </span>
                           </p>
                        </div>
                        <div class="gid_container T6" id="ActiveOrders_Empty_Div"
                           ng-show="ViewCustomer.ActiveOrders.length == 0" style="padding-left: 44px;">
                           {{ 'Label_No_Records_Found' | translate }}
                        </div>
                        <div class="gid_container_Customer" id="Customer_Active_Orders" ng-show="ViewCustomer.ActiveOrders.length > 0">
                           <table class="table" id="Active_Orders_Grid">
                              <col width="1%"  />
                              <col width="3%"  />
                              <col width="10%"  />
                              <col width="10%" />
                              <col width="10%"  />
                              <col width="10%" />
                              <col width="20%" />
                              <col width="1%"  />
                              <tr  class="tableHeader T3 C2">
                                 <th></th>
                                 <th></th>
                                 <th>{{ 'CO_Number' | translate }}</th>
                                 <th>{{ 'Last_modified' | translate }}</th>
                                 <th>{{ 'Order_Total' | translate }}</th>
                                 <th>{{ 'Deposits' | translate }}</th>
                                 <th>{{ 'Type_and_total' | translate }}</th>
                                 <th></th>
                              </tr>
                              <tbody ng-repeat="activeOrder in ViewCustomer.ActiveOrders" >
                                 <!-- Display rows -->
                                 <tr class="clickable_row lineHeight35" id="row1" ng-class-even="'C2'"   >
                                    <td style="background:#fff"></td>
                                    <td id="CM_Active_Orders_block_grid_container_tbody_tr_td_1_{{$index}}" >
                                    </td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7">
                                       <span ng-if="{!IsLoadNewCustomerOrder}">
                                       <a ui-sref="CustomerOrder_V2({Id: activeOrder.Id})" target="_blank">{{activeOrder.CONumber}}</a>
                                       </span>
                                       <span ng-if="{!!IsLoadNewCustomerOrder}">
                                       <a ui-sref="CustomerOrder({Id: activeOrder.Id})">{{activeOrder.CONumber}}</a>
                                       </span>
                                    </td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_3_{{$index}}" class="T7 "> {{activeOrder.LastModifiedDate}}</td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_4_{{$index}}" class="T7">  {{activeOrder.TotalOrderValue | currency }} </td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_5_{{$index}}" class="T7">  {{activeOrder.TotalDepositValue | currency }}  </td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_6_{{$index}}"  class="T7"> 
                                       <div class="text-left secondChild bp-dark-grey2-font">
                                          <span ng-if="activeOrder.DealTotal " class = "pull-left">
                                          <span class="AdditionalInfoLabel" ng-if="activeOrder.DealLabel">{{activeOrder.DealLabel}}:</span>
                                          <span class="bp-bold-font AdditionalInfo">{{activeOrder.DealTotal | currency}}</span>
                                          </span>
                                          <span ng-if="activeOrder.DealTotal && (activeOrder.ServiceTotal || activeOrder.MerchandiseTotal)" class = "pull-left PR2">, </span>
                                          <span ng-if="activeOrder.ServiceTotal" class = "pull-left">
                                          <span class="AdditionalInfoLabel" ng-if ="activeOrder.ServiceLabel">{{activeOrder.ServiceLabel}}:</span>
                                          <span class="bp-bold-font AdditionalInfo">{{activeOrder.ServiceTotal | currency}}</span>
                                          </span>
                                          <span ng-if="activeOrder.ServiceTotal && activeOrder.MerchandiseTotal" class = "pull-left PR2">, </span>
                                          <span ng-if="activeOrder.MerchandiseTotal"  class = "pull-left">
                                          <span class="AdditionalInfoLabel">Parts &amp; accessories:</span>
                                          <span class="bp-bold-font AdditionalInfo">{{activeOrder.MerchandiseTotal | currency}}</span>
                                          </span>
                                       </div>
                                    </td>
                                    <td style="background:#fff"></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- Pagination container -->
                        <div class="row pagination_container" id="Active_Orders_Pagination" style="margin-left: 10px; margin-right: 0;"
                           ng-if="ViewCustomer.TotalActiveOrderRecords != undefined && ViewCustomer.TotalActiveOrderRecords != 0" >
                           <list-pagination id-value = "Active_Orders_Pagination_"
                              total-records-length = "ViewCustomer.TotalActiveOrderRecords"
                              page-size = "ViewCustomer.ActiveOrdersPageSortAttrsJSON.PageSize"
                              current-page = "ViewCustomer.ActiveOrdersPageSortAttrsJSON.CurrentPage"
                              changes-count = "ViewCustomer.ActiveOrdersPageSortAttrsJSON.ChangesCount"
                              pagination-control-method = "ViewCustomer.ActiveOrders_paginationControlsAction" />
                        </div>
                     </div>
                  </div>
                  <div id="RelatedSection_ActiveQuotes_Block" ng-if="ViewCustomer.isActiveOrdersAndOrderHistoryBlockAccessible()">
                     <div class="main_section_COU row">
                        <div class="main_section_COU_Header row" >
                           <p class="actionRow T2">
                              <span class="sectionText">{{ 'Active_Quotes' | translate }}</span>
                              <span class="ActionIcons">
                                 <i class="fa fa-question-circle" data-toggle="tooltip" title="Active Quotes"></i>
                              </span>
                           </p>
                        </div>
                        <div class="gid_container T6" id="Active_Quotes_Empty_Div"
                           ng-show="ViewCustomer.ActiveQuotes.length == 0" style="padding-left: 44px;">
                           {{ 'Label_No_Records_Found' | translate }}
                        </div>
                        <div class="gid_container_Customer" id="Customer_Active_Quotes" ng-show="ViewCustomer.ActiveQuotes.length > 0">
                           <table class="table" id="Active_Orders_Grid">
                              <col width="1%"  />
                              <col width="3%"  />
                              <col width="10%"  />
                              <col width="10%" />
                              <col width="10%"  />
                              <col width="10%" />
                              <col width="20%" />
                              <col width="1%"  />
                              <tr  class="tableHeader T3 C2">
                                 <th></th>
                                 <th></th>
                                 <th>{{ 'CO_Number' | translate }}</th>
                                 <th>{{ 'Last_modified' | translate }}</th>
                                 <th>{{ 'Order_Total' | translate }}</th>
                                 <th>{{ 'Deposits' | translate }}</th>
                                 <th>{{ 'Type_and_total' | translate }}</th>
                                 <th></th>
                              </tr>
                              <tbody ng-repeat="activeQuotes in ViewCustomer.ActiveQuotes" >
                                 <tr class="clickable_row lineHeight35" id="row1" ng-class-even="'C2'"   >
                                    <td style="background:#fff"></td>
                                    <td id="CM_Active_Orders_block_grid_container_tbody_tr_td_1_{{$index}}" >
                                    </td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7">
                                       <span ng-if="{!IsLoadNewCustomerOrder}">
                                       <a ui-sref="CustomerOrder_V2({Id: activeQuotes.Id})" target="_blank">{{activeQuotes.CONumber}}</a>
                                       </span>
                                       <span ng-if="{!!IsLoadNewCustomerOrder}">
                                       <a ui-sref="CustomerOrder({Id: activeQuotes.Id})">{{activeQuotes.CONumber}}</a>
                                       </span>
                                    </td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_3_{{$index}}" class="T7 "> {{activeQuotes.LastModifiedDate}}</td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_4_{{$index}}" class="T7">  {{activeQuotes.TotalOrderValue | currency }} </td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_5_{{$index}}" class="T7">  {{activeQuotes.TotalDepositValue | currency }}  </td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_6_{{$index}}"  class="T7"> 
                                       <div class="text-left secondChild bp-dark-grey2-font">
                                          <span ng-if="activeQuotes.DealTotal " class = "pull-left">
                                          <span class="AdditionalInfoLabel" ng-if="activeQuotes.DealLabel">{{activeQuotes.DealLabel}}:</span>
                                          <span class="bp-bold-font AdditionalInfo">{{activeQuotes.DealTotal | currency}}</span>
                                          </span>
                                          <span ng-if="activeQuotes.DealTotal && (activeQuotes.ServiceTotal || activeQuotes.MerchandiseTotal)" class = "pull-left PR2">, </span>
                                          <span ng-if="activeQuotes.ServiceTotal" class = "pull-left">
                                          <span class="AdditionalInfoLabel" ng-if ="activeQuotes.ServiceLabel">{{activeQuotes.ServiceLabel}}:</span>
                                          <span class="bp-bold-font AdditionalInfo">{{activeQuotes.ServiceTotal | currency}}</span>
                                          </span>
                                          <span ng-if="activeQuotes.ServiceTotal && activeQuotes.MerchandiseTotal" class = "pull-left PR2">, </span>
                                          <span ng-if="activeQuotes.MerchandiseTotal"  class = "pull-left">
                                          <span class="AdditionalInfoLabel">Parts &amp; accessories:</span>
                                          <span class="bp-bold-font AdditionalInfo">{{activeQuotes.MerchandiseTotal | currency}}</span>
                                          </span>
                                       </div>
                                    </td>
                                    <td style="background:#fff"></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- Pagination container -->
                        <div class="row pagination_container" id="Active_Quotes_Pagination" style="margin-left: 10px; margin-right: 0;"
                           ng-if="ViewCustomer.TotalActiveQuoteRecords != undefined && ViewCustomer.TotalActiveQuoteRecords != 0" >
                           <list-pagination id-value = "Active_Quotes_Pagination_"
                              total-records-length = "ViewCustomer.TotalActiveQuoteRecords"
                              page-size = "ViewCustomer.ActiveQuotesPageSortAttrsJSON.PageSize"
                              current-page = "ViewCustomer.ActiveQuotesPageSortAttrsJSON.CurrentPage"
                              changes-count = "ViewCustomer.ActiveQuotesPageSortAttrsJSON.ChangesCount"
                              pagination-control-method = "ViewCustomer.ActiveQuotes_paginationControlsAction" />
                        </div>
                     </div>
                  </div>
                  <!-- END: Active Orders section (Customer Orders) -->
                  <!-- Start: Added By Pooja 26 Jan. 2017 -->
                  <!-- START: Customer Orders History section -->
                  <div id="RelatedSection_CustomerOrders_Block" ng-if="ViewCustomer.isActiveOrdersAndOrderHistoryBlockAccessible()">
                     <div class="main_section_COU row">
                        <div class="main_section_COU_Header row" >
                           <p class="actionRow T2">
                              <span class="sectionText">{{ 'Label_Invoice_History' | translate }}</span>
                              <!-- <span class="actionText">Actions</span> -->
                              <span class="ActionIcons">
                                 <!-- <i class="fa fa-th"></i> -->
                                 <i class="fa fa-question-circle" data-toggle="tooltip" title="Customer Order History"></i>
                              </span>
                           </p>
                        </div>
                        <div class="gid_container T6" id="Customer_Orders_Empty_Div"
                           ng-show="ViewCustomer.CustomerOrderInvoices.length == 0" style="padding-left: 44px;">
                           {{ 'Label_No_Records_Found' | translate }}
                        </div>
                        <div class="gid_container_Customer" id="Customer_Orders" ng-show="ViewCustomer.CustomerOrderInvoices.length > 0">
                           <table class="table" id="Customer_Orders_Grid">
                              <col width="1%"  />
                              <col width="3%"  />
                              <col width="10%"  />
                              <col width="10%" />
                              <col width="10%"  />
                              <col width="10%" />
                              <col width="15%" />
                              <col width="6%"  />
                              <tr  class="tableHeader T3 C2">
                                 <th></th>
                                 <th></th>
                                 <th>{{ 'Invoice Number' | translate }}</th>
                                 <th>{{ 'Invoice_Page_Invoice_Date' | translate }}</th>
                                 <th>{{ 'Invoice_total' | translate }}</th>
                                 <th>{{ 'Invoice_type' | translate }}</th>
                                 <th>{{ 'Label_Description' | translate }}</th>
                                 <th></th>
                              </tr>
                              <tbody ng-repeat="customerOrder in ViewCustomer.CustomerOrderInvoices" >
                                 <!-- Display rows -->
                                 <tr class="clickable_row lineHeight35" id="row1" ng-class-even="'C2'"   >
                                    <td style="background:#fff"></td>
                                    <td id="CM_Customer_Orders_block_grid_container_tbody_tr_td_1_{{$index}}" >
                                    </td>
                                    <td id="CM_Customer_Orders_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7">
                                       <span ng-if="{!IsLoadNewCustomerOrder}">
                                       <a ui-sref="CustomerOrder_V2({Id: customerOrder.COHeaderId})" target="_blank">{{customerOrder.InvoiceNumber}}</a>
                                       </span>
                                       <span ng-if="{!!IsLoadNewCustomerOrder}">
                                       <a ui-sref="CustomerOrder({Id: customerOrder.COHeaderId})" target="_blank">{{customerOrder.InvoiceNumber}}</a>
                                       </span>
                                    </td>
                                    <td id="CM_Customer_Orders_block_grid_container_tbody_tr_td_3_{{$index}}" class="T7 "> {{customerOrder.InvoiceDate}}</td>
                                    <td id="CM_Customer_Orders_block_grid_container_tbody_tr_td_4_{{$index}}" class="T7">  {{customerOrder.InvoiceTotal | currency }} </td>
                                    <td id="CM_Customer_Orders_block_grid_container_tbody_tr_td_5_{{$index}}" class="T7">  {{customerOrder.InvoiceType }}  </td>
                                    <td id="CM_Customer_Orders_block_grid_container_tbody_tr_td_6_{{$index}}"  class="T7 bp-first-letter-capitalize"> {{customerOrder.Description}}</td>
                                    <td>
                                       <div class="c-icon-container">
                                          <span data-toggle="tooltip" title="Print">
                                             <i class="bp-icons bp-blue-font bp-font-18 bp-cursor-pointer stroke-5" ng-click = "ViewCustomer.showInvoicePreviewPopup = true; ViewCustomer.showPrintpopUpModalWindow(customerOrder.COInvoiceHeaderId, customerOrder.COHeaderId);" >print</i> 
                                          </span>
                                          <span data-toggle="tooltip" title="Email">
                                             <i class="bp-icons bp-blue-font bp-font-18 bp-cursor-pointer stroke-5" ng-click="ViewCustomer.openEmailPopUp(customerOrder.COInvoiceHeaderId, customerOrder.COHeaderId, '', customerOrder.InvoiceNumber)">email</i>
                                          </span>
                                      </div>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- Pagination container -->
                        
                        <div class="row pagination_container" id="Active_Orders_Pagination" style="margin-left: 10px; margin-right: 0;"
                           ng-if="ViewCustomer.TotalInvoice != undefined && ViewCustomer.TotalInvoice != 0">
                           <list-pagination id-value = "Customer_Orders_Pagination_"
                              total-records-length = "ViewCustomer.TotalInvoice"
                              page-size = "ViewCustomer.CustomerOrdersPageSortAttrsJSON.PageSize"
                              current-page = "ViewCustomer.CustomerOrdersPageSortAttrsJSON.CurrentPage"
                              changes-count = "ViewCustomer.CustomerOrdersPageSortAttrsJSON.ChangesCount"
                              pagination-control-method = "ViewCustomer.getInvoiceHistory" />
                        </div>
                     </div>
                  </div>
                  <div id="RelatedSection_ArchivedQuotes_Block" ng-if="ViewCustomer.isActiveOrdersAndOrderHistoryBlockAccessible()">
                     <div class="main_section_COU row">
                        <div class="main_section_COU_Header row" >
                           <p class="actionRow T2">
                              <span class="sectionText">{{ 'Archived_Quotes' | translate }}</span>
                              <span class="ActionIcons">
                                 <i class="fa fa-question-circle" data-toggle="tooltip" title="Archived Quotes"></i>
                              </span>
                           </p>
                        </div>
                        <div class="gid_container T6" id="Archived_Quotes_Empty_Div"
                           ng-show="ViewCustomer.ArchivedQuotes.length == 0" style="padding-left: 44px;">
                           {{ 'Label_No_Records_Found' | translate }}
                        </div>
                        <div class="gid_container_Customer" id="Customer_Archived_Quotes" ng-show="ViewCustomer.ArchivedQuotes.length > 0">
                           <table class="table" id="Active_Orders_Grid">
                              <col width="1%"  />
                              <col width="3%"  />
                              <col width="10%"  />
                              <col width="10%" />
                              <col width="10%"  />
                              <col width="10%" />
                              <col width="20%" />
                              <col width="1%"  />
                              <tr  class="tableHeader T3 C2">
                                 <th></th>
                                 <th></th>
                                 <th>{{ 'CO_Number' | translate }}</th>
                                 <th>{{ 'Last_modified' | translate }}</th>
                                 <th>{{ 'Order_Total' | translate }}</th>
                                 <th>{{ 'Deposits' | translate }}</th>
                                 <th>{{ 'Type_and_total' | translate }}</th>
                                 <th></th>
                              </tr>
                              <tbody ng-repeat="archivedQuote in ViewCustomer.ArchivedQuotes" >
                                 <tr class="clickable_row lineHeight35" id="row1" ng-class-even="'C2'"   >
                                    <td style="background:#fff"></td>
                                    <td id="CM_Active_Orders_block_grid_container_tbody_tr_td_1_{{$index}}" >
                                    </td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7">
                                       <span ng-if="{!IsLoadNewCustomerOrder}">
                                       <a ui-sref="CustomerOrder_V2({Id: archivedQuote.Id})" target="_blank">{{archivedQuote.CONumber}}</a>
                                       </span>
                                       <span ng-if="{!!IsLoadNewCustomerOrder}">
                                       <a ui-sref="CustomerOrder({Id: archivedQuote.Id})">{{archivedQuote.CONumber}}</a>
                                       </span>
                                    </td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_3_{{$index}}" class="T7 "> {{archivedQuote.LastModifiedDate}}</td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_4_{{$index}}" class="T7">  {{archivedQuote.TotalOrderValue | currency }} </td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_5_{{$index}}" class="T7">  {{archivedQuote.TotalDepositValue | currency }}  </td>
                                    <td id="CM_Owned_Units_block_grid_container_tbody_tr_td_6_{{$index}}"  class="T7"> 
                                       <div class="text-left secondChild bp-dark-grey2-font">
                                          <span ng-if="archivedQuote.DealTotal " class = "pull-left">
                                          <span class="AdditionalInfoLabel" ng-if="archivedQuote.DealLabel">{{archivedQuote.DealLabel}}:</span>
                                          <span class="bp-bold-font AdditionalInfo">{{archivedQuote.DealTotal | currency}}</span>
                                          </span>
                                          <span ng-if="archivedQuote.DealTotal && (archivedQuote.ServiceTotal || archivedQuote.MerchandiseTotal)" class = "pull-left PR2">, </span>
                                          <span ng-if="archivedQuote.ServiceTotal" class = "pull-left">
                                          <span class="AdditionalInfoLabel" ng-if ="archivedQuote.ServiceLabel">{{archivedQuote.ServiceLabel}}:</span>
                                          <span class="bp-bold-font AdditionalInfo">{{archivedQuote.ServiceTotal | currency}}</span>
                                          </span>
                                          <span ng-if="archivedQuote.ServiceTotal && archivedQuote.MerchandiseTotal" class = "pull-left PR2">, </span>
                                          <span ng-if="archivedQuote.MerchandiseTotal"  class = "pull-left">
                                          <span class="AdditionalInfoLabel">Parts &amp; accessories:</span>
                                          <span class="bp-bold-font AdditionalInfo">{{archivedQuote.MerchandiseTotal | currency}}</span>
                                          </span>
                                       </div>
                                    </td>
                                    <td style="background:#fff"></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- Pagination container -->
                        <div class="row pagination_container" id="Archived_Quotes_Pagination" style="margin-left: 10px; margin-right: 0;"
                           ng-if="ViewCustomer.TotalArchivedQuoteRecords != undefined && ViewCustomer.TotalArchivedQuoteRecords != 0" >
                           <list-pagination id-value = "Archived_Quotes_Pagination_"
                              total-records-length = "ViewCustomer.TotalArchivedQuoteRecords"
                              page-size = "ViewCustomer.ArchivedQuotesPageSortAttrsJSON.PageSize"
                              current-page = "ViewCustomer.ArchivedQuotesPageSortAttrsJSON.CurrentPage"
                              changes-count = "ViewCustomer.ArchivedQuotesPageSortAttrsJSON.ChangesCount"
                              pagination-control-method = "ViewCustomer.ArchivedQuotes_paginationControlsAction" />
                        </div>
                     </div>
                  </div>
                  <!-- START: Customer Orders History section -->
                  <!-- End: Added By Pooja 26 Jan. 2017 -->
                  <div id="RelatedSection_Customer_BLock">
                     <div class="main_section_COU row">
                        <div class="main_section_COU_Header row" >
                           <p class="actionRow T2">
                              <span class="sectionText">{{ 'Label_Customer' | translate }} <i class="fa fa-plus cou_plus_icon "
                                 ng-click="setFocusToSearchBox();"
                                 ng-if="GroupOnlyPermissions['Customers'].enabled"></i></span>
                              <!-- <span class="actionText">Actions</span> -->
                              <span class="ActionIcons">
                                 <!-- <i class="fa fa-th"></i> -->
                                 <i class="fa fa-question-circle" data-toggle="tooltip" title="{{ViewCustomer.helpText['Customers']}}"></i>
                              </span>
                           </p>
                        </div>
                        <div class="gid_container T6" id="Customers_Empty_Div"
                           ng-show="ViewCustomer.CMCustomers.length == 0" style="padding-left: 44px;">
                           {{ 'Label_No_Records_Found' | translate }}
                        </div>
                        <div ng-show="ViewCustomer.CMCustomers.length != 0">
                           <div class="gid_container_Customer" id="Customers_Div" >
                              <table class="table" id="CustomersGrid">
                                 <col width="1%"  />
                                 <col width="4%"  />
                                 <col width="17%"  />
                                 <col width="20%"  />
                                 <col width="17%" />
                                 <col width="25%"  />
                                 <col width="15%" />
                                 <col width="1%"  />
                                 <tr  class="tableHeader T3 C2">
                                    <th></th>
                                    <th></th>
                                    <th>{{ 'Customer_number' | translate }}</th>
                                    <th>{{ 'Customer_name' | translate }}</th>
                                    <th>{{ 'vLabel_Phone_Number' | translate }}</th>
                                    <th>{{ 'Email_address' | translate }}</th>
                                    <th>{{ 'RELATION' | translate }}</th>
                                    <th></th>
                                 </tr>
                                 <tbody  ng-repeat="indivCustomer in ViewCustomer.CMCustomers" >
                                    <!-- Display rows -->
                                    <tr class="clickable_row tddropdown"  id="row1" rel="rel_customer_row{{$index}}_edit"
                                       ng-click="ViewCustomer.editRelatedCustomer($event, $index)"  ng-class-even="'C2'"  >
                                       <td style="background:#fff"></td>
                                       <td id="CM_Customers_block_grid_container_tbody_tr_td_1_{{$index}}">
                                          <a  class="edite_btn C5" rel="row1_edit">
                                             <img src="{!Application_Images}/star.png"  class="first_img" />
                                             <!-- <div class="sprite star pull-left" style="zoom: 0.8;-moz-transform:scale(0.8);"></div> -->
                                          </a>
                                       </td>
                                       <td id="CM_Customers_block_grid_container_tbody_tr_td_2_{{$index}}" >    <span>{{indivCustomer.CustomerNumber}}</span>   </td>
                                       <!-- T7 removed by kajal 7th june 2017 #2024 -->
                                       <td id="CM_Customers_block_grid_container_tbody_tr_td_3_{{$index}}">    <u>{{indivCustomer.CustomerName}}</u>           </td>
                                       <td id="CM_Customers_block_grid_container_tbody_tr_td_4_{{$index}}" >
                                          {{indivCustomer.PhoneNumber}}
                                          <i class="fa fa-star orange favorite" ng-show="indivCustomer.IsPreferredPhone && indivCustomer.PhoneNumber != ''"></i>
                                          <i class="fa fa-star-o" ng-show="!indivCustomer.IsPreferredPhone && indivCustomer.PhoneNumber != null && indivCustomer.PhoneNumber != ''"></i>
                                       </td>
                                       <!-- | tel: Added By Pooja 4 Feb. 2017 -->
                                       <td id="CM_Customers_block_grid_container_tbody_tr_td_5_{{$index}}" >
                                          {{indivCustomer.Email}}
                                          <i class="fa fa-star orange favorite" ng-show="indivCustomer.IsPreferredEmail && indivCustomer.Email != ''"></i>
                                          <i class="fa fa-star-o" ng-show="!indivCustomer.IsPreferredEmail && indivCustomer.Email != null && indivCustomer.Email != ''"></i>
                                       </td>
                                       <td id="CM_Customers_block_grid_container_tbody_tr_td_6_{{$index}}" >
                                          <select class="form-control" ng-model="indivCustomer.Relation"
                                             ng-click="$event.stopPropagation();"
                                             ng-change="ViewCustomer.addUpdateCustomerRecord(indivCustomer.Id, indivCustomer.Relation)"
                                             ng-disabled="!GroupOnlyPermissions['Customers'].enabled">
                                             <!-- T7 input-sm removed by kajal 7th june 2017 #2024 -->
                                             <option value="Family">{{ 'Label_Family' | translate }}</option>
                                             <option value="Friend">{{ 'Label_Friend' | translate }}</option>
                                             <option value="Employee">{{ 'Label_Employee' | translate }}</option>
                                             <option value="Co-Worker">{{ 'Label_Co_Worker' | translate }}</option>
                                             <option value="Employer">{{ 'Label_Employer' | translate }}</option>
                                          </select>
                                       </td>
                                       <td style="background:#fff"></td>
                                    </tr>
                                    <!-- Actions row in case editable row -->
                                    <tr ng-show="ViewCustomer.CMCustomers_editRow[$index].isEdit" class="edit_panel sample-show-hide" id="rel_customer_row{{$index}}_edit">
                                       <td style="background:#fff"></td>
                                       <td colspan="6" id="CM_Customers_block_grid_container_tbody_expandtr_td_1_{{$index}}">
                                          <div id="CM_Customers_block_grid_container_tbody_expandtr_edit_box_{{$index}}"
                                             class="edit_box col-lg-9 col-md-9"
                                             ng-show="ViewCustomer.CMCustomers_editRow[$index].isEdit">
                                             <div class="its-heading" id="CM_Customers_block_grid_container_tbody_expandtr_edit_box_its-heading_{{$index}}">
                                                <img src="{!Application_Images}/edit_icon.png" styleClass="img_action"/>
                                                <!-- <div class="sprite edit_icon pull-left" style="margin: 2px 4px 2px 2px;"></div> -->
                                                <span>{{ 'Label_Actions' | translate }} ({{ 'Two_available' | translate }})</span>
                                             </div>
                                             <div id="CM_Customers_block_grid_container_tbody_expandtr_edit_box_its-heading_edit-body_{{$index}}" class="edit-body">
                                                <form>
                                                   <!-- Edit link as action -->
                                                   <div class="radio" id="CM_Customers_block_grid_container_tbody_expandtr_edit_box_its-heading_edit-body_{{$index}}_radio_1">
                                                      <label>
                                                      <input type="radio" name="optionsRadios" id="optionsRadios2" value="1"
                                                         ng-model= "ViewCustomer.CMCustomers_editRow[$index].radioValue"/>
                                                      <span>
                                                      <i class="fa fa-pencil-square-o"></i>
                                                      {{ 'Edit_Label' | translate }}
                                                      </span>
                                                      </label>
                                                   </div>
                                                   <!-- Remove link as action -->
                                                   <div class="radio" id="CM_Customers_block_grid_container_tbody_expandtr_edit_box_its-heading_edit-body_{{$index}}_radio_2">
                                                      <label>
                                                      <input type="radio" name="optionsRadios" id="optionsRadios2" value="2"
                                                         ng-model= "ViewCustomer.CMCustomers_editRow[$index].radioValue"/>
                                                      <span>
                                                      <i class="fa fa-times"></i>
                                                      {{ 'Remove_link' | translate }}
                                                      </span>
                                                      </label>
                                                   </div>
                                                   <!-- Action button (Go) -->
                                                   <a  id="CM_Customers_block_grid_container_tbody_expandtr_edit_box_its-heading_edit-body_{{$index}}_go_btn" class="btn C11 T4 addmoreinfoBtn editform_btn" role="button"
                                                      ng-click="ViewCustomer.CM_Customers_GoAction($index)">  {{ 'Label_Go' | translate }}  </a>
                                                </form>
                                             </div>
                                          </div>
                                       </td>
                                       <td style="background:#fff"></td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- Pagination container -->
                           <div class="row pagination_container" id="Customers_Pagination" style="margin-left: 10px;margin-right: 0;"
                              ng-if="ViewCustomer.TotalCustomerRecords != undefined" >
                              <list-pagination id-value = "Customers_Pagination_"
                                 total-records-length = "ViewCustomer.TotalCustomerRecords"
                                 page-size = "ViewCustomer.customersPageSortAttrsJSON.PageSize"
                                 current-page = "ViewCustomer.customersPageSortAttrsJSON.CurrentPage"
                                 changes-count = "ViewCustomer.customersPageSortAttrsJSON.ChangesCount"
                                 pagination-control-method = "ViewCustomer.Customers_paginationControlsAction" />
                           </div>
                        </div>
                     </div>
                  </div>
                  <div id="RelatedSection_Contact_BLock">
                     <div class="main_section_COU row">
                        <div class="main_section_COU_Header row" >
                           <p class="actionRow T2">
                              <span class="sectionText">Contacts &amp; Shipping Addresses <i class="fa fa-plus cou_plus_icon " ng-click="ViewCustomer.openAddContactPopup()"></i></span>
                              <!-- <span class="actionText">Actions</span> -->
                              <span class="ActionIcons">
                                 <!-- <i class="fa fa-th"></i> -->
                                 <i class="fa fa-question-circle" data-toggle="tooltip" title="{{ViewCustomer.helpText['Contacts']}}"></i>
                              </span>
                           </p>
                        </div>
                        <div class="gid_container T6" id="CM_Owned_UnitsGrid_Empty_Div"
                           ng-show="ViewCustomer.CMContacts.length == 0" style="padding-left: 44px;">
                           {{ 'Label_No_Records_Found' | translate }}
                        </div>
                        <div ng-show="ViewCustomer.CMContacts.length != 0">
                           <div class="gid_container_Customer" id="Contact_Div" >
                              <table class="table" id="ContactGrid">
                                 <!-- START: Edited by kajal 7th june 2017 #2024 -->
                                 <col width="5%"/>
                                 <col width="11%"/>
                                 <col width="7%"/>
                                 <col width="7%"/>
                                 <col width="11%"/>
                                 <col width="6%"/>
                                 <col width="15%"/>
                                 <col width="24%"/>
                                 <col width="1%"/>
                                 <!-- END: Edited by kajal 7th june 2017 #2024 -->
                                 <tr  class="tableHeader T3 C2">
                                    <th></th>
                                    <th>Name</th>
                                    <th>Is Contact</th>
                                    <th>Is Address</th>
                                    <th>Phone #</th>
                                    <th>Ext#</th>
                                    <th>Email</th>
                                    <th>Address</th>
                                    <th></th>
                                 </tr>
                                 <tbody  ng-repeat="contact in ViewCustomer.CMContacts" >
                                    <!-- Display rows -->
                                    <tr class="clickable_row" id="row1" rel="rel_contact_row{{$index}}_edit"
                                       ng-click="ViewCustomer.editRelatedContact($event, $index)"
                                       ng-blur = "ViewCustomer.editRelatedContact($event, $index)" ng-class-even="'C2'" >
                                       <td></td>
                                       <td id="CM_Contacts_block_grid_container_tbody_tr_td_2_{{$index}}">     <span>{{contact.LastName}}</span> </td>
                                       <td id="CM_Contacts_block_grid_container_tbody_tr_td_3_{{$index}}">  
                                          <label class="checkbox" style="padding-bottom: 1px;">
                                             <span class="chk_tick" ng-class="{'chked' : contact.IsContact}" style="margin-top:0px">
                                                <i class="fa fa-check-square chksqure"></i>
                                             </span>
                                          </label>
                                       </td>
                                       <td id="CM_Contacts_block_grid_container_tbody_tr_td_4_{{$index}}">
                                          <label class="checkbox" style="padding-bottom: 1px;">
                                             <span class="chk_tick" ng-class="{'chked' : contact.IsShippingAddress}" style="margin-top:0px">
                                                <i class="fa fa-check-square chksqure"></i>
                                             </span>
                                          </label>
                                       </td>
                                       <td id="CM_Contacts_block_grid_container_tbody_tr_td_5_{{$index}}">  {{contact.FormattedPhone}}  </td>
                                       <td id="CM_Contacts_block_grid_container_tbody_tr_td_6_{{$index}}" > {{contact.Extension}}  </td>
                                       <td id="CM_Contacts_block_grid_container_tbody_tr_td_7_{{$index}}" > {{contact.Email}}  </td>
                                       <td id="CM_Contacts_block_grid_container_tbody_tr_td_8_{{$index}}" > {{contact.ShippingFullAddress}}  </td>
                                       <td>
                                          <div class="flex-container items-right">
                                             <a class="button icon edit-icon small" ng-click="ViewCustomer.openEditContactPopup(contact.Id)">
                                                <span class="button-text" aira-hidden="true">Edit</span>
                                             </a>
                                             <a class="button icon delete small" ng-click="ViewCustomer.removeCustomerContactRecord(contact.Id)">
                                                <span class="button-text" aira-hidden="true">Delete</span>
                                             </a>
                                          </div>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- Pagination container -->
                           <div class="row pagination_container" id="Contacts_Pagination" style="margin-left: 10px;margin-right: 0;"
                              ng-if="ViewCustomer.TotalContactRecords != undefined" >
                              <list-pagination id-value = "Contacts_Pagination_"
                                 total-records-length = "ViewCustomer.TotalContactRecords"
                                 page-size = "ViewCustomer.contactsPageSortAttrsJSON.PageSize"
                                 current-page = "ViewCustomer.contactsPageSortAttrsJSON.CurrentPage"
                                 changes-count = "ViewCustomer.contactsPageSortAttrsJSON.ChangesCount"
                                 pagination-control-method = "ViewCustomer.Contacts_paginationControlsAction" />
                           </div>
                        </div>
                     </div>
                  </div>
                  <div id="RelatedSection_SMSAndEmail_BLock" ng-if="ViewCustomer.SMSMessageList.length > 0">
                     <div class="main_section_COU row">
                        <div class="main_section_COU_Header row" >
                           <p class="actionRow T2">
                              <span class="sectionText text-transform-none">{{ 'Text_and_emails' | translate }}
                              </span>
                              <span class="ActionIcons">
                              <i class="fa fa-question-circle" title="Text and Emails"></i>
                              </span>
                           </p>
                        </div>
                        <div class="gid_container_Customer" id="Customer_Owned_Units" >
                           <table class="table" id="CM_Owned_UnitsGrid">
                              <col width="1%"  />
                              <col width="4%"  />
                              <col width="18%"  />
                              <col width="18%"  />
                              <col width="18%" />
                              <col width="18%"  />
                              <col width="22%"  />
                              <col width="1%"  />
                              <tr  class="tableHeader T3 C2">
                                 <th></th>
                                 <th></th>
                                 <th>{{ 'Activity' | translate }}</th>
                                 <th>{{ 'Date_time' | translate }}</th>
                                 <th>{{ 'Sent_by' | translate }}</th>
                                 <th>{{ 'Sent_to' | translate }}</th>
                                 <th>{{ 'Message' | translate }}</th>
                                 <th></th>
                              </tr>
                              <tbody  ng-repeat="Message in ViewCustomer.SMSMessageList" >
                                 <!-- Display rows -->
                                 <tr class="clickable_row" id="row1" ng-class-even="'C2'" >
                                    <td style="background:#fff"></td>
                                    <td >
                                       <a  class="edite_btn bp-message-icon" rel="row1_edit">
                                          <i class="bp-icons bp-font-20 bp-grey-font bp-lh-15 stroke-3 Plr5" ng-if="Message.Activity == 'Text Message' || Message.Activity == 'Text Reply'">textMessage</i>
                                          <i class="bp-icons bp-font-20 bp-grey-font bp-lh-15 stroke-3 Plr5" ng-if="Message.Activity == 'Emailed Invoice'">email</i>
                                       </a>
                                    </td>
                                    <td > <span>{{Message.Activity}}</span> </td>
                                    <td> {{Message.SentTime}}      </td>
                                    <td > {{Message.SentBy}}</td>
                                    <td > {{Message.SentTo}}</td>
                                    <td class= "msgText"> {{Message.Text}}
                                       <span ng-if="{!IsLoadNewCustomerOrder}">
                                       <a ui-sref="CustomerOrder_V2({Id: Message['COHeaderNumber']})" ng-if="Message.Activity == 'Emailed Invoice'">
                                       {{' - ' + Message.InvoiceNumber}}</a>
                                       </span>
                                       <span ng-if="{!!IsLoadNewCustomerOrder}">
                                       <a ui-sref="CustomerOrder({Id: Message['COHeaderNumber']})" ng-if="Message.Activity == 'Emailed Invoice'">
                                       {{' - ' + Message.InvoiceNumber}}</a>
                                       </span>
                                    </td>
                                    <td style="background:#fff"></td>
                                 </tr>
                                 <!-- Actions row in case editable row -->
                              </tbody>
                           </table>
                        </div>
                        <!-- Pagination container -->
                        <div class="row pagination_container" id="Contacts_Pagination" style="margin-left: 10px;margin-right: 0;"
                           ng-if="ViewCustomer.TotalMessageRecords != undefined" >
                           <list-pagination id-value = "Contacts_Pagination_"
                              total-records-length = "ViewCustomer.TotalMessageRecords"
                              page-size = "ViewCustomer.SMSMessagePageSortAttrsJSON.PageSize"
                              current-page = "ViewCustomer.SMSMessagePageSortAttrsJSON.CurrentPage"
                              changes-count = "ViewCustomer.SMSMessagePageSortAttrsJSON.ChangesCount"
                              pagination-control-method = "ViewCustomer.MessageHistory_paginationControlsAction" />
                        </div>
                     </div>
                  </div>
                  <!-- END : Tax Exemption -->
               </div>
            </div>
            <div class="sectionHeader row">
               <div class="col-lg-4 col-lg-5">
                  <div class="fixedHeaderText">
                     <span class="headerlabel">
                        <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                           ng-show="!ViewCustomer.displaySections.StoreCredits"
                           ng-Click="ViewCustomer.displaySections.StoreCredits = true">
                        </i>
                        <i class="fa fa-angle-down" style="width:10px;"
                           ng-show="ViewCustomer.displaySections.StoreCredits"
                           ng-Click="ViewCustomer.displaySections.StoreCredits = false">
                        </i>
                        <span class="divider">|</span>
                        <span class="T2">{{ 'D' | translate }} {{ 'Store_credits' | translate }}</span>
                        <span class="ActionIcons pull-left" ng-if="GroupOnlyPermissions['Adjust store credits'].enabled">
                           <div class="dropdown selectDropdown checkboxDropdown" id="StoreCreditsActionsMenu">
                              <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">{{ 'Label_Actions' | translate }}
                              <span class="caret"></span></button>
                              <ul class="dropdown-menu">
                                 <li>
                                    <a ng-click="ViewCustomer.ShowAdjustStoreCreditsPopup()">{{ 'Adjust_store_credits' | translate }}</a>
                                 </li>
                              </ul>
                           </div>
                        </span>
                     </span>
                  </div>
               </div>
            </div>
            <div id="StoreCreditsSection" >
               <div class="main_section row" ng-show="ViewCustomer.displaySections.StoreCredits">
                  <div id="StoreCreditsSection_Summary_BLock">
                     <p class="actionRow T2 ">
                        <span class="sectionText">{{ 'Summary' | translate }}</span>
                        <span class="ActionIcons">
                        <i class="fa fa-question-circle" data-toggle="tooltip" title="{{ViewCustomer.helpText['StoreCreditsSummary']}}"></i>
                        </span>
                     </p>
                     <div class="row rowGeneral" >
                        <div class="col-md-4 col-lg-4 subsectionGeneral_rightonly">
                           <div class="">
                              <div class="row">
                                 <div class="col-lg-6 col-md-6 part_general_column">
                                    <span class="T7">{{ 'Store_credit_balance' | translate }}
                                    </span>
                                 </div>
                                 <div  class="col-lg-6 col-md-6" >
                                    <span class="T3">{{ViewCustomer.CustomerInfo.CustomerInfo.TotalStoreCredit | currency}} </span>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div id="StoreCreditsSection_Activity_BLock">
                     <div class="telemetry_Main">
                        <p class="actionRow T2 ">
                           <span class="sectionText">{{ 'Activity' | translate }}</span>
                           <span class="ActionIcons">
                           <i class="fa fa-question-circle" data-toggle="tooltip" title="{{ViewCustomer.helpText['StoreCreditsActivity']}}"></i>
                           </span>
                        </p>
                        <div class="row" >
                           <div class="main_section_vp row" id="" style="margin-left: -20px; margin-right: -20px;">
                              <div class="gid_container T6" id=""
                                 ng-show="ViewCustomer.StoreCredits.length == 0" style="padding-left: 36px;">
                                 {{ 'No_store_credit_activity_for_this_customer' | translate }}
                              </div>
                              <div ng-show="ViewCustomer.StoreCredits.length > 0">
                                 <div class="gid_container_Customer" id="View_Customer_StoreCredit_Activity_Details" >
                                    <table class="table" id="VC_SC_ActivityDetailsGrid">
                                       <col width="1%"  />
                                       <col width="4%"  />
                                       <col width="22%" />
                                       <col width="22%"  />
                                       <col width="22%" />
                                       <col width="28%"  />
                                       <col width="1%"  />
                                       <tr  class="tableHeader T3 C2">
                                          <th></th>
                                          <th></th>
                                          <th class="text-center">{{ 'Label_Date' | translate }}</th>
                                          <th class="">{{ 'Label_Id' | translate }}#</th>
                                          <th class="">{{ 'Label_Amount' | translate }}</th>
                                          <th class="">{{ 'Label_Reference' | translate }}</th>
                                          <th></th>
                                       </tr>
                                       <tbody ng-repeat="storeCreditItem in ViewCustomer.StoreCredits" class="parentBody" ng-init="">
                                          <!-- Display rows -->
                                          <tr class="clickable_row" ng-class-even="'C2'">
                                             <td style="background:#fff"></td>
                                             <td id="VC_Store_Credits_block_grid_container_tbody_tr_td_2_{{$index}}">
                                                <a href="" class="edite_btn" rel="row1_edit">
                                                <i class="fa fa-list  Plr5 FC7 F18 first_icon"></i>
                                                </a>
                                             </td>
                                             <td id="VC_Store_Credits_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7 text-center">{{storeCreditItem.createdDate}}</td>
                                             <td id="VC_Store_Credits_block_grid_container_tbody_tr_td_2_{{$index}}" class ="T7" ng-if="(storeCreditItem.StoreCreditId != null && storeCreditItem.StoreCreditId != '')">
                                                <span ng-if="{!IsLoadNewCustomerOrder}">
                                                <a ui-sref="CustomerOrder_V2({Id: storeCreditItem.StoreCreditId})">{{storeCreditItem.StoreCreditName}}</a>
                                                </span>
                                                <span ng-if="{!!IsLoadNewCustomerOrder}">
                                                <a ui-sref="CustomerOrder({Id: storeCreditItem.StoreCreditId})">{{storeCreditItem.StoreCreditName}}</a>
                                                </span>
                                             </td>
                                             <td id="VC_Store_Credits_block_grid_container_tbody_tr_td_2_{{$index}}" class ="T7" ng-if="(storeCreditItem.StoreCreditId == null || storeCreditItem.StoreCreditId == '')">{{storeCreditItem.StoreCreditName}}</td>
                                             <td id="VC_Store_Credits_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7">{{storeCreditItem.Amount | currency}}</td>
                                             <td id="VC_Store_Credits_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7">{{storeCreditItem.Reference}}</td>
                                             <td style="background:#fff"></td>
                                          </tr>
                                       </tbody>
                                    </table>
                                 </div>
                                 <!-- Pagination container -->
                                 <div class="row pagination_container" id="Store_Credits_Pagination" style="margin-left: 10px; margin-right: 0;"
                                    ng-if="ViewCustomer.TotalStoreCreditRecords != undefined" >
                                    <list-pagination id-value = "Store_Credits_Pagination_"
                                       total-records-length = "ViewCustomer.TotalStoreCreditRecords"
                                       page-size = "ViewCustomer.StoreCreditPageSortAttrsJSON.PageSize"
                                       current-page = "ViewCustomer.StoreCreditPageSortAttrsJSON.CurrentPage"
                                       changes-count = "ViewCustomer.StoreCreditPageSortAttrsJSON.ChangesCount"
                                       pagination-control-method = "ViewCustomer.StoreCredits_paginationControlsAction" />
                                 </div>
                              </div>
                           </div>
                        </div>
                     
                     
                     </div>
                  </div>
               </div>
            </div>
            
            
            <div class="sectionHeader row" ng-if = "(ViewCustomer.IsQBEnabled || ViewCustomer.isXeroEnabled) && GroupOnlyPermissions['Payment on account'].enabled" >
               <div class="col-lg-4 col-lg-5">
                  <div class="fixedHeaderText">
                     <span class="headerlabel">
                        <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                           ng-show="!ViewCustomer.displaySections.ARActivity"
                           ng-Click="ViewCustomer.displaySections.ARActivity = true">
                        </i>
                        <i class="fa fa-angle-down" style="width:10px;"
                           ng-show="ViewCustomer.displaySections.ARActivity"
                           ng-Click="ViewCustomer.displaySections.ARActivity = false">
                        </i>
                        <span class="divider">|</span>
                        <span class="T2">{{ 'E' | translate }} {{ 'AR_Activity' | translate }}</span>
                     </span>
                  </div>
               </div>
            </div>
             <div id="ARActivitySection" ng-if = "(ViewCustomer.IsQBEnabled || ViewCustomer.isXeroEnabled) && GroupOnlyPermissions['Payment on account'].enabled" >
             	 <div class="main_section row" ng-show="ViewCustomer.displaySections.ARActivity">
             	 	<div>
             	 		<button class = "button hollow" ng-click = "ViewCustomer.getARActivityList()" ng-if = "!ViewCustomer.showARAGrid">View A/R activity</button>
             	 		<div class="row" ng-if = "ViewCustomer.showARAGrid">
                        <!-- Start: Unpiad invoices and unapplied credits listing -->
                        <div class="main_section_vp row ar-activity-container">
                           <div class="unpaid-amount-container">
                              <p class = "bp-blue-font">
                                 Unpaid invoices and unapplied credits
                              </p>
                              <span ng-if = "ViewCustomer.ARActivityList.length > 0">Select items to pay</span>
                              <span ng-if = "ViewCustomer.ARActivityList.length == 0">No item to display </span>
                           </div>
                           <div ng-show="ViewCustomer.ARActivityList.length > 0">
                              <div class="gid_container_Customer" id="View_Customer_AR_Activity_Details" >
                                 <table class="table ar-activity-table" id="VC_AR_ActivityDetailsGrid">
                                    <col width="1%"  />
                                    <col width="4%"  />
                                    <col width="19%" />
                                    <col width="15%"  />
                                    <col width="15%" />
                                    <col width="15%" />
                                    <col width="20%"  />
                                    <col width="10%"  />
                                    <col width="1%"  />
                                    <tr  class="tableHeader T3 C2">
                                       <th></th>
                                       <th></th>
                                       <th>{{ 'Invoice_number' | translate }}</th>
                                       <th>{{ 'Invoice_date' | translate }}</th>
                                       <th>{{ 'Due_date' | translate }}</th>
                                       <th class="text-right">{{ 'Original_amount' | translate }}</th>
                                       <th class="text-right">{{ 'Balance_due' | translate }}</th>
                                       <th class="text-right">{{ 'Amount_paid' | translate }}</th>
                                       <th></th>
                                    </tr>
                                    <tbody ng-repeat="ARActivityRec in ViewCustomer.ARActivityList" class="parentBody ar-activity-list" ng-init="">
                                       <!-- Display rows -->
                                       <tr class="clickable_row" ng-class-even="'C2'">
                                          <td style="background:#fff"></td>
                                          <td id="VC_AR_Activity_block_grid_container_tbody_tr_td_2_{{$index}}">
                                             <span class="blue-chk_tick check-box-span" id="isARActive" ng-class="{'blue-back-check-tick':ARActivityRec.isCheckBoxSelected}" ng-click = "ViewCustomer.selectDeSelectARActivityRec($index)">
                                                <i class="bp-icons bp-font-8 bp-white-font stroke-1" ng-if="ARActivityRec.isCheckBoxSelected">check</i>
                                             </span>
                                          </td>
                                          <td id="VC_AR_Activity_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7">
                                             <a class="bp-blue-font bp-cursor-pointer" href="{{ARActivityRec.AccountingUrl}}" target = "_blank">{{ARActivityRec.InvoiceNumber}}</a>
                                          </td>
                                          <td id="VC_AR_Activity_block_grid_container_tbody_tr_td_2_{{$index}}" class ="T7">
                                             {{ARActivityRec.InvoiceDate}}
                                          </td>
                                          <td id="VC_AR_Activity_block_grid_container_tbody_tr_td_2_{{$index}}" class ="T7" >{{ARActivityRec.DueDate}}</td>
                                          <td id="VC_AR_Activity_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7 text-right">{{ARActivityRec.OriginalAmount | currency}}</td>
                                          <td id="VC_AR_Activity_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7 text-right">{{ARActivityRec.BalanceDue | currency}}</td>
                                          <td id="VC_AR_Activity_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7 text-right">
                                          <span ng-if="!ARActivityRec.isCheckBoxSelected ">----</span>
                                          <span  ng-if="ARActivityRec.isCheckBoxSelected && ARActivityRec.BalanceDue > 0" class="editable-amount-paid">
                                                <span class="doller-sign">$</span>
                                                <numbers-only 
                                                      class-value="bp-input-text"
                                                      placeHolderValue="{{ 'Please_select' | translate }}"
                                                      precision-length="2"
                                                      input-model-value="ARActivityRec.AmountPaid"
                                                      blur-value="ViewCustomer.calculateTotal($index)" 
                                                      max-value = "{{ARActivityRec.BalanceDue}}"
                                                      include-negative = "false" />
                                          </span>
                                             <span  ng-if="ARActivityRec.isCheckBoxSelected && ARActivityRec.BalanceDue < 0" class="editable-amount-paid">
                                                {{ARActivityRec.BalanceDue | currency}}
                                          </span>
                                          </td>
                                          <td style="background:#fff"></td>
                                       </tr>
                                    </tbody>
                                    <tbody class="ar-activity-list" ng-if = "ViewCustomer.showTotalContainer">
                                       <tr class="clickable_row">
                                          <td style="background:#fff" colspan="6"></td>
                                          <td  class=" border-bottom-grey4 text-right total-td"><strong class="total-label">Total</strong></td>
                                          <td class=" border-bottom-grey4 text-right amount-td"><strong class="col-xs-12 P0">{{ViewCustomer.ARActivityListTotal | currency}}</strong></td>
                                          <td style="background:#fff"></td>
                                       </tr>
                                       <tr class="clickable_row">
                                          <td style="background:#fff" colspan="6"></td>
                                          <td colspan="2" class=" border-bottom-grey4 text-right">
                                             <button class = "button secondary"  ng-if = "ViewCustomer.ARActivityListTotal > 0" ng-click = "ViewCustomer.openReceivePaymentModelWindow()">
                                                Receive payment 
                                             </button>
                                          </td>
                                          <td style="background:#fff"></td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                           </div>
                        </div>
                        <!-- End: Unpiad invoices and unapplied credits listing -->

                        <!-- Start: POA history listing -->
                        <div class="main_section_vp row ar-activity-container">
                           <div class="unpaid-amount-container">
                              <p class = "bp-blue-font">
                                 Payment on account history
                              </p>
                              <span ng-if="ViewCustomer.POAHistoryList.length == 0">No item to display</span>
                           </div>
                           <div ng-show="ViewCustomer.POAHistoryList.length > 0">
                              <div class="gid_container_Customer" id="View_Customer_Paid_COA_Details" >
                                 <table class="table ar-activity-table" id="VC_Paid_COADetailsGrid">
                                    <col width="1%"  />
                                    <col width="4%"  />
                                    <col width="19%" />
                                    <col width="13%"  />
                                    <col width="14%" />
                                    <col width="13%"  />
                                    <col width="14%"  />
                                    <col width="13%" />
                                    <col width="8%"  />
                                    <col width="1%"  />
                                    <tr class="tableHeader T3 C2">
                                       <th></th>
                                       <th></th>
                                       <th>Payment Number</th>
                                       <th>Payment Date</th>
                                       <th>Payment Method</th>
                                       <th>Reference Number</th>
                                       <th>Transactions Paid</th>
                                       <th class ="text-right">Amount Paid</th>
                                       <th></th>
                                       <th></th>
                                    </tr>
                                    <tbody ng-repeat="poaHistoryRec in ViewCustomer.POAHistoryList" class="parentBody ar-activity-list" ng-init="">
                                       <!-- Display rows -->
                                       <tr class="clickable_row" ng-class-even="'C2'">
                                          <td class="bp-main-bg-white"></td>
                                          <td></td>
                                          <td id="VC_POA_History_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7">
                                             {{poaHistoryRec.PaymentNumber}}
                                          </td>
                                          <td id="VC_POA_History_block_grid_container_tbody_tr_td_2_{{$index}}" class ="T7">
                                             {{poaHistoryRec.PaymentDate}}
                                          </td>
                                          <td id="VC_POA_History_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7">
                                             {{poaHistoryRec.PaymentMethod}}
                                          </td>
                                          <td id="VC_POA_History_block_grid_container_tbody_tr_td_2_{{$index}}" class ="T7">
                                             {{poaHistoryRec.ReferenceNumber}}
                                          </td>
                                          <td id="VC_POA_History_block_grid_container_tbody_tr_td_2_{{$index}}" class ="T7" >
                                             {{poaHistoryRec.TransactionsPaid}}
                                          </td>
                                          <td id="VC_POA_History_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7 text-right">
                                             {{poaHistoryRec.ARActivityListTotal | currency}}
                                          </td>
                                          <td id="VC_POA_History_block_grid_container_tbody_tr_td_2_{{$index}}" class="text-right">
                                             <div class="c-icon-container">
                                                <span data-toggle="tooltip" title="Print">
                                                   <i class="bp-icons bp-blue-font bp-font-18 bp-cursor-pointer stroke-5" ng-click = "ViewCustomer.prnitPOAHistory(poaHistoryRec.Id)" >print</i> 
                                                </span>
                                                <span data-toggle="tooltip" title="Email">
                                                   <i class="bp-icons bp-blue-font bp-font-18 bp-cursor-pointer stroke-5" ng-click="ViewCustomer.openEmailPopUp(poaHistoryRec.Id, null, 'PrintPaymentOnAccount')">email</i>
                                                </span>
                                             </div>
                                          </td>
                                          <td class="bp-main-bg-white"></td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                              <!-- Pagination container -->
                              <div class="row pagination_container" id="POA_History_Pagination" style="margin-left: 10px; margin-right: 0;"
                                 ng-if="ViewCustomer.TotalPOAHistoryRecords != undefined && ViewCustomer.TotalPOAHistoryRecords != 0">
                                 <list-pagination id-value = "POA_History_Pagination_"
                                    total-records-length="ViewCustomer.TotalPOAHistoryRecords"
                                    page-size = "ViewCustomer.POAHistoryPageSortAttrsJSON.PageSize"
                                    current-page = "ViewCustomer.POAHistoryPageSortAttrsJSON.CurrentPage"
                                    changes-count = "ViewCustomer.POAHistoryPageSortAttrsJSON.ChangesCount"
                                    pagination-control-method = "ViewCustomer.getPOAHistoryList" />
                              </div>
                           </div>
                        </div>
                        <!-- End: POA history listing -->

                        <!-- Start: COA invoices already paid listing -->
                        <div class="main_section_vp row ar-activity-container">
                           <div class="unpaid-amount-container">
                              <p class = "bp-blue-font">
                                 Charge on account invoices already paid
                              </p>
                              <span ng-if="ViewCustomer.PaidCOAInvoiceList.length == 0">No item to display </span>
                           </div>
                           <div ng-show="ViewCustomer.PaidCOAInvoiceList.length > 0">
                              <div class="gid_container_Customer" id="View_Customer_Paid_COA_Details" >
                                 <table class="table ar-activity-table" id="VC_Paid_COADetailsGrid">
                                    <col width="1%"  />
                                    <col width="4%"  />
                                    <col width="27%" />
                                    <col width="15%"  />
                                    <col width="22%" />
                                    <col width="20%"  />
                                    <col width="10%"  />
                                    <col width="1%"  />
                                    <tr  class="tableHeader T3 C2">
                                       <th></th>
                                       <th></th>
                                       <th>{{ 'Invoice_number' | translate }}</th>
                                       <th>{{ 'Invoice_date' | translate }}</th>
                                       <th class="text-right">{{ 'Original_amount' | translate }}</th>
                                       <th class="text-right">{{ 'Balance_due' | translate }}</th>
                                       <th class="text-right"></th>
                                       <th></th>
                                    </tr>
                                    <tbody ng-repeat="PaidCOAInvoiceRec in ViewCustomer.PaidCOAInvoiceList" class="parentBody ar-activity-list" ng-init="">
                                       <!-- Display rows -->
                                       <tr class="clickable_row" ng-class-even="'C2'">
                                          <td class="bp-main-bg-white"></td>
                                          <td></td>
                                          <td id="VC_Paid_COA_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7">
                                             <a class="bp-blue-font bp-cursor-pointer" href="{{PaidCOAInvoiceRec.AccountingUrl}}" target = "_blank">{{PaidCOAInvoiceRec.InvoiceNumber}}</a>
                                          </td>
                                          <td id="VC_Paid_COA_block_grid_container_tbody_tr_td_2_{{$index}}" class ="T7">
                                             {{PaidCOAInvoiceRec.InvoiceDate}}
                                          </td>
                                          <td id="VC_Paid_COA_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7 text-right">{{PaidCOAInvoiceRec.OriginalAmount | currency}}</td>
                                          <td id="VC_Paid_COA_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7 text-right">{{PaidCOAInvoiceRec.BalanceDue | currency}}</td>
                                          <td id="VC_Paid_COA_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7 text-right"></td>
                                          <td class="bp-main-bg-white"></td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                              <!-- Pagination container -->
                              <div class="row pagination_container" id="COU_Items_Pagination" style="margin-left: 10px; margin-right: 0;"
                                 ng-if="ViewCustomer.TotalPaidCOAInvoiceRecords != undefined && ViewCustomer.TotalPaidCOAInvoiceRecords != 0">
                                 <list-pagination id-value = "PaidCOA_Items_Pagination_"
                                    total-records-length="ViewCustomer.TotalPaidCOAInvoiceRecords"
                                    page-size = "ViewCustomer.PaidCOAInvoicePageSortAttrsJSON.PageSize"
                                    current-page = "ViewCustomer.PaidCOAInvoicePageSortAttrsJSON.CurrentPage"
                                    changes-count = "ViewCustomer.PaidCOAInvoicePageSortAttrsJSON.ChangesCount"
                                    pagination-control-method = "ViewCustomer.getPaidCOAInvoiceList" />
                              </div>
                           </div>
                           <!-- End: COA invoices already paid listing -->
                        </div>
                     </div>
                     
             	 	</div>
             	 </div>
             </div>
            
            
            <div style="height:600px; background: #E6EBEC; margin: 0 -15px;" />
            </div>
         </div>
      </div>
      <div class="modal fade newPopupModal" id="StoreCreditAdjust" tabindex="-1" role="dialog" aria-labelledby="appointmentModalLabel">
         <div class="modal-dialog" role="document">
            <div class="modal-content newPopupModalContent">
               <div class="modal-header">
                  <button type="button" class="close appointmentModalCloseIcon" data-dismiss="modal" aria-label="Close"
                     ng-click = ""
                     ng-attr-tabindex="{{ViewCustomer.tabIndexValue + 4}}">
                  <span aria-hidden="true"><i class="bp-icons bp-font-10 stroke-3 bp-dark-grey2-font closeiconWidth">close</i></span>
                  </button>
                  <h4 class="modal-title" id="appointmentModalLabel">
                     <span class="selected SelectedAppointmentType appointmentModalEventType">
                     {{ 'Store_credit_adjustment' | translate }}
                     </span>
                  </h4>
               </div>
               <div class="modal-body">
                  <form>
                     <div class="form-group">
                        <p for="AmountInput" class="req-label">{{ 'Label_Amount' | translate }}</p>
                        <price-only-input id-value="AmountInput"
                           class-value = "appointmentTitle form-control"
                           place-holder-value = "Amount"
                           max-length = "15"
                           rel-value=""
                           precision-length = "2"
                           tab-index ="{{ViewCustomer.tabIndexValue + 1}}"
                           input-value = "ViewCustomer.StoreCreditJson.Amount"
                           validation-modal = "ViewCustomer.StoreCreditFormValidationModal"
                           validation-modal-key = "Amount"
                           input-model = "ViewCustomer"
                           allow-negative = "true"
                           packaged="true" />
                     </div>
                     <div class="form-group">
                        <p for="NoteInput" class="req-label">{{ 'Note' | translate }}</p>
                        <input type="text" id="NoteInput" class="appointmentTitle form-control" placeholder="Note" maxlength="50"
                           ng-model = "ViewCustomer.StoreCreditJson.Reference" ng-attr-tabindex="{{ViewCustomer.tabIndexValue + 2}}"
                           ng-class="{'redborder' : ViewCustomer.StoreCreditFormValidationModal['Reference']['isError'] == true}"
                           title="{{ViewCustomer.StoreCreditFormValidationModal['Reference']['ErrorMessage']}}"
                           ng-blur="ViewCustomer.validateStoreCreditFieldWithKey('Reference')">
                        </input>
                     </div>
                  </form>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-primary"
                     ng-click = "ViewCustomer.AddStoreCredit()"
                     ng-disabled="ViewCustomer.disableStoreCreditSaveButton"
                     ng-attr-tabindex="{{ViewCustomer.tabIndexValue + 3}}">
                  {{ 'Save_Label' | translate }}
                  </button>
               </div>
            </div>
         </div>
      </div>
      <div class="modal fade bp-model-dialog CreateGroupModal print-modal-popup" id="print-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
               <div class="modal-header">
                  <button type="button" class="close bp-close-but CreateGroupModalCloseIcon" data-dismiss="modal" aria-label="Close" ng-click = "ViewCustomer.hidePrintpopUpModalWindow()" >
                     <span aria-hidden="true">
                        <i class="bp-icons bp-font-12 bp-white-font bp-fw-100 closeiconWidth">close</i>
                     </span>
                  </button>
               </div>
               <div class="modal-body">
                  <div class="userGroupInfoArea">
                     <div class="heading">{{ 'Print_Document_Message' | translate }}</div>
                     <div class="tab-content-print" ng-if = "ViewCustomer.showInvoicePreviewPopup">
                        <div class = "MerchandiseSectionPrint">
                           <div class="print-document-selection" ng-click="ViewCustomer.togglePrintReceiptItemCheckbox($index)" ng-repeat = "receiptPinItem in ViewCustomer.printReceiptInvoiceList">  
                              <span class="chk_tick">
                                 <i class="bp-icons bp-font-12 bp-blue-font bp-text-transform stroke-3 tickiconWidth" ng-if="receiptPinItem.isSelected" >check</i>
                              </span>
                              <label class="align-with-checkbox">{{receiptPinItem.Name}}</label>
                           </div>
                        </div>
                     </div>
                     <div ng-if ="ViewCustomer.isBrandingLocationEnable" class="cash-drawer branding-location-print-container" >
                        <i class="bp-icons bp-font-20 stroke-3 MT-5">branding</i>
                        <span class="bp-dark-grey2-font cash-drawer-info">Branding: <strong>{{ViewCustomer.selectedBusinessLocationName}}</strong></span>
                        <a class="bp-blue-font bp-bold-font" ng-click = "ViewCustomer.showBrandingLocation = true">change</a>
                           <div class="change-cash-drawer-modal-window" ng-if = "ViewCustomer.showBrandingLocation">
                              <div class="chnage-cash-drawer-container">
                                 <label>Change Branding for this work station</label>
                                 <div class="col-xs-12 P0">
                                    <div class = "bp-autocomplete-Wrapper autocomplete_v2">
                                       <span class = "bp-autocomplete-image-icon">
                                          <i class="bp-icons bp-blue-font bp-font-14 bp-cursor-pointer MT-3 stroke-5" ng-click = "ViewCustomer.setFocusOnInput('BrandingLocationId')">arrowDown</i>
                                       </span>
                                       <input  type="text" id="BrandingLocationId" class="bp-autocomplete-input bp-cursor-pointer 
                                          bp-input-text " placeholder="{{'Please_select' | translate }}"
                                          autocomplete="off" ng-focus = "ViewCustomer.showBrandingLocationList = true"
                                          ng-blur="ViewCustomer.showBrandingLocationList = false"
                                          ng-model="ViewCustomer.BusinessLocationName"
                                          readonly="readonly"
                                          ng-keyup="ViewCustomer.keyPressNavigationOnDropdownElements($event, 'brandingLocationDropdownDiv', 'BL', ViewCustomer.allBrandingLocationList)" />                       
                                       <div class = "bp-autocomplete-dropdown-wrapper"  ng-if = "ViewCustomer.showBrandingLocationList" id="brandingLocationDropdownDiv">
                                          <ul>
                                             <li ng-mousedown="ViewCustomer.selectBrandingLocation(BLRec)"
                                                ng-class="{'selected-row': $index == ViewCustomer.currentDropDownIndex}"
                                                ng-repeat="BLRec in ViewCustomer.allBrandingLocationList track by $index" id="BL_{{$index}}">
                                                <div class="form-group-info col-xs-12 P0">
                                                   <span >{{BLRec.BusinessLocationName}}</span>
                                                </div>
                                             </li> 
                                          </ul>
                                          <ul ng-if = "ViewCustomer.allBrandingLocationList.length == 0">
                                             <li id="cashDrawerNoResults"  class="BP_angucomplete-row-NoResults-Msg">
                                                <div class="">{{'No_Results_Found' | translate}}</div>
                                             </li>
                                          </ul>
                                       </div>
                                    </div>         
                                 </div>
                                 <button class="bp-btn bp-btn-normal" ng-click="ViewCustomer.saveBrandingLocationInfo()">CONFIRM</button>
                                 <a class="cancel-change-cash-drawer" ng-click = "ViewCustomer.hideChangeBLModalWindow()">Cancel</a>
                              </div>
                           </div>
                        </div>     
                        <div class="button-group-print">
                           <div class="button-div">
                              <button class="btn bp-btn-normal" ng-disabled = "!(ViewCustomer.isAnyCheckBoxSelected())  || (ViewCustomer.isBrandingLocationEnable && !ViewCustomer.selectedBusinessLocationName)" ng-Click="ViewCustomer.getSelectedDocument()">
                                 <span class = "align-button-label">
                                    <i class="bp-icons bp-font-18 bp-fw-100 MR10">print</i>
                                    <span>{{ 'Print_Selected' | translate }}</span>
                                 </span>
                              </button>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
      </div>
      <div class="modal fade CreateGroupModal CreateFeeModal setCashDrawerModalWindow bp-cp-modal-dialog" id="setBrandingLocationModalWindow" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
         <div class="modal-dialog" role="document">
             <div class="modal-content">
                 <div class="modal-header">
                     <button type="button" class="close CreateGroupModalCloseIcon" data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">
                     <i class="bp-icons bp-font-12 bp-white-font bp-fw-100 closeiconWidth">close</i>
                     </span>
                     </button>
                 </div>
                 <div class="modal-body">
                 <div class="userGroupInfoArea">
                       <div class="heading">your branding has not been set</div>
                         <p class="label-text">Please assign a Branding for your work station.</p>
                         <div class ="form">
                             <div class="col-xs-12 P0">
                             <div class = "bp-autocomplete-Wrapper autocomplete_v2">
                                 <span class = "bp-autocomplete-image-icon">
                                     <i class="bp-icons bp-blue-font bp-font-14 bp-cursor-pointer MT-3 stroke-5" ng-click = "ViewCustomer.setFocusOnInput('BrandingLocationId')">arrowDown</i>
                                  </span>
                                   <input  type="text" id="BrandingLocationId" class="bp-autocomplete-input bp-cursor-pointer 
                                      bp-input-text " placeholder="{{'Please_select' | translate }}"
                                      autocomplete="off" ng-focus = "ViewCustomer.showBrandingLocationList = true"
                                      ng-blur="ViewCustomer.showBrandingLocationList = false"
                                       ng-model="ViewCustomer.BusinessLocationName"
                                       readonly="readonly"
                                       ng-keyup="ViewCustomer.keyPressNavigationOnDropdownElements($event, 'brandingLocationDropdownDiv', 'BL', ViewCustomer.allBrandingLocationList)" />                       
                                   <div class = "bp-autocomplete-dropdown-wrapper" ng-if = "ViewCustomer.showBrandingLocationList" id="brandingLocationDropdownDiv">
                                       <ul>
                                           <li ng-mousedown="ViewCustomer.selectBrandingLocation(BLRec)"
                                           ng-class="{'selected-row': $index == ViewCustomer.currentDropDownIndex}"
                                              ng-repeat="BLRec in ViewCustomer.allBrandingLocationList track by $index" id="BL_{{$index}}">
                                               <div class="form-group-info col-xs-12 P0 text-left">
                                                   <span >{{BLRec.BusinessLocationName}}</span>
                                               </div>
                                           </li> 
                                       </ul>
                                        <ul ng-if = "ViewCustomer.allBrandingLocationList.length == 0">
                                           <li id="cashDrawerNoResults"  class="BP_angucomplete-row-NoResults-Msg">
                                               <div class="">{{'No_Results_Found' | translate}}</div>
                                           </li>
                                       </ul>
                                   </div>
                               </div>         
                           </div>
                             <div class="confirm-cash-drawer-container">
                                 <a class="cancel" data-dismiss="modal" aria-label="Close" ng-click = "ViewCustomer.closeSetBrandingLocationModalWindow()">Cancel</a>
                                 <button class="bp-btn bp-btn-normal" ng-disabled="!ViewCustomer.selectedBusinessLocationNameId"
                                    ng-click="ViewCustomer.saveBrandingLocationInfo(); ViewCustomer.printSelectedDocument(ViewCustomer.PrintCOInvoiceHeaderId, 'Invoice'); ViewCustomer.closeSetBrandingLocationModalWindow();">Confirm</button>
                             </div>
                         </div>
                 </div>
             </div>
          </div>
       </div>
    </div>
      <div class="fadein" ui-view="TaxExemption" autoscroll='false'></div>
      <div class="fadein" ui-view="COU" autoscroll='false'></div>
      <div class="fadein" ui-view="AddEditCustomerContact" autoscroll='false'></div>
        <c:PaymentModelWindow />
        <div class="LoadingDiv" ng-show="ViewCustomer.isLoading">
            <div class="loadingIconContainer">
                <c:BPLoading />
            </div>
        </div>
        <bp-ng-modal-window class="cancelPaymentTranscationModalWindow" id-val="cancelPaymentTranscationModalWindow" mobal-window-payload="ViewCustomer.ModalWindowPayload" cancel-btn-action="ViewCustomer.hideModalWindow('cancelPaymentTranscationModalWindow',ViewCustomer.ModalWindowPayload.primaryBtn.isLoading);" primary-btn-action="ViewCustomer.cancelTransction('cancelPaymentTranscationModalWindow');">
         <cite class="delete-info">
            {{(ViewCustomer.ModalWindowPayload.primaryBtn)?'Communicating with terminal...':'Processing payment...'}}
              <i class="loading-spinner">
                 <svg class="bp-spinner" height="85px" viewBox="0 0 66 66" width="85px" xmlns="https://www.w3.org/2000/svg">
                     <circle class="path" cx="33" cy="33" fill="none" r="30" stroke-linecap="round" stroke-width="6"></circle>
                  </svg>
             </i>
         </cite>
     </bp-ng-modal-window>
     <bp-ng-modal-window id-val="viewCustomerTimeOutModalWindow" class="timeOutModalWindow {{ViewCustomer.ModalWindowPayload.isPreferredPaymentTimeout ? 'preferre-payment-timeout' : ''}}" mobal-window-payload="ViewCustomer.ModalWindowPayload" cancel-btn-action="ViewCustomer.hideModalWindow('viewCustomerTimeOutModalWindow')" primary-btn-action="ViewCustomer.ModalWindowPayload.isPreferredPaymentTimeout ? ViewCustomer.refreshPage() : ViewCustomer.hideModalWindow('viewCustomerTimeOutModalWindow')">
      <div class="delete-info" ng-if="ViewCustomer.ModalWindowPayload.isPreferredPaymentTimeout">
          <p class="bp-font-16 MB20">Oops, it took too long for the terminal to respond. Blackpurl will ignore this payment.</p> 
          <p class="H400 bp-text-uppercase">You must CANCEL the transaction on the terminal.</p>
      </div>
   </bp-ng-modal-window>
   </div>
</apex:page>