<apex:component controller="GlobalController">
 <!-- Start: Service Job -->
                    <div class="bp-accordion-entry expanded service-job-section" ng-repeat="soHeader in M_CO.SOHeaderList" 
                        ng-class = "{'bp-collapse' : M_CO.expandedSectionName != 'ServiceJob{{$index}}','disable-accordion' : !F_CO.getSOPermissionType()['view']}" ng-init="SoHeaderIndex = $index">
                        <div class="bp-accordion-header bp-cyan d-flex new-header-container" >
                        		<div class="icon-container" ng-click = "F_CO.expandOrCollapseSection('ServiceJob'+$index+'_SectionId', 'ServiceJob'+$index, $index, F_CO.getSOPermissionType()['view'],$event)">
                                    <i class="bp-icons stroke-5 bp-lh-20">service</i>
	                        	</div>
                        	  <div class = "main-section-header" ng-click = "F_CO.expandOrCollapseSection('ServiceJob'+$index+'_SectionId', 'ServiceJob'+$index, $index, F_CO.getSOPermissionType()['view'],$event)">
                        	<section-header
                        	section-name = "soHeader.SOInfo.Name"
                        	first-status = "soHeader.SOInfo.WorkStatus"
                            first-status-css-config = "F_CO.getJobStatusCssConfig(soHeader.SOInfo.SOStatusRefId)"
                        	transaction-type = "soHeader.SOInfo.TransactionType"
                        	transaction-type-label = "soHeader.SOInfo.TransactionTypeLabel"
                        	total = "soHeader.SOInfo.Total | currency"
                        	second-status = "soHeader.SOInfo.ClaimStatus"
                        	concern = "soHeader.SOInfo.ManualConcern"
                        	first-status-action = "M_CO.selectedSOHeaderIndex = $index; M_CO.SOHeaderList[M_CO.selectedSOHeaderIndex].SOInfo.newWorkStatus=soHeader.SOInfo.WorkStatus;F_CO.openJobStausPopUp(M_CO.selectedSOHeaderIndex,$event);"
                        	second-status-action = "F_CO.openClaimPopup(SoHeaderIndex, $event)" 
                        	first-image = "calendarClock"
                        	second-image = "{{M_CO.UnitIconFillName}}"
                        	edit-image = "edit"
                            is-cal-icon-show = "(!M_CO.soAppointments[soHeader.SOInfo.Id].IsMultiday && M_CO.isTechSchedulingEnable && M_CO.soAppointments[soHeader.SOInfo.Id]) || (M_CO.soAppointments[soHeader.SOInfo.Id].IsMultiday && M_CO.isTechSchedulingEnable && M_CO.soAppointments[soHeader.SOInfo.Id] && M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianId)"
                        	is-top-left-container-show = "true"
                        	is-badge-container-show = 'true'
                        	is-bottom-container-show = "soHeader.SOInfo.ManualConcern.length > 0 ? true : false"
                        	is-total-container-show = 'true'
                        	total-label = "Total:"
                        	edit-action = "F_CO.openEditServiceJobName(SoHeaderIndex,soHeader.SOInfo.Name, $event)"
                        	is-unit-arrived = "soHeader.SOInfo.IsUnitArrived"
                        	unit-action = "F_CO.openUnitArrivedModalWindow(SoHeaderIndex, $event)"
                        	first-image-toop-tip = "F_CO.createTooltipforServiceJob(soHeader.SOInfo.Id,'cal')"
                        	second-image-toop-tip = "F_CO.createTooltipforServiceJob(soHeader.SOInfo.Id,'unit',SoHeaderIndex)"
                        	custom-class = "!F_CO.getSOPermissionType()['create/modify'] ? 'bp-cursor-default' : ''"
                        	total-fetching-state = "soHeader.isAsyncActionInProgressForServiceJob"
                            show-so-status="true"
                            so-status="soHeader.SpecialOrderStatus"
                     
                     
                        	>
                        	<!-- first-image-tool-tip = "F_CO.createTooltipforServiceJob(soHeader.SOInfo.Id)" -->
                        	</section-header>
                        	</div>
                        	<div class = "right-container bp-accordion-toggle bp-cyan-dark" ng-if = "M_CO.expandedSectionName != 'ServiceJob'+$index" ng-click = "F_CO.expandOrCollapseSection('ServiceJob'+$index+'_SectionId', 'ServiceJob'+$index, $index, F_CO.getSOPermissionType()['view'])">
                        		<i class="bp-icons bp-font-16 stroke-1 size-unset">arrowDown</i>
                        	</div>
                        	 <div class=" right-container bp-accordion-toggle bp-cyan-dark" ng-if = "M_CO.expandedSectionName == 'ServiceJob'+$index" 
                                ng-click = "F_CO.expandOrCollapseSection('ServiceJob'+$index+'_SectionId', 'ServiceJob'+$index, $index, F_CO.getSOPermissionType()['view'])">
                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowUp</i>
                            </div>
                        </div>
                        <div class="bp-accordion-detail bp-collapse-div-transition" id="ServiceJob{{$index}}_SectionId" ng-class="{'bp-expand-div-transition': M_CO.expandedSectionName == 'ServiceJob{{$index}}'}">
                            <div>
                                <!-- Summary section starts from here -->
                                <div class="bp-inner-accordian open"  ng-class="{'bp-inner-accordian-opened': M_CO.expandedInnerSectionName == 'ServiceJob{{$index}}_Summary'}">
                                    <div class="inner-accordian-header col-md-12" ng-click = "F_CO.expandOrCollapseInnerSection('ServiceJob'+$index+'_SummarySectionId', 'ServiceJob'+$index+'_Summary',SoHeaderIndex,'',$event)">
                                        <div class="inner-accordian-header-left " ng-class = "{'new-left': M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_Summary'}">  
                                            <h2 class="accordian-left-details">{{ 'Summary' | translate }}</h2>
                                        </div>
                                        <div class="accordian-right-details add-edit-appointment-container-co new-right-details-container">
                                            <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_Summary'">
                                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowDown</i>
                                            </a>
                                            <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_Summary'">
                                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowUp</i>
                                            </a>    
                                        </div>
                                    </div>                                    
                                    <div class="inner-accordian-body bp-light-gray4 col-md-12 bp-collapse-div-transition" id="ServiceJob{{$index}}_SummarySectionId"
                                        ng-class="{'bp-expand-div-transition': M_CO.expandedInnerSectionName == 'ServiceJob{{$index}}_Summary'}">
                                        <div>
                                            <div class="expandableContainer">
                                                <!-- left alignment starts here -->
                                                <div class = "col-xs-12 col-sm-6 form-container">
                                                    <div class = "col-xs-12">
                                                        <label class = "col-xs-12">Salesperson</label>
                                                        <div class="table-responsive technician-time-table" ng-if="M_CO.SOSalesPersonList[soHeader.SOInfo.Id].length > 0">
                                                            <table class = "bp-editable-table SOJobItemsGrid SOHoursLogGrid deal-salesperson-list">
                                                                <col width="5%" />
                                                                <col width="50%" />
                                                                <thead>
                                                                    <tr>
                                                                        <th class = "bp-text-uppercase text-center">{{'Label_Name' | translate}}</th>
                                                                        <th></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr class = "bp-expanded-deletable-div-transition" ng-repeat="assignedSalesperson in M_CO.SOSalesPersonList[soHeader.SOInfo.Id]" ng-init="AssignedSalespersonIndex = $index">
                                                                        <td class="PT0 PB0">
                                                                        <div class="first-name-wrappeer" data-toggle="tooltip" title="{{assignedSalesperson.NameInitials}}">
                                                                            <div class = "circle"
                                                                                >{{assignedSalesperson.NameInitials}}
                                                                            </div>
                                                                            </div>
                                                                        </td>
                                                                        <td class="boldText LogTechId PL0">
                                                                            <div class="InnerFlexContainer">
                                                                                <span class =" hursLogged">{{::assignedSalesperson.TechnicianName}}</span>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <div class="MB10" ng-class = "{'MT30': M_CO.SOSalesPersonList[soHeader.SOInfo.Id].length == 0}">
                                                            <button class="bp-btn bp-btn-normal bp-first-letter-capitalize" id = "Assign_SO_Salesperson" ng-disabled="(!GroupOnlyPermissions['Service job']['create/modify'] || !F_CO.isServiceJobActionable(soHeader.SOInfo))"
                                                                ng-click="F_CO.showTechnicianListOverlay('Assign_SO_Salesperson', soHeader.SOInfo.Id, true)">{{'Label_Assign_Salesperson' | translate }}</button>            
                                                        </div>
                                                    </div>
                                                    
                                                    <div class = "col-xs-12">
                                                        <label class = "col-xs-12">{{ 'Transaction_type' | translate }}</label>
                                                        <div class="MB10">
                                                            <button class="bp-btn bp-btn-normal" id = "Transaction_type"
                                                                ng-click="F_CO.setFocusOnTransactionTypeField($index, SoHeaderIndex, $event)">{{soHeader.SOInfo.TransactionTypeLabel}}</button>            
                                                        </div>
                                                    </div>

                                                    <div>
                                                        <div class="col-xs-12 override-tax P0 MB20">
                                                            <div ng-if="F_CO.showTaxBasedOnCustomerAddressToggleOnServiceJob(SoHeaderIndex) && M_CO.coHeaderRec.CustomerId != undefined && M_CO.coHeaderRec.COType != 'Cash Sale'">
                                                                <bp-ng-slider value="{{soHeader.SOInfo.IsTaxBasedOnCustomerAddress}}" disable-toggle-click="M_CO.isServiceJobDisabled($index)" ng-class-name= "{'c-checkd-slider':soHeader.SOInfo.IsTaxBasedOnCustomerAddress}" on-click-fun="F_CO.toggleTaxBasedOnCustomerAddress('serviceSection', SoHeaderIndex);" field-value="Tax based on the customer address"></bp-ng-slider>
                                                            </div>
                                                            <div ng-if="F_CO.showApplicableTaxOnServiceJob(SoHeaderIndex)">
                                                                <bp-ng-slider value="{{soHeader.SOInfo.IsOverrideTax}}" disable-toggle-click="M_CO.isServiceJobDisabled($index)" ng-class-name= "{'c-checkd-slider':soHeader.SOInfo.IsOverrideTax}" on-click-fun="F_CO.toggleOverrideTax(SoHeaderIndex);" field-value="Override how taxes are calculated?"></bp-ng-slider>
                                                            </div>
                                                        </div>

                                                        <div class="col-xs-12 applicable-tax" ng-if="soHeader.SOInfo.IsOverrideTax">
                                                            <p class="bp-lh-19 bp-font-16 modified-p-margin-bottom">{{'Applicable_tax_Label' | translate}}</p>
                                                            <div class="col-lg-12 P0">
                                                                <div class="account-type-container">
                                                                    <div class="bp-autocomplete-Wrapper autocomplete_v2">
                                                                        <span class="bp-autocomplete-image-icon">
                                                                            <i ng-include="'{!Application_Images}/Icons/arrowDown.svg'" class="bp-blue bp-cursor-pointer svg_width_2px" ng-click = "F_CO.setFocusOnInput('serviceJobSalesTaxRecInput_'+SoHeaderIndex)"></i>
                                                                        </span>
                                                                        <input  type="text" id="serviceJobSalesTaxRecInput_{{SoHeaderIndex}}" class="bp-autocomplete-input bp-cursor-pointer bp-input-text  manage-long-salesperson-person" placeholder="{{'Please_select' | translate }}"
                                                                        autocomplete="off" ng-keyup="F_CO.keyPressNavigationOnDropdownElements($event, 'serviceJobSalesTaxRecDropdownDiv', 'serviceJobSalesTaxRec', M_CO.applicableSalesTaxList, soHeader.SOInfo.ApplicableTaxName, ('serviceJobSalesTaxRecInput_' + SoHeaderIndex))"
                                                                        ng-model="soHeader.SOInfo.ApplicableTaxName" 
                                                                        ng-focus = "M_CO.showSalesTaxListDropdown = true; F_CO.setServiceJobApplicableTaxDefaultDataOnFocus(SoHeaderIndex);"
                                                                        ng-blur="F_CO.setSOApplicableTax(SoHeaderIndex); M_CO.showSalesTaxListDropdown = false; F_CO.hideDropdown();"  
                                                                        ng-disabled="((!GroupOnlyPermissions['Sales Taxes']['assign']) || M_CO.isServiceJobDisabled($index))"/>
                                                                        <div class = "bp-autocomplete-dropdown-wrapper" ng-if="M_CO.showSalesTaxListDropdown" id="serviceJobSalesTaxRecDropdownDiv">
                                                                            <ul>
                                                                                <li ng-repeat="salesTax in M_CO.filteredApplicableSalesTaxList track by $index" id="serviceJobSalesTaxRec_{{SoHeaderIndex}}"
                                                                                ng-class="{'selected-row': $index == M_CO.currentDropDownIndex}"
                                                                                ng-mousedown="F_CO.selectSOApplicableSalesTax(salesTax, SoHeaderIndex)">
                                                                                    <div class="form-group-info col-xs-12 P0">
                                                                                        <span >{{salesTax.Name}}</span>
                                                                                    </div>
                                                                                </li> 
                                                                            </ul>
                                                                            <ul ng-If="M_CO.filteredApplicableSalesTaxList.length == 0">
                                                                                <li id="unitSalesTaxNoResults" class="BP_angucomplete-row-NoResults-Msg">
                                                                                    <div class="">{{'No_Results_Found' | translate}}</div>
                                                                                </li>
                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div ng-if="soHeader.SOInfo.IsOverrideTax" class="col-xs-12 d-flex tax-detail-toggle override-tax multi-select P0 MB20">
                                                            <div class="tax-detail-label lables bp-bold-font bp-dark-grey1-font P0 bp-font-16">{{'Use_this_tax_for_these_items' | translate}}</div>
                                                            <div class="values bp-dark-grey1-font">
                                                                <div class="multi-select-dropdown-wrapper">
                                                                    <multi-select ng-class="{'bp-disabled': M_CO.isServiceJobDisabled($index)}" ng-if="soHeader.SOInfo.OverrideTaxList" index="{{SoHeaderIndex}}" result-list = "soHeader.SOInfo.OverrideTaxList.unitTaxApplicableOn" type = "item type" select-all-rec = "soHeader.SOInfo.OverrideTaxList.isUnitTaxApplicableOnAllOptionType" section-name="serviceJob"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="transaction-type-wrapper" ng-if = "soHeader.SOInfo.TransactionType != 'Deal Service'">
                                                        <h4 class="H400">Inventory and special order handling:</h4>
                                                        <div ng-if="M_CO.coHeaderRec.OrderStatus == 'Quote' || F_CO.getStatusForSOSpecialOrder(soHeader.SOInfo.Id)" class="warning-container" ng-class="{'orange-warning-container': F_CO.getStatusForSOSpecialOrder(soHeader.SOInfo.Id)}"> 
                                                            <div class="bp-warning-template">
                                                                <span class="bp-warning-icon" ng-if="M_CO.coHeaderRec.OrderStatus == 'Quote'">
                                                                    i
                                                                </span>
                                                                <span class="bp-orange-warning-icon" ng-if = "F_CO.getStatusForSOSpecialOrder(soHeader.SOInfo.Id)">
                                                                    <i class="orange" ng-include="'{!Application_Images}/Icons/warning-filled.svg'"></i>
                                                                </span>
                                                                <div class="bp-warning-msg">    
                                                                    <span class="bp-dark-grey1-font H301 line-height-large" ng-if="M_CO.coHeaderRec.OrderStatus == 'Quote'">All items will remain uncommited and unordered because your order is set as a quote.</span>
                                                                    <span class="H301" ng-if="F_CO.getStatusForSOSpecialOrder(soHeader.SOInfo.Id)">Items have already been ordered, you can no longer change this setting.</span>
                                                                </div>
                                                            </div>
                                                        </div> 
                                                        <ul class="transaction-type-rec" ng-class="{'disable-radio-button': M_CO.coHeaderRec.OrderStatus == 'Quote' || F_CO.getStatusForSOSpecialOrder(soHeader.SOInfo.Id) || M_CO.isAsyncActionInProgress || !F_CO.isSOTransactionTypeChangeable(SoHeaderIndex)}">
                                                            <li ng-repeat = "transactionrec in M_CO.transactionType">
                                                                <div class="circle" ng-click = "soHeader.SOInfo.CommitOrderControls = transactionrec.label; F_CO.updateSOCommitControls(SoHeaderIndex)" ng-class="{'radioButtonSelected': transactionrec.label == soHeader.SOInfo.CommitOrderControls}" ></div>
                                                                <label class="H400 transaction-type-label">{{transactionrec.label}}</label>
                                                                <span class="H301 line-height-large">{{transactionrec.soValue}}</span>
                                                            </li>
                                                        </ul>
                                                   </div>
                                                </div>
                                                <!-- left alignment ends here -->

                                                <!-- Right alignment starts here -->
                                                <div class = "col-xs-12 col-sm-6 form-container" ng-if = "soHeader.SOInfo.TransactionType != 'Customer'" ng-class="{'dummy-animation': soHeader.SOInfo.FetchingServiceJobSalesTax}">
                                                    <div class="col-xs-12" >
                                                        <label class="col-xs-6 bp-font-16">{{ 'Service_job_totals' | translate }}</label>
                                                    </div>
                                                    <div class = "col-xs-12 dealTotalSummary">
                                                        <label class = "col-xs-6 MT20">{{ 'Number of items' | translate }}</label>
                                                        <span class="col-xs-6 bp-dark-grey1-font MT20">{{F_CO.getServiceJobSummaryTotals('Number of items', SoHeaderIndex)}}</span>
                                                    </div>
                                                    <div class = "col-xs-12 dealTotalSummary">
                                                        <label class = "col-xs-6">{{ 'Parts total' | translate }}</label>
                                                        <span class="col-xs-6 bp-dark-grey1-font">{{F_CO.getServiceJobSummaryTotals('Parts total', SoHeaderIndex) | currency}}</span>
                                                    </div>
                                                    <div class = "col-xs-12 dealTotalSummary">
                                                        <label class = "col-xs-6">{{ 'Labor total' | translate }}</label>
                                                        <span class="col-xs-6 bp-dark-grey1-font">{{F_CO.getServiceJobSummaryTotals('Labor total', SoHeaderIndex) | currency}}</span>
                                                    </div>
                                                    <div class = "col-xs-12 dealTotalSummary">
                                                        <label class = "col-xs-6">{{ 'Sublet total' | translate }}</label>
                                                        <span class="col-xs-6 bp-dark-grey1-font">{{F_CO.getServiceJobSummaryTotals('Sublet total', SoHeaderIndex) | currency}}</span>
                                                    </div>
                                                    <div class = "col-xs-12 dealTotalSummary">
                                                        <label class = "col-xs-6">{{ 'Fees total' | translate }}</label>
                                                        <span class="col-xs-6 bp-dark-grey1-font">{{F_CO.getServiceJobSummaryTotals('Fees total', SoHeaderIndex) | currency}}</span>
                                                    </div>
                                                    <div class = "col-xs-12 dealTotalSummary">
                                                        <label class = "col-xs-6">{{ 'Shop supplies' | translate }}</label>
                                                        <span class="col-xs-6 bp-dark-grey1-font">{{F_CO.getServiceJobSummaryTotals('Shop supplies', SoHeaderIndex) | currency}}</span>
                                                    </div>
                                                    <div class = "col-xs-12 dealTotalSummary" ng-if="!M_CO.IsTaxIncludingPricing">
                                                        <label class = "col-xs-6 bp-bold-font">{{ 'SUBTOTAL' | translate }}</label>
                                                        <span class="col-xs-6 bp-dark-grey1-font">{{F_CO.getServiceJobSummaryTotals('SUBTOTAL', SoHeaderIndex) | currency}}</span>
                                                    </div>
                                                    <div class = "col-xs-12 dealTotalSummary" ng-if="!M_CO.IsTaxIncludingPricing">
                                                        <label class = "col-xs-6">{{ 'Sales taxes' | translate }}</label>
                                                        <span class="col-xs-3 bp-dark-grey1-font" ng-if="!soHeader.SOInfo.FetchingServiceJobSalesTax">{{soHeader.SOInfo.SalesTaxTotal ? soHeader.SOInfo.SalesTaxTotal : 0 | currency}}</span>
                                                        <span class="col-xs-3 bp-dark-grey1-font dummySalesTax dummy-tag-name" ng-if="soHeader.SOInfo.FetchingServiceJobSalesTax"></span>
                                                    </div>
                                                    <div class = "col-xs-12 dealTotalSummary">
                                                        <label class = "col-xs-6 bp-bold-font">{{ 'JOB TOTALS' | translate }}</label>
                                                        <span class="col-xs-6 bp-dark-grey1-font bp-font-14 bp-bold-font" ng-if="!soHeader.SOInfo.FetchingServiceJobSalesTax">{{F_CO.getServiceJobSummaryTotals('JOB TOTALS', SoHeaderIndex) | currency}}</span>
                                                        <span class="col-xs-6 bp-dark-grey1-font dummySalesTax dummy-tag-name" ng-if="soHeader.SOInfo.FetchingServiceJobSalesTax"></span>
                                                    </div>
                                                </div>

                                                <div class = "col-xs-12 col-sm-6 form-container" ng-if = "soHeader.SOInfo.TransactionType == 'Customer'"  ng-class="{'dummy-animation': soHeader.SOInfo.FetchingServiceJobSalesTax}">
                                                        <div class="col-xs-12">
                                                    <div>
                                                        <label class="col-xs-6 bp-font-16 MB0">{{ 'Service_job_totals' | translate }}</label>
                                                    </div>
                            
                                                    <table class="col-xs-12 table" id="totals_table">
                                
                                                        <col width="37%" />
                                                        <col width="20%" />
                                                        <col width="20%" />
                                                        <col width="23%" />
                                                        
                                                        <thead class="totalsTableHead">
                                                            <tr>
                                                            <th></th>
                                                            <th></th>
                                                            <th></th>
                                                            <th></th>
                                                            </tr>       
                                                        </thead>
                                                        <tbody class="totalsTableBody">
                                                            <tr >
                                                                <td><label class = "MT20">{{ 'Number of items' | translate }}</label></td>
                                                                <td > <span class="bp-dark-grey1-font MT20">{{F_CO.getServiceJobSummaryTotals('Number of items', SoHeaderIndex)}}</span></td>
                                                                <td class="result-col"><label>{{ 'Discounts' | translate }}</label></td>
                                                                <td class="result-col"><label class="bulkDiscountHeading">{{ 'Bulk discounts' | translate }}</label></td>
                                                            </tr>
                                                            <tr >
                                                                <td><label>{{ 'Parts total' | translate }}</label></td>
                                                                <td ><span class="bp-dark-grey1-font">{{F_CO.getServiceJobSummaryTotals('Parts total', SoHeaderIndex) | currency}}</span></td>
                                                                <td class="result-col"><span>{{F_CO.getServiceJobSummaryTotals('Parts discount', SoHeaderIndex) | currency}}</span></td>
                                                                <td class="result-col">
                                                                    <span><numbers-only id-value = "partsBulkDiscount"
                                                                    class-value = "rightContentInput"
                                                                    min-value = "0"
                                                                    max-value = "100"
                                                                    input-model-value = "soHeader.SOInfo.SOPartsBulkDiscountPct"
                                                                    blur-value = "F_CO.saveServiceBulkDiscountPercent(soHeader.SOHeaderId, 'Part', soHeader.SOInfo.SOPartsBulkDiscountPct, soHeader.SOInfo.SOPartsBulkDiscountPctCopy)" 
                                                                    include-negative = "false"
                                                                    place-holder-value ="0"
                                                                    precision-length = "2"
                                                                    force-precision-length = "true"
                                                                    disabled-value = "M_CO.isServiceJobDisabled(SoHeaderIndex) || !GroupOnlyPermissions['Apply bulk discounts'].enabled"/>%</span>
                                                                </td>
                                                            </tr>
                                                            <tr >
                                                                <td><label>{{ 'Labor total' | translate }}</label></td>
                                                                <td ><span class="bp-dark-grey1-font">{{F_CO.getServiceJobSummaryTotals('Labor total', SoHeaderIndex) | currency}}</span></td>
                                                                <td class="result-col"><span>{{F_CO.getServiceJobSummaryTotals('Labor discount', SoHeaderIndex) | currency}}</span></td>
                                                                <td class="result-col">
                                                                    <span><numbers-only id-value = "laborBulkDiscount"
                                                                    class-value = "rightContentInput"
                                                                    min-value = "0"
                                                                    max-value = "100"
                                                                    input-model-value = "soHeader.SOInfo.SOLaborBulkDiscountPct"
                                                                    blur-value = "F_CO.saveServiceBulkDiscountPercent(soHeader.SOHeaderId, 'Labor', soHeader.SOInfo.SOLaborBulkDiscountPct, soHeader.SOInfo.SOLaborBulkDiscountPctCopy)" 
                                                                    include-negative = "false"
                                                                    place-holder-value ="0"
                                                                    precision-length = "2"
                                                                    force-precision-length = "true"
                                                                    disabled-value = "M_CO.isServiceJobDisabled(SoHeaderIndex) || !GroupOnlyPermissions['Apply bulk discounts'].enabled"/>%</span>
                                                                </td>
                                                            </tr>
                                                            <tr >
                                                                <td><label>{{ 'Sublet total' | translate }}</label></td>
                                                                <td ><span class="bp-dark-grey1-font">{{F_CO.getServiceJobSummaryTotals('Sublet total', SoHeaderIndex) | currency}}</span></td>
                                                                <td class="result-col"><span>{{F_CO.getServiceJobSummaryTotals('Sublet discount', SoHeaderIndex) | currency}}</span></td>
                                                                <td class="result-col">
                                                                    <span><numbers-only id-value = "subletBulkDiscount"
                                                                    class-value = "rightContentInput"
                                                                    min-value = "0"
                                                                    max-value = "100"
                                                                    input-model-value = "soHeader.SOInfo.SOSubletBulkDiscountPct"
                                                                    blur-value = "F_CO.saveServiceBulkDiscountPercent(soHeader.SOHeaderId, 'Sublet', soHeader.SOInfo.SOSubletBulkDiscountPct, soHeader.SOInfo.SOSubletBulkDiscountPctCopy)" 
                                                                    include-negative = "false"
                                                                    place-holder-value ="0"
                                                                    precision-length = "2"
                                                                    force-precision-length = "true"
                                                                    disabled-value = "M_CO.isServiceJobDisabled(SoHeaderIndex) || !GroupOnlyPermissions['Apply bulk discounts'].enabled"/>%</span>
                                                                </td>
                                                            </tr>
                                                            <tr >
                                                                <td><label>{{ 'Fees total' | translate }}</label></td>
                                                                <td><span class="bp-dark-grey1-font">{{F_CO.getServiceJobSummaryTotals('Fees total', SoHeaderIndex) | currency}}</span></td>
                                                                <td class="result-col"> <span >{{F_CO.getServiceJobSummaryTotals('Fees discount', SoHeaderIndex) | currency}}</span></td>
                                                                <td class="result-col">
                                                                    <span>
                                                                    <numbers-only id-value = "feeBulkDiscount"
                                                                    class-value = "rightContentInput"
                                                                    min-value = "0"
                                                                    max-value = "100"
                                                                    input-model-value = "soHeader.SOInfo.SOFeesBulkDiscountPct"
                                                                    blur-value = "F_CO.saveServiceBulkDiscountPercent(soHeader.SOHeaderId, 'Fee', soHeader.SOInfo.SOFeesBulkDiscountPct, soHeader.SOInfo.SOFeesBulkDiscountPctCopy)"  
                                                                    include-negative = "false"
                                                                    place-holder-value ="0"
                                                                    precision-length = "2"
                                                                    force-precision-length = "true"
                                                                    disabled-value = "M_CO.isServiceJobDisabled(SoHeaderIndex) || !GroupOnlyPermissions['Apply bulk discounts'].enabled "/>%</span>
                                                                </td>
                                                            </tr>
                                                            <tr >
                                                                <td><label>{{ 'Shop supplies' | translate }}</label></td>
                                                                <td><span class="bp-dark-grey1-font">{{F_CO.getServiceJobSummaryTotals('Shop supplies', SoHeaderIndex) | currency}}</span></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            <tr ng-if="!M_CO.IsTaxIncludingPricing">
                                                                <td><label class = "bp-bold-font">{{ 'SUBTOTAL' | translate }}</label></td>
                                                                <td><span class="bp-dark-grey1-font bp-font-14 bp-bold-font">{{F_CO.getServiceJobSummaryTotals('SUBTOTAL', SoHeaderIndex) | currency}}</span></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            <tr ng-if="!M_CO.IsTaxIncludingPricing">
                                                                <td ><label>{{ 'Sales taxes' | translate }}</label></td>
                                                                <td class="dealTotalSummary" ng-class="{'dummy-animation': soHeader.SOInfo.FetchingServiceJobSalesTax}"> 
                                                                    <span class="bp-dark-grey1-font" ng-if="!soHeader.SOInfo.FetchingServiceJobSalesTax">{{soHeader.SOInfo.SalesTaxTotal ? soHeader.SOInfo.SalesTaxTotal : 0 | currency}}</span>
                                                                    <span class="bp-dark-grey1-font dummySalesTax dummy-tag-name" ng-if="soHeader.SOInfo.FetchingServiceJobSalesTax"></span></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            <tr >
                                                                <td><label class = "bp-bold-font">{{ 'JOB TOTALS' | translate }}</label></td>
                                                                <td class="dealTotalSummary" ng-class="{'dummy-animation': soHeader.SOInfo.FetchingServiceJobSalesTax}"> 
                                                                    <span class="bp-dark-grey1-font bp-font-14 bp-bold-font" ng-if="!soHeader.SOInfo.FetchingServiceJobSalesTax">{{F_CO.getServiceJobSummaryTotals('JOB TOTALS', SoHeaderIndex) | currency}}</span>
                                                                    <span class="bp-dark-grey1-font dummySalesTax dummy-tag-name" ng-if="soHeader.SOInfo.FetchingServiceJobSalesTax"></span>
                                                                </td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                            
                                                        </tbody>
                                                    </table>
                                                </div>
                                                </div>
                                                <!-- Right alignment ends here -->

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Summary section ends here -->

                                <!-- Job Details accordian start here -->
                                <div class="bp-inner-accordian open"  ng-class="{'bp-inner-accordian-opened': M_CO.expandedInnerSectionName == 'ServiceJob{{$index}}_Details'}">
                                    <div class="inner-accordian-header col-md-12" ng-click = "F_CO.expandOrCollapseInnerSection('ServiceJob'+$index+'_DetailsSectionId', 'ServiceJob'+$index+'_Details',SoHeaderIndex,'',$event)">
                                        <div class="inner-accordian-header-left " ng-class = "{'new-left': M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_Details'}">  
                                            <h2 class="accordian-left-details">{{ 'Job_details' | translate }}</h2>
                                            <div class="show-onclse"  ng-if="F_CO.isSelectUnitTextVisible(SoHeaderIndex) && M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_Details'">
                                                {{ 'Select_a_unit_and_add_details_to_your_order' | translate }}
                                            </div>
                                            
                                            <div  class="event-prevent-default edit-event-container" ng-class = "{'adjust-cal-header-width': M_CO.soAppointments[soHeader.SOInfo.Id].IsMultiday , 'disable-appointment-btn': !GroupOnlyPermissions['Service scheduler']['create/modify']}" ng-click="F_CO.openAddEditAppointment('AddEditAppointment',soHeader.SOInfo.Id,soHeader.SOInfo,SoHeaderIndex,M_CO.soAppointments[soHeader.SOInfo.Id])" ng-if="M_CO.isTechSchedulingEnable && M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_Details' && M_CO.soAppointments[soHeader.SOInfo.Id]">
                                                     <span ng-if = "!M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianId"><i class="bp-icons bp-font-25 bp-green-font clock-appoitment-icon">calendarCheck</i></span>
                                                     <span ng-if = "M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianId"><i class="bp-icons bp-font-25 bp-green-font clock-appoitment-icon">calendarClock</i></span>
                                                    <div class = "adjust-cal-contianer" ng-if = "!M_CO.soAppointments[soHeader.SOInfo.Id].IsMultiTechnicianAssigned">
                                                        <span class="H300">{{M_CO.soAppointments[soHeader.SOInfo.Id].FormattedStartDate}} - {{M_CO.soAppointments[soHeader.SOInfo.Id].EstimatedHours}} {{(M_CO.soAppointments[soHeader.SOInfo.Id].EstimatedHours > 1) ? 'hrs' : 'hr'}}</span> 
                                                        <p class = "M0" ng-if = "M_CO.isTechSchedulingEnable && M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_Details' && M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianId">{{M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianName}} - {{M_CO.soAppointments[soHeader.SOInfo.Id].StartTime}}</p>
                                                    </div>
                                                    <div ng-if = "M_CO.soAppointments[soHeader.SOInfo.Id].IsMultiTechnicianAssigned">
                                                        <span class="H300">{{M_CO.soAppointments[soHeader.SOInfo.Id].FormattedStartDate}} - {{M_CO.soAppointments[soHeader.SOInfo.Id].EstimatedHours}} {{(M_CO.soAppointments[soHeader.SOInfo.Id].EstimatedHours > 1) ? 'hrs' : 'hr'}}</span> 
                                                        <p class = "M0" ng-if = "M_CO.isTechSchedulingEnable">{{M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianName}}</p>
                                                    </div>
                                                </div>
                                        </div>
                                        <div class="accordian-right-details add-edit-appointment-container-co new-right-details-container">
                                            <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_Details'">
                                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowDown</i>
                                            </a>
                                            <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_Details'">
                                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowUp</i>
                                            </a>    
                                            <div class="accordian-right-details-text">
                                                <p class="right-text hide">{{ 'Please_add_details' | translate }}</p>
                                                <p class="right-text required"  ng-if="F_CO.isSelectUnitTextVisible(SoHeaderIndex) && M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_Details'">
                                                    <span>{{ 'Part_Object_Status_Required' | translate }}</span> 
                                                    <span class="req-icon">!</span>
                                                </p>
                                                  <p class="event-prevent-default new-card-info new-create-appointment-container" ng-click="F_CO.openAddEditAppointment('AddEditAppointment',soHeader.SOInfo.Id,soHeader.SOInfo,SoHeaderIndex)"
                                                  ng-class = "{'disable-appointment-btn': !GroupOnlyPermissions['Service scheduler']['create/modify']}"   
                                                    ng-if="M_CO.isTechSchedulingEnable && M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_Details' && !M_CO.soAppointments[soHeader.SOInfo.Id] && F_CO.isServiceJobActionable(soHeader.SOInfo) && soHeader.SOInfo.UnitName && M_CO.coHeaderRec.OrderStatus != 'Quote' && soHeader.SOInfo.TransactionTypeLabel != 'Quote'">
                                                    <span><i class="bp-icons add-appoitment-icon bp-font-18">calendarAdd</i></span>
                                                    <span class="H300 line-height-medium  create-new-appointment">Create appointment </span> 
                                                </p>
                                                <div  class="event-prevent-default edit-event-container" ng-class = "{'adjust-cal-width': M_CO.soAppointments[soHeader.SOInfo.Id].IsMultiday, 'disable-appointment-btn': !GroupOnlyPermissions['Service scheduler']['create/modify']}"  ng-click="F_CO.openAddEditAppointment('AddEditAppointment',soHeader.SOInfo.Id,soHeader.SOInfo,SoHeaderIndex,M_CO.soAppointments[soHeader.SOInfo.Id])" ng-if="M_CO.isTechSchedulingEnable && M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_Details' && M_CO.soAppointments[soHeader.SOInfo.Id]">
                                                     <span class="clock-app-container" ng-if = "!M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianId"><i class="bp-icons bp-font-25 bp-green-font clock-appoitment-icon">calendarCheck</i></span>
                                                     <span class="clock-app-container" ng-if = "M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianId"><i class="bp-icons bp-font-25 bp-green-font clock-appoitment-icon">calendarClock</i></span>
                                                     <div ng-if = "!M_CO.soAppointments[soHeader.SOInfo.Id].IsMultiday && !M_CO.soAppointments[soHeader.SOInfo.Id].IsMultiTechnicianAssigned" ng-class = "{'adjust-cal-contianer': !M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianId}">
                                                        <span class="H300">{{M_CO.soAppointments[soHeader.SOInfo.Id].FormattedStartDate}} - {{M_CO.soAppointments[soHeader.SOInfo.Id].EstimatedHours}} {{(M_CO.soAppointments[soHeader.SOInfo.Id].EstimatedHours > 1) ? 'hrs' : 'hr'}}</span> 
                                                        <p class = "M0" ng-if = "M_CO.isTechSchedulingEnable && M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_Details' && M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianId">{{M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianName}} - {{M_CO.soAppointments[soHeader.SOInfo.Id].ActualStartTime}}</p>
                                                    </div>
                                                    <div ng-if = "!M_CO.soAppointments[soHeader.SOInfo.Id].IsMultiday && M_CO.soAppointments[soHeader.SOInfo.Id].IsMultiTechnicianAssigned" >
                                                        <span class="H300">{{M_CO.soAppointments[soHeader.SOInfo.Id].FormattedStartDate}} - {{M_CO.soAppointments[soHeader.SOInfo.Id].EstimatedHours}} {{(M_CO.soAppointments[soHeader.SOInfo.Id].EstimatedHours > 1) ? 'hrs' : 'hr'}}</span> 
                                                        <p class = "M0" ng-if = "M_CO.isTechSchedulingEnable && M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_Details'">{{M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianName}}</p>
                                                    </div>
                                                    
                                                    <div ng-if = "M_CO.soAppointments[soHeader.SOInfo.Id].IsMultiday" ng-class = "{'adjust-cal-contianer': ! M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianId}">
                                                        <span class="H300">{{M_CO.soAppointments[soHeader.SOInfo.Id].FormattedStartDate}} - {{M_CO.soAppointments[soHeader.SOInfo.Id].EstimatedHours}} {{(M_CO.soAppointments[soHeader.SOInfo.Id].EstimatedHours > 1) ? 'hrs' : 'hr'}}</span> 
                                                        <p class = "M0" ng-if = "M_CO.isTechSchedulingEnable && M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_Details' && M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianId">{{M_CO.soAppointments[soHeader.SOInfo.Id].TechnicianName}} - Starts {{M_CO.soAppointments[soHeader.SOInfo.Id].ActualStartTime}} - Ends {{M_CO.soAppointments[soHeader.SOInfo.Id].ActualEndDate}} {{M_CO.soAppointments[soHeader.SOInfo.Id].ActualEndTime}}</p>
                                                    </div>
                                                </div>
                                                <p class="event-prevent-default new-card-info" ng-click="F_CO.openUnitArrivedModalWindow(SoHeaderIndex)"
                                                    ng-if="soHeader.SOInfo.DueInDate == ''  && M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_Details' && F_CO.isServiceJobActionable(soHeader.SOInfo) && soHeader.SOInfo.UnitName && M_CO.coHeaderRec.OrderStatus != 'Quote' && soHeader.SOInfo.TransactionTypeLabel != 'Quote'">
                                                    <span><i class="bp-icons add-appoitment-icon bp-font-18">{{M_CO.UnitIconFillName}}</i></span>
                                                    <span class="H300 line-height-medium  create-new-appointment">Unit check-in </span> 
                                                </p>
                                                <div  class="event-prevent-default edit-event-container unit-Edit-container" ng-click="F_CO.openUnitArrivedModalWindow(SoHeaderIndex)" ng-if = "soHeader.SOInfo.DueInDate != '' &&  M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_Details'">
                                                    <span class="new-unit-img" ><i class="bp-icons bp-font-25">{{M_CO.UnitIconFillName}}</i></span>
                                                    <span class = "unit-arrival-img" ng-class="{'bp-main-bg-coral' : !soHeader.SOInfo.IsUnitArrived }"><i ng-if = "!soHeader.SOInfo.IsUnitArrived" class="bp-icons bp-font-6 bp-white-font stroke-5 clock-appoitment-icon">close</i><i ng-if = "soHeader.SOInfo.IsUnitArrived" class="bp-icons bp-font-6 bp-white-font stroke-5 clock-appoitment-icon">check</i></span>
                                                     
                                                     <div class = "unit-arrival-container">
                                                        <span class="H200">Due in: <span class="unit-arrival-info">{{soHeader.SOInfo.DueInDate}} <span ng-if = "soHeader.SOInfo.DueInTime"> -  {{soHeader.SOInfo.DueInTime}}</span></span></span> 
                                                        <p class = "M0 H200"> Promised by: <span class="unit-arrival-info">{{soHeader.SOInfo.PromisedByDate}} <span ng-if = "soHeader.SOInfo.PromiseByTime"> -  {{soHeader.SOInfo.PromiseByTime}}</span></span></p>
                                                    </div>
                                                    
                                            </div>
                                        </div>
                                    </div>
                                    </div>                                    
                                    <div class="inner-accordian-body bp-light-gray4 col-md-12 bp-collapse-div-transition" id="ServiceJob{{$index}}_DetailsSectionId"
                                        ng-class="{'bp-expand-div-transition': M_CO.expandedInnerSectionName == 'ServiceJob{{$index}}_Details'}">
                                        <div>
                                        <div class="expandableContainer">
                                            <div class = "col-xs-12 col-sm-6 form-container">
                                                <div ng-if = "soHeader.HoursLoggedList.totalLogHours > soHeader.TotalHoursBilled" class="col-md-12  bp-orange-dark-font dealStatusValue  required hours-warning">
	                                                <span class="req-icon">!</span>
	                                                 <span class = "dealquation">Hours logged is greater than hours billed</span> 
                                            	</div>
                                                <div class = "col-xs-12" ng-if="M_CO.coHeaderRec.COType != 'Internal Service' && !soHeader.SOInfo.DealId">
                                                    <label class = "col-xs-12" ng-class = "{'MT0': soHeader.HoursLoggedList.totalLogHours > soHeader.TotalHoursBilled}">{{ 'Customer_unit' | translate }}</label>
                                                    <div class="col-xs-12 P0">
                                                        <div ng-if = "(!soHeader.SOInfo.UnitId || soHeader.SOInfo.isChangeUnit)">
                                                            <entity-custom-drop-down input-index="$index" no-unit-message="No customer unit found" drop-down-pay-load = "soHeader.CustomDropDownpayLoad" add-new-entity-action = "F_CO.openAddEditTempUnitPopup(soHeader.SOInfo.Id, SoHeaderIndex, 'Service Job', 'COU')" input-focus-method = "F_CO.setFocusOnCustomerUnit('CustomerUnit_', $index);F_CO.setdropDownPaylod($index)" input-blur-method = "F_CO.setBlurOnCustomerUnit($index); F_CO.unitBlurMethod($index)" ></entity-custom-drop-down>
                                                        </div>
                                                        <div ng-if = "(soHeader.SOInfo.UnitId && !soHeader.SOInfo.isChangeUnit && soHeader.SOInfo.isUnitUpdated)">
                                                            <entity-card add-new-entity-action = "F_CO.openAddEditTempUnitPopup(soHeader.SOInfo.Id, SoHeaderIndex, 'Service Job', 'COU')" entity-card-payload = "soHeader.entityCardPayload" first-img-action = "F_CO.editCardInfo(SoHeaderIndex)" second-button-action = "F_CO.changeCardAction(SoHeaderIndex)" active-order-action = "F_CO.ActiveOrderLoad($event)" third-img-action = "F_CO.editNotes(soHeader.SOInfo.Id, soHeader.SOInfo.Notes, soHeader.SOInfo.VIN, 'service', SoHeaderIndex)"></entity-card>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                
                                                                                        
                                                <div class = "col-xs-12" ng-if="M_CO.coHeaderRec.COType == 'Internal Service' && !soHeader.SOInfo.UnitId">
                                                    <label class = "col-xs-12">{{ 'Search_for_a_stock_unit' | translate }}</label>
                                                    <div class="col-xs-12 P0">
                                                        <autocompletev2 ng-if="!M_CO.IsWebComponentSTAEnabled" id="autocompletev2SKUInternalServiceId"
                                                            template-name="Entity"
                                                            section-name="Stock Unit"
                                                            soheader-index="{{SoHeaderIndex}}"
                                                            section-id="ServiceJob{{SoHeaderIndex}}"
                                                            is-disabled="M_CO.isServiceJobDisabled($index)" />
                                                        <div class="searchToAdd" ng-if="M_CO.IsWebComponentSTAEnabled">
                                                            <bpda-search-to-add id="autocompletev2SKUInternalServiceId{{SoHeaderIndex}}" 
                                                                template-name="Entity"
                                                                section-name="Stock Unit"
                                                                soheader-index="{{SoHeaderIndex}}"
                                                                section-id="ServiceJob{{SoHeaderIndex}}"
                                                                hide-filter-button="true"
                                                                placeholder="Search to add"
                                                                ng-disabled="M_CO.isServiceJobDisabled($index)"
                                                            >
                                                            </bpda-search-to-add>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                
                                                <div class = "col-xs-12" ng-if="(M_CO.coHeaderRec.COType == 'Internal Service' && soHeader.SOInfo.UnitId) || soHeader.SOInfo.DealId">
                                                    <label class = "col-xs-12">{{ 'Stock_unit' | translate }}</label>
                                                    <div class="col-xs-12 P0">
                                                       <info-card-component id-value="couInfoCardInternalServiceId" override-css="altered-info-card"
                                                            header-link-action="F_CO.moveToState('ViewUnit', {Id : soHeader.SOInfo.UnitId}, true)" 
                                                            object-payload="M_CO.unitIdToUnitImagesJsonMap[soHeader.SOInfo.UnitId].SOUnitCardInfoPayload"
                                                            hyperlink-action="F_CO.replaceUnitFromInternalService(SoHeaderIndex)"
                                                            image-action="F_CO.openImageCarousel(soHeader.SOInfo.UnitId)"
                                                            notes = "soHeader.SOInfo.Notes"
                                                            notes-tool-tip = "This unit has notes"
                                                            is-deal-service = "soHeader.SOInfo.DealId"
                                                            notes-action = "F_CO.editNotes(soHeader.SOInfo.UnitId,soHeader.SOInfo.Notes,soHeader.SOInfo.VIN,'service',SoHeaderIndex)">
                                                            <div class="bp-dark-grey1-font bp-flex-col">
                                                                <span class="bp-filled-circle sku-status-circle" ng-class="{'bp-coral-filled-circle': soHeader.SOInfo.UnitStatus == 'Reserved', 'bp-cyan-filled-circle': soHeader.SOInfo.UnitStatus == 'Sold', 'bp-orange-filled-circle' : soHeader.SOInfo.UnitStatus == 'On Order'}"></span>
                                                                <span class="bp-bold-font bp-grey-font text-uppercase bp-font-14 sku-status">{{soHeader.SOInfo.UnitStatus}}</span>
                                                            </div>
                                                         </info-card-component>
                                                       <div>
                                                           <span ng-if="soHeader.SOInfo.UnitId != null">
                                                            <a class = "viewUnitFromServiceJob" ng-click = "F_CO.openCOUpopup($event,soHeader.SOInfo.UnitId)">{{ 'View_unit' | translate }}</a>
                                                            </span>
                                                       </div>
                                                    </div>
                                                </div>
                                                
                                                <div class = "col-xs-12">
                                                    <label class = "col-xs-12">{{ 'Who_is_paying_for_the_job' | translate }}?</label>
                                                    <div class="col-xs-12 P0">
                                                        <div class="bp-cell  searchInputArea selectableDropdown" ng-class="{'showingOverlay' : M_CO.DropDownFocusId == 'JobType_{{$index}}', 'bp-unitSearch-area' : M_CO.DropDownFocusId == 'JobType_{{$index}}'}">
                                                            <input type="text" id="ServiceJob{{$index}}_jobTypeInput" class="searchInput" placeholder="Please select"
                                                                name="jobTypeInput"
                                                                ng-focus="F_CO.setFocusOnCustomerUnit('JobType_', $index)"
                                                                ng-blur="F_CO.setBlurOnCustomerUnit($index)"
                                                                ng-keyup="F_CO.changeSeletedclockingStaff($event)"  
                                                                ng-model="soHeader.SOInfo.TransactionTypeLabel" readonly="readonly" ng-disabled="!F_CO.isSOTransactionTypeChangeable($index)"/>
                                                            <i class="bp-icons bp-blue-font bp-font-14 downArrow stroke-5 size-unset" ng-click="F_CO.setFocusOnInput('ServiceJob'+$index+'_jobTypeInput')">arrowDown</i>
                                                            <div class="searchResultOverlay" id="autocompleteScrollDiv">
                                                                <ul>
                                                                    <li ng-repeat="ttItem in M_CO.TTOptionsList"
                                                                        ng-if = "soHeader.SOInfo.DealId == null && M_CO.coHeaderRec.OrderStatus !== 'Quote' && !F_CO.isShowCOAsQuote()"
                                                                        ng-class="{'selected-row': $index == F_CO.currentSelectedClockingStaffIndex}"
                                                                        ng-mousedown="F_CO.selectJobType($index, SoHeaderIndex, 'TTOptionsList', true)" >
                                                                        <div class="fullName">{{ttItem.CodeLabel}}</div>
                                                                    </li>
                                                                    <li ng-repeat="ttItem in M_CO.TTOptionListWithDeal"
                                                                        ng-if = "soHeader.SOInfo.DealId != null"
                                                                        ng-class="{'selected-row': $index == F_CO.currentSelectedClockingStaffIndex}"
                                                                        ng-mousedown="F_CO.selectJobType($index, SoHeaderIndex, 'TTOptionListWithDeal', true)" >
                                                                        <div class="fullName">{{ttItem.CodeLabel}}</div>
                                                                    </li>
                                                                    <li ng-repeat="ttItem in M_CO.TTOptionsListWithQuote"
                                                                        ng-if = "soHeader.SOInfo.DealId == null  && F_CO.isShowCOAsQuote()"
                                                                        ng-class="{'selected-row': $index == F_CO.currentSelectedClockingStaffIndex}"
                                                                        ng-mousedown="F_CO.selectPayingType($index, SoHeaderIndex, true)" >
                                                                        <div class="fullName">{{ttItem.CodeLabel}}</div>
                                                                    </li>
                                                                    <!--  | filter:soHeader.SOInfo.TransactionTypeLabel -->
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class = "col-xs-12" ng-if = "soHeader.SOInfo.TransactionType == 'Internal' || soHeader.SOInfo.TransactionType == 'Stock Unit'">
                                                    <label class = "col-xs-12">{{ 'Category_Object_Display_Label' | translate }}</label>
                                                   <div class="col-xs-12 P0">
                                                        <div class="bp-cell searchInputArea selectableDropdown" ng-class="{'showingOverlay' : M_CO.DropDownFocusId == 'CategoryName_{{$index}}', 'bp-unitSearch-area' : M_CO.DropDownFocusId == 'CategoryName_{{$index}}' }">
                                                            <input type="text" id="ServiceJob{{$index}}_categoryInput" class="searchInput" placeholder="Please select"
                                                                name="categoryInput"
                                                                ng-focus="F_CO.setFocusOnCustomerUnit('CategoryName_', $index)"
                                                                ng-blur="F_CO.setBlurOnCustomerUnit($index)"
                                                                ng-model="soHeader.SOInfo.CategoryName" readonly="readonly" ng-disabled="M_CO.isServiceJobDisabled($index) || M_CO.coHeaderRec.COType == 'Internal Service'"/>
                                                            <i class="bp-icons bp-blue-font bp-font-14 downArrow stroke-5 size-unset" ng-click="F_CO.setFocusOnInput('ServiceJob'+$index+'_categoryInput')">arrowDown</i>
                                                            <div class="searchResultOverlay" id="autocompleteScrollCategoryDiv">
                                                                <ul>
                                                                    <li ng-repeat="category in M_CO.CategoryList"
                                                                        ng-mousedown="F_CO.selectCategory($index, SoHeaderIndex)" >
                                                                        <div class="fullName">{{category.Name}}</div>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class = "col-xs-12" ng-if = "soHeader.SOInfo.TransactionType == 'Third-Party'  || (soHeader.SOInfo.TransactionType == 'Quote' && soHeader.SOInfo.TransactionTypeLabel == 'Quote Third-Party')">
                                                    <label class = "col-xs-12">{{ 'Provider' | translate }}</label>
                                                    <div class="col-xs-12 P0">
                                                        <div class="bp-cell  searchInputArea  selectableDropdown" ng-class="{'showingOverlay' : M_CO.DropDownFocusId == 'ProviderType_{{$index}}', 'bp-unitSearch-area' : M_CO.DropDownFocusId == 'ProviderType_{{$index}}' }">
                                                            <input type="text" id="ServiceJob{{$index}}_providerTypeInput" class="searchInput" placeholder="Please select"
                                                                name="jobTypeInput"
                                                                ng-focus="F_CO.setFocusOnCustomerUnit('ProviderType_', $index)"
                                                                ng-blur="F_CO.setBlurOnCustomerUnit($index)"
                                                                ng-model="soHeader.SOInfo.ProviderName" readonly="readonly" ng-disabled="M_CO.isServiceJobDisabled($index)"/>
                                                            <i class="bp-icons bp-blue-font bp-font-14 downArrow stroke-5 size-unset" ng-click="F_CO.setFocusOnInput('ServiceJob'+$index+'_providerTypeInput')">arrowDown</i>
                                                            <div class="searchResultOverlay" id="autocompleteScrollDiv">
                                                                <ul>
                                                                    <li ng-repeat="ProviderItem in M_CO.ProviderList"
                                                                        ng-mousedown="F_CO.selectProvider($index, SoHeaderIndex)" >
                                                                        <div class="fullName">{{ProviderItem.Name}}</div>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class = "col-xs-12" ng-if = "soHeader.SOInfo.TransactionType == 'Third-Party' || (soHeader.SOInfo.TransactionType == 'Quote' && soHeader.SOInfo.TransactionTypeLabel == 'Quote Third-Party')">
                                                    <label class = "col-xs-12">{{ 'Deductible' | translate }}</label>
                                                    <span class="currency prefix-currency-symbol">{{ 'Currency_Symbol' | translate }}</span>
                                                    <numbers-only 
                                                        class-value="bp-input-text deductible"
                                                        placeHolderValue="{{ 'Please_select' | translate }}"
                                                        precision-length="2"
                                                        force-precision-length="true"
                                                        blur-value="F_CO.addDeductibleAmount(SoHeaderIndex)"
                                                        input-model-value="soHeader.DeductibleItem.DeductibleAmount" 
                                                        disabled-value="F_CO.isDeductibleDisabled($index)"
                                                        input-keyup-value="F_CO.showHideDeductibles($event, soHeader);"
                                                        />
                                                        <span class="H300 bp-red-font claim-deductibles" ng-if="!soHeader.DeductibleItem.hideDeductiblesLabel && soHeader.DeductibleItem.DeductibleAmount > 0">{{F_CO.claimDeductible(soHeader)}}</span>
                                                </div>
                                                
                                                <div class = "col-xs-12 bp-orange-dark-font dealStatusValue" ng-if = "soHeader.SOInfo.DealId != null && soHeader.SOInfo.WorkStatus == 'Complete'">
                                                    <span class="req-icon">!</span>
                                                    <span class="warning-msg">
                                                        <span class = "dealquation M0 bp-bold-font">{{ 'Label_Action_Required' | translate }}:</span>
                                                        <span class = "dealquation action-text"> {{ 'Finalize_job' | translate }}</span>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class = "col-xs-12 col-sm-6 form-container">
                                                <div class = "col-xs-12">
                                                    <label class = "col-xs-12">{{ 'Label_Concern' | translate }}</label>
                                                    <div class="bp-multiselect" ng-class="{'bp-disabled': soHeader.IsDummyKit}" ng-click="F_CO.displayInput($event, $index, 'NewConcern', 'ManualConcern', 'Concern')">
                                                        <div ng-class="{'padding10': soHeader.SOInfo.KitHeaderConcern.length > 0 || soHeader.SOInfo.ManualConcern.length > 0, 'PB0': !(displayCauseConcernCorrectionInput(SoHeaderIndex, 'ManualConcern') || M_CO.toDisplayInput[SoHeaderIndex] == 'ManualConcern')}">
                                                            <div ng-repeat="concern in soHeader.SOInfo.ManualConcern track by $index" ng-init="concernIndex = $index" class="d-flex">
                                                                <textarea id="Concern{{SoHeaderIndex}}Tag{{concernIndex}}" class="textarea-message-box bp-input-text MB10" ng-show="M_CO.editModeIndexMultiSelect['Concern'] == concernIndex" 
                                                                   ng-model="soHeader.SOInfo.ManualConcern[concernIndex].Value" ng-blur="F_CO.updateMultiSelect($event,SoHeaderIndex,concernIndex, 'ManualConcern', 'Concern')"
                                                                   ng-keydown="F_CO.updateMultiSelect($event, SoHeaderIndex, concernIndex, 'ManualConcern', 'Concern')"
                                                                   ng-disabled="M_CO.isSOItemDisabled(SoHeaderIndex)" maxlength="{{F_CO.getCCCMaxLength(false, SoHeaderIndex, concernIndex, 'ManualConcern')}}" />
                                                                <span ng-class = "{'bg-coral-light2' : concern.IsDecline }" ng-click="F_CO.editMultiselectTag($event,'ManualConcern','Concern',SoHeaderIndex,concernIndex)" ng-show="M_CO.editModeIndexMultiSelect['Concern'] != concernIndex">{{concern.Value}}
                                                                    <i ng-class = "{'icon_fill_coral' : concern.IsDecline }"  ng-if="!M_CO.isServiceJobDisabled(SoHeaderIndex)" ng-click = "F_CO.showCCCNflyout($event,$index, SoHeaderIndex, 'ManualConcern','Concern',concern.IsDecline)" class="bp-icons bp-font-15 bp-blue-font LIDeleteBtn">moreAction</i>
                                                                </span>
                                                            </div>
                                                            <textarea id="Concern{{SoHeaderIndex}}" type="text" class="textarea-message-box bp-input-text" ng-show="displayCauseConcernCorrectionInput(SoHeaderIndex, 'ManualConcern') || M_CO.toDisplayInput[SoHeaderIndex] == 'ManualConcern'" 
                                                                ng-model="soHeader.SOInfo.NewConcern" ng-click="F_CO.setSoHeaderIndexForTextarea('Concern', SoHeaderIndex)"  ng-blur="F_CO.addAndRemoveFromMultiSelect($event, $index, 'NewConcern', 'ManualConcern', 'Concern')"
                                                                ng-keydown="F_CO.addAndRemoveFromMultiSelect($event, $index, 'NewConcern', 'ManualConcern', 'Concern')"
                                                                placeholder="{{ 'Type_concern' | translate }} " ng-disabled="M_CO.isServiceJobDisabled(SoHeaderIndex)" 
                                                                maxlength="{{F_CO.getCCCMaxLength(true, SoHeaderIndex, null, 'ManualConcern')}}" ng-class = "{'PT15' : soHeader.SOInfo.ManualConcern.length == 0, 'text-height': !soHeader.SOInfo.NewConcern }" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class = "col-xs-12">
                                                    <label class = "col-xs-12">{{ 'Label_Cause' | translate }}</label>
                                                    <div class="bp-multiselect" ng-class="{'bp-disabled': soHeader.IsDummyKit}" ng-click="F_CO.displayInput($event, $index, 'NewCause', 'ManualCause', 'Cause')">
                                                        <div ng-class="{'padding10': soHeader.SOInfo.KitHeaderCause.length > 0 || soHeader.SOInfo.ManualCause.length > 0, 'PB0': !(displayCauseConcernCorrectionInput(SoHeaderIndex, 'ManualCause') || M_CO.toDisplayInput[SoHeaderIndex] == 'ManualCause')}">
                                                            <div ng-repeat="cause in soHeader.SOInfo.ManualCause track by $index" ng-init="causeIndex = $index" class="d-flex">
                                                                <textarea id="Cause{{SoHeaderIndex}}Tag{{causeIndex}}" type="text" class="textarea-message-box bp-input-text MB10" ng-show="M_CO.editModeIndexMultiSelect['Cause'] == causeIndex" 
                                                                   ng-model="soHeader.SOInfo.ManualCause[causeIndex].Value" ng-blur="F_CO.updateMultiSelect($event,SoHeaderIndex, causeIndex, 'ManualCause', 'Cause')"
                                                                   ng-keydown="F_CO.updateMultiSelect($event, SoHeaderIndex, causeIndex, 'ManualCause', 'Cause')"
                                                                   ng-disabled="M_CO.isSOItemDisabled(SoHeaderIndex)" maxlength="{{F_CO.getCCCMaxLength(false, SoHeaderIndex, causeIndex, 'ManualCause')}}" />
                                                                <span ng-class = "{'bg-coral-light2' : cause.IsDecline }" ng-click="F_CO.editMultiselectTag($event,'ManualCause','Cause',SoHeaderIndex,causeIndex)" ng-show="M_CO.editModeIndexMultiSelect['Cause'] != causeIndex"> 
                                                                {{cause.Value}}
                                                                <i ng-class = "{'icon_fill_coral' : cause.IsDecline }"  ng-if="!M_CO.isServiceJobDisabled(SoHeaderIndex)"  ng-click = "F_CO.showCCCNflyout($event,$index, SoHeaderIndex, 'ManualCause','Cause',cause.IsDecline)"  class="bp-icons bp-font-15 bp-blue-font LIDeleteBtn">moreAction</i>
                                                                </span>
                                                            </div>
                                                            <textarea id="Cause{{SoHeaderIndex}}" type="text" class="textarea-message-box bp-input-text" ng-show="displayCauseConcernCorrectionInput(SoHeaderIndex, 'ManualCause') || M_CO.toDisplayInput[SoHeaderIndex] == 'ManualCause'" ng-model="soHeader.SOInfo.NewCause" ng-blur="F_CO.addAndRemoveFromMultiSelect($event, $index, 'NewCause', 'ManualCause', 'Cause')"
                                                                ng-keydown="F_CO.addAndRemoveFromMultiSelect($event, $index, 'NewCause', 'ManualCause', 'Cause')"
                                                                placeholder="{{ 'Type_cause' | translate }}" rel="Cause" ng-disabled="M_CO.isServiceJobDisabled(SoHeaderIndex)" 
                                                                maxlength="{{F_CO.getCCCMaxLength(true, SoHeaderIndex, null, 'ManualCause')}}" ng-click="F_CO.setSoHeaderIndexForTextarea('Cause', SoHeaderIndex)" ng-class = "{'PT15' : soHeader.SOInfo.ManualCause.length == 0, 'text-height': !soHeader.SOInfo.NewCause }" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class = "col-xs-12">
                                                    <label class = "col-xs-12">{{ 'Label_Correction' | translate }}</label>
                                                    <div class="bp-multiselect" ng-class="{'bp-disabled': soHeader.IsDummyKit}" ng-click="F_CO.displayInput($event, $index, 'NewCorrection', 'ManualCorrection', 'Correction')">
                                                        <div ng-class="{'padding10': soHeader.SOInfo.KitHeaderCorrection.length > 0 || soHeader.SOInfo.ManualCorrection.length > 0, 'PB0': !(displayCauseConcernCorrectionInput(SoHeaderIndex, 'ManualCorrection') || M_CO.toDisplayInput[SoHeaderIndex] == 'ManualCorrection')}">
                                                            <div ng-repeat="correction in soHeader.SOInfo.ManualCorrection track by $index" ng-init="correctionIndex = $index" class="d-flex">
                                                                <textarea id="Correction{{SoHeaderIndex}}Tag{{correctionIndex}}" type="text" class="textarea-message-box bp-input-text MB10" ng-show="M_CO.editModeIndexMultiSelect['Correction'] === correctionIndex" 
                                                                   ng-model="soHeader.SOInfo.ManualCorrection[correctionIndex].Value" ng-blur="F_CO.updateMultiSelect($event,SoHeaderIndex, correctionIndex, 'ManualCorrection', 'Correction')"
                                                                   ng-keydown="F_CO.updateMultiSelect($event, SoHeaderIndex, correctionIndex, 'ManualCorrection', 'Correction')"
                                                                   ng-disabled="M_CO.isSOItemDisabled(SoHeaderIndex)" maxlength="{{F_CO.getCCCMaxLength(false, SoHeaderIndex, correctionIndex, 'ManualCorrection')}}" /> 
                                                                <span ng-class = "{'bg-coral-light2' : correction.IsDecline }" ng-click="F_CO.editMultiselectTag($event,'ManualCorrection','Correction',SoHeaderIndex,correctionIndex)" ng-show="M_CO.editModeIndexMultiSelect['Correction'] != correctionIndex"> 
                                                                {{correction.Value}}
                                                                <i ng-class = "{'icon_fill_coral' : correction.IsDecline }"   ng-if="!M_CO.isServiceJobDisabled(SoHeaderIndex)"  ng-click = "F_CO.showCCCNflyout($event,$index, SoHeaderIndex, 'ManualCorrection','Correction',correction.IsDecline)" class="bp-icons bp-font-15 bp-blue-font LIDeleteBtn">moreAction</i>
                                                                </span>
                                                            </div>
                                                            <textarea id="Correction{{SoHeaderIndex}}" type="text" class="textarea-message-box bp-input-text" ng-show="displayCauseConcernCorrectionInput(SoHeaderIndex, 'ManualCorrection') || M_CO.toDisplayInput[SoHeaderIndex] == 'ManualCorrection'" 
                                                                ng-model="soHeader.SOInfo.NewCorrection" ng-blur="F_CO.addAndRemoveFromMultiSelect($event, $index, 'NewCorrection', 'ManualCorrection', 'Correction')"
                                                                ng-keydown="F_CO.addAndRemoveFromMultiSelect($event, $index, 'NewCorrection', 'ManualCorrection', 'Correction')"
                                                                placeholder="{{ 'Type_correction' | translate }}" rel="Correction" ng-disabled="M_CO.isServiceJobDisabled(SoHeaderIndex)" 
                                                                maxlength="{{F_CO.getCCCMaxLength(true, SoHeaderIndex, null, 'ManualCorrection')}}" ng-click="F_CO.setSoHeaderIndexForTextarea('Correction', SoHeaderIndex)" ng-class = "{'PT15' : soHeader.SOInfo.ManualCorrection.length == 0, 'text-height': !soHeader.SOInfo.NewCorrection }" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class = "col-xs-6 bp-odometer-box">
                                                    <label class = "col-xs-12">{{ 'Odometer_on_arrival' | translate }}</label>
                                                    <numbers-only 
                                                        class-value="bp-input-text"
                                                        placeHolderValue="{{ 'Please_select' | translate }}"
                                                        precision-length="1"
                                                        blur-value="F_CO.saveOdometerValue($index, 'OdometerIn')"
                                                        input-model-value="soHeader.SOInfo.OdometerIn" 
                                                        disabled-value="M_CO.isSOItemDisabled(SoHeaderIndex)"/>
                                                </div>
                                                <div class = "col-xs-6">
                                                    <label class = "col-xs-12">{{ 'Odometer_on_departure' | translate }}</label>
                                                    <numbers-only 
                                                        class-value="bp-input-text"
                                                        placeHolderValue="{{ 'Please_select' | translate }}"
                                                        precision-length="1"
                                                        blur-value="F_CO.saveOdometerValue($index, 'OdometerOut')"
                                                        input-model-value="soHeader.SOInfo.OdometerOut"
                                                        focus-value = "F_CO.saveServiceJobOdometerOutValue($index)" 
                                                        disabled-value="M_CO.isSOItemDisabled(SoHeaderIndex)"/>
                                                </div>
                                                <a ng-click = "F_CO.openCloseDetailSectionAndAddItemSection($index,$event)" 
                                                ng-if = "(soHeader.SOInfo.UnitName && soHeader.SOInfo.ManualConcern.length >0 && soHeader.SOInfo.TransactionType != 'Third-Party') || 
                                                            (soHeader.SOInfo.UnitName && soHeader.SOInfo.ManualConcern.length >0 && 
                                                            soHeader.SOInfo.TransactionType == 'Third-Party' && soHeader.SOInfo.ProviderName)" class="pull-right bp-blue-font continue-text">Continue and add items</a>
                                                
                                            </div>
                                            
                                            <div class="select-customer-section unit internal-service-unit" ng-if="M_CO.isReplaceUnit == true">
                                                <div class="left">
                                                    <label>{{ 'Search_for_a_stock_unit' | translate }}</label>
                                                    <autocompletev2 ng-if="!M_CO.IsWebComponentSTAEnabled" id="autocompletev2SKUInternalServiceId"
                                                        template-name="Entity"
                                                        section-name="Stock Unit"
                                                        soheader-index="{{SoHeaderIndex}}"
                                                        section-id="ServiceJob{{SoHeaderIndex}}"
                                                        is-disabled="M_CO.isServiceJobDisabled($index)" />
                                                    <div class="searchToAdd" ng-if="M_CO.IsWebComponentSTAEnabled">
                                                        <bpda-search-to-add id="autocompletev2SKUInternalServiceId{{SoHeaderIndex}}" 
                                                            template-name="Entity"
                                                            section-name="Stock Unit"
                                                            soheader-index="{{SoHeaderIndex}}"
                                                            section-id="ServiceJob{{SoHeaderIndex}}"
                                                            hide-filter-button="true"
                                                            placeholder="Search to add"
                                                            ng-disabled="M_CO.isServiceJobDisabled($index)"
                                                        >
                                                        </bpda-search-to-add>
                                                    </div>
                                                </div>
                                                <div class="right" ng-class="{'new-sta': M_CO.IsWebComponentSTAEnabled}">
                                                    <button class="bp-btn bp-btn-normal" ng-click="M_CO.isReplaceUnit = false">{{ 'Cancel_Label' | translate }}</button>
                                                </div>
                                            </div>
                                            
                                        
                                        </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Job Details accordian end here -->
                                <!-- Job Items accordian start here -->
                                <div class="bp-inner-accordian open" ng-class="{'bp-inner-accordian-opened': M_CO.expandedInnerSectionName == 'ServiceJob{{$index}}_JobItems'}">
                                    <div class="inner-accordian-header col-md-12" ng-click = "F_CO.expandOrCollapseInnerSection('ServiceJob'+$index+'_JobItemsSectionId', 'ServiceJob'+$index+'_JobItems', SoHeaderIndex)">
                                        <div class="inner-accordian-header-left">
                                            <h2 class="accordian-left-details">{{ 'Job_items' | translate }}
                                                <span class="badge" ng-if="soHeader.SOGridItems.length > 0 && M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_JobItems'">{{soHeader.SOGridItems.length}}</span>
                                            </h2>
                                            <div class="show-onclse" ng-if="soHeader.SOGridItems.length == 0 && M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_JobItems'">
                                                {{ 'Start_building_your_order_by_adding_parts_or_labor' | translate }}
                                            </div>
                                            
                                        </div>
                                        <div class="accordian-right-details">
                                            <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_JobItems'">
                                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowDown</i>
                                            </a>
                                            <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_JobItems'">
                                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowUp</i>
                                            </a>    
                                            <div class="accordian-right-details-text">
                                                <p class="right-text required" ng-if="soHeader.SOGridItems.length == 0 && M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_JobItems'">
                                                    <span>{{ 'Part_Object_Status_Required' | translate }}</span> 
                                                    <span class="req-icon">!</span>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="inner-accordian-body bp-light-gray4 col-md-12 bp-collapse-div-transition ServiceJobLineItemWrapper"  
                                        id="ServiceJob{{$index}}_JobItemsSectionId"
                                        ng-class="{'bp-expand-div-transition': M_CO.expandedInnerSectionName == 'ServiceJob{{$index}}_JobItems'}">
                                        <div class="expandableContainer">
                                            <div class="table-responsive" ng-if="soHeader.SOGridItems.length != 0" ng-class = "{'PB67' : M_CO.coHeaderRec.OrderStatus === 'Closed' || soHeader.SOInfo.WorkStatus == 'Invoiced'}">
                                                <table class = "bp-editable-table SOJobItemsGrid">
                                                    <col width="5%"  />
                                                    <col width="20%" />
                                                    <col width="15%" />
                                                    <col width="15%" />
                                                    <col width="15%" />
                                                    <col width="15%" />
                                                    <col width="15%" />
                                                    <thead>
                                                        <tr>
                                                            <th></th>
                                                            <th class = "bp-text-uppercase">{{ 'Item_description' | translate }}</th>
                                                            <th class = "bp-text-uppercase text-center">{{ 'Qty_needed' | translate }}</th>
                                                            <th class = "bp-text-uppercase text-center">{{ 'Label_Status' | translate }}</th>
                                                            <th class = "bp-text-uppercase text-center">{{ 'Label_Price' | translate }}</th>
                                                            <th class = "bp-text-uppercase text-center">{{ 'Label_Subtotal' | translate }}</th>
                                                            <th class = "bp-text-uppercase"></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody ng-repeat="SOKHitem in soHeader.SOGridItems" ng-init="SoKitHeaderIndex = $index"> <!-- ng-if="!SOKHitem.Id"  -->
                                                        
                                                        <!-- Start: Kit Header Row -->
                                                        <tr ng-if="SOKHitem.Id" class = "bp-expanded-deletable-div-transition kitHeaderTr" 
                                                            id = "SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}"
                                                            ng-click="F_CO.editLineItem(SOKHitem, 'ServiceJob', SoHeaderIndex, SoKitHeaderIndex)" ng-class="{'bp-tr-hover': !SOKHitem.isAsyncActionInProgress, 'dummy-animation': SOKHitem.isAsyncActionInProgress}">
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                'bp-disabled': M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex} }' 
                                                                    && !F_CO.displayEditBtnOnLineItem('SO', 'KHItem', SoHeaderIndex, SoKitHeaderIndex) || soHeader.SOInfo.ClaimStatus == 'Approved' }">
                                                                <i class="bp-icons bp-font-25 bp-grey-font stroke-3 itemSvg tableItem">kit</i>
                                                            </td>
                                                            <td class="boldText" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                'bp-disabled': M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}' 
                                                                    && !F_CO.displayEditBtnOnLineItem('SO', 'KHItem', SoHeaderIndex, SoKitHeaderIndex) || soHeader.SOInfo.ClaimStatus == 'Approved'  }">
                                                                <div class="liItemDesc_setTextEllipsis"> <!-- InnerFlexContainer -->
                                                                    <span class ="bp-blue-font">{{::SOKHitem.ItemDescription}}</span> <!-- setTextEllipsis -->
                                                                </div>
                                                            </td>
                                                            <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                'bp-disabled': M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}' 
                                                                    && !F_CO.displayEditBtnOnLineItem('SO', 'KHItem', SoHeaderIndex, SoKitHeaderIndex) || soHeader.SOInfo.ClaimStatus == 'Approved' }">
                                                             </td>
                                                            <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                'bp-disabled': M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}' 
                                                                    && !F_CO.displayEditBtnOnLineItem('SO', 'KHItem', SoHeaderIndex, SoKitHeaderIndex) || soHeader.SOInfo.ClaimStatus == 'Approved'}">
                                                             </td>
                                                            <td ng-if="SOKHitem.isAsyncActionInProgress" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}'}"><div class="dummy-tag-name"></div></td>
                                                            <td ng-if="SOKHitem.isAsyncActionInProgress" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}'}"><div class="dummy-tag-name"></div></td>
                                                            <td ng-if="!SOKHitem.isAsyncActionInProgress" class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                'bp-disabled': M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}' 
                                                                    && !F_CO.displayEditBtnOnLineItem('SO', 'KHItem', SoHeaderIndex, SoKitHeaderIndex) || soHeader.SOInfo.ClaimStatus == 'Approved'}">
                                                                <span ng-if = "M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex"
                                                                    ng-class="{'fixedPriceWithLock': (SOKHitem.IsFixedPrice || SOKHitem.isFixedKitHeaderSO), 'pull-left': (SOKHitem.IsFixedPrice || SOKHitem.isFixedKitHeaderSO)}">{{::SOKHitem.FixedPrice | currency}}</span>
                                                                <span ng-if = "M_CO.editLineItem == 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex">
                                                                    <numbers-only id-value = "ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_Price"
                                                                        class-value = "bp-input-text inTimeEdit timeField text-center"
                                                                        input-model-value = "SOKHitem.FixedPrice" 
                                                                        include-negative = "false"
                                                                        include-zero = "true"
                                                                        precision-length = "2"
                                                                        blur-value = "F_CO.updateSOKHItem('ServiceJob', SoHeaderIndex, SoKitHeaderIndex, $event, $index, '_Price')"
                                                                        input-keydown-value="F_CO.setFlagOnTabForBlurHandling($event)"/>
                                                                </span>
                                                                <i class="bp-icons bp-font-12 bp-grey-font pull-left lockSvg" ng-if="(SOKHitem.IsFixedPrice) && (M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index)">lock</i>
                                                                <i class="bp-icons bp-font-12 bp-grey-font pull-left lockSvg" ng-if="(SOKHitem.isFixedKitHeaderSO) && (M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex)">lock</i>
                                                            </td>
                                                            <td ng-if="!SOKHitem.isAsyncActionInProgress" class="text-center boldText" 
                                                                ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                'bp-disabled': M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}' 
                                                                    && !F_CO.displayEditBtnOnLineItem('SO', 'KHItem', SoHeaderIndex, SoKitHeaderIndex) || soHeader.SOInfo.ClaimStatus == 'Approved'}">
                                                                <span>{{::SOKHitem.FixedPrice | currency}}</span>
                                                            </td>
                                                            <td ng-if="SOKHitem.IsDummyKit" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}'}"><div class="dummy-tag-name"></div></td>
                                                            <td ng-if="!SOKHitem.IsDummyKit" class="partInvIconAdjustment" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                'bp-disabled': (M_CO.isServiceJobDisabled(SoHeaderIndex) || soHeader.SOInfo.ClaimStatus == 'Approved') || (soHeader.SOInfo.DealId && (F_CO.isDealInvoiced() || F_CO.isDealApproved()))}" >
                                                                 <span data-toggle="tooltip" title="More actions" ng-if="!M_CO.isServiceJobDisabled(SoHeaderIndex)"
                                                                    id="ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_deleteBtn">
                                                                    <i ng-if="M_CO.coHeaderRec.COType != 'Internal Service' && !soHeader.SOInfo.DealId" class="bp-icons bp-font-15 bp-blue-font LIDeleteBtn"
                                                                        ng-click="F_CO.openMoveLineItemModalWindowAction(soHeader.SOInfo.Id, SOKHitem.Id, SOKHitem.IsServiceKit); F_CO.openDeleteConfirmationPopupForSOLineItem(SoHeaderIndex, soHeader.SOInfo.Id, SoKitHeaderIndex, SOKHitem.Id, '', '', 'Service Job', true,$event);">moreAction</i>
                                                                    <i ng-if="(M_CO.coHeaderRec.COType == 'Internal Service' ) || (soHeader.SOInfo.DealId)" class="bp-icons bp-blue-font bp-font-18 LIDeleteBtn"
                                                                        ng-click="F_CO.openDeleteConfirmationPopupForSOLineItem(SoHeaderIndex, soHeader.SOInfo.Id, SoKitHeaderIndex, SOKHitem.Id, '', '', 'Service Job', false, $event);">delete</i>
                                                                </span>
                                                            </td>
                                                        </tr>
                                                        <!-- End: Kit Header Row -->
                                                        
                                                        <!-- Start: Kit Line Items Row with Kit Header -->
                                                        <tr class = "bp-expanded-deletable-div-transition kitLITr" id = "SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}"
                                                            ng-click="F_CO.editLineItem(SOLI, 'ServiceJob', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex, '', (SOLI.IsPart && !SOLI.IsNonInventoryPart))"
                                                            ng-repeat-start="SOLI in SOKHitem.SOLIList" ng-init="SoLIIndex = $index" ng-if="SOKHitem.Id"
                                                            ng-class="{'bp-tr-hover': !SOKHitem.isAsyncActionInProgress, 'dummy-animation': SOKHitem.isAsyncActionInProgress,'no-border':SOKHitem.Id && M_CO.supersededParts[SOLI.PartId] != null}">
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                    'bp-disabled': M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' 
                                                                        && !F_CO.displayEditBtnOnLineItem('SO', 'KitLI', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex) || soHeader.SOInfo.ClaimStatus == 'Approved' }">
                                                            </td>
                                                            <td class="boldText" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                    'bp-disabled': M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index} }' 
                                                                        && !F_CO.displayEditBtnOnLineItem('SO', 'KitLI', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex) || soHeader.SOInfo.ClaimStatus == 'Approved'}">
                                                                <div class="liItemDesc_setTextEllipsis" 
                                                                    ng-if="(M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index) || ((SOLI.IsPart && !SOLI.IsNonInventoryPart) || (F_CO.isDealApproved() && soHeader.SOInfo.DealId))"> <!-- InnerFlexContainer -->
                                                                    <i class="bp-icons pull-left bp-font-23 bp-grey-font stroke-3 itemSvg kitItemSvg" ng-if="SOLI.IsPart">part</i>
                                                                    <i class="bp-icons pull-left bp-font-23 bp-grey-font stroke-3 itemSvg kitItemSvg" ng-if="SOLI.IsLabour">labor</i>
                                                                    <i class="bp-icons pull-left bp-font-23 bp-grey-font stroke-3 itemSvg kitItemSvg" ng-if="SOLI.IsFee">fee</i>
                                                                    
                                                                    <span class="bp-blue-font" ng-class="{'bp-blue-hover' : SOLI.IsPart}" 
                                                                        id="ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_itemDesc"
                                                                        ng-click="F_CO.moveToState('ViewPart',{Id:SOLI.PartId},(SOLI.IsPart && !SOLI.IsNonInventoryPart))">{{::SOLI.ItemCode}} - {{SOLI.ItemDescription}}</span> <!--  class ="setTextEllipsis"; {{SOLI.ItemDesc}}-->
                                                                </div>
                                                                
                                                                <div class="liItemDesc" ng-if="(M_CO.editLineItem == 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index) && ((!SOLI.IsPart || (SOLI.IsPart && SOLI.IsNonInventoryPart)) && (!F_CO.isDealApproved() || !soHeader.SOInfo.DealId))">
                                                                    <i class="bp-icons pull-left bp-font-23 bp-grey-font stroke-3 itemSvg kitItemSvg" ng-if="SOLI.IsPart">part</i>
                                                                    <i class="bp-icons pull-left bp-font-23 bp-grey-font stroke-3 itemSvg kitItemSvg" ng-if="SOLI.IsLabour">labor</i>
                                                                    <i class="bp-icons pull-left bp-font-23 bp-grey-font stroke-3 itemSvg kitItemSvg" ng-if="SOLI.IsFee">fee</i>
                                                                        
                                                                    <span class="editableDescInput editableKitDescInput" ng-class="{'focusInput': setBotrderOnSpan}">
                                                                        <span class="itemCode">{{::SOLI.ItemCode}} - </span>
                                                                        <input id = "ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_itemDesc"
                                                                            class = "bp-input-text text-center"
                                                                            ng-focus="setBotrderOnSpan = true;"
                                                                            ng-blur="setBotrderOnSpan = false; F_CO.updateSOLineItem('ServiceJob', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex, $event);"
                                                                            ng-keydown="F_CO.setFlagOnTabForBlurHandling($event)"
                                                                            type="text" ng-model = "SOLI.ItemDescription"
                                                                            maxlength = "255"/>
                                                                    </span>
                                                                </div>
                                                            </td>
                                                            <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                    'bp-disabled': M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' 
                                                                        && !F_CO.displayEditBtnOnLineItem('SO', 'KitLI', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex) || soHeader.SOInfo.ClaimStatus == 'Approved'}">
                                                                <span>{{::SOLI.QtyNeeded}}</span>
                                                            </td>
                                                            <td class="text-center bp-bold-font" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                    'bp-disabled': M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' 
                                                                        && !F_CO.displayEditBtnOnLineItem('SO', 'KitLI', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex) || soHeader.SOInfo.ClaimStatus == 'Approved'}">
                                                                        <span ng-if="M_CO.coHeaderRec.OrderStatus != 'Quote' && M_CO.SOHeaderList[SoHeaderIndex].SOInfo.CommitOrderControls != 'Uncommitted' && SOLI.IsPart && SOLI.Status !== 'Ordered' && !SOLI.IsNonInventoryPart && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo
                                                                     && (SOLI.StockCommited == 0 && SOLI.QtyOrder > 0)" class="bp-red-font">{{ 'Part_Object_Status_Required' | translate }}</span>
                                                                <span ng-if="M_CO.coHeaderRec.OrderStatus != 'Quote' && M_CO.SOHeaderList[SoHeaderIndex].SOInfo.CommitOrderControls != 'Uncommitted' && SOLI.IsPart && !SOLI.IsNonInventoryPart && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo 
                                                                    && (SOLI.StockCommited > 0 && SOLI.QtyOrder > 0)" class="bp-orange-font">{{ 'Part_Object_Status_Multiple' | translate }}</span>
                                                                
                                                                <!-- Start: Status for kit LI - Inventory part -->
                                                                <span ng-if="(SOLI.IsPart && !SOLI.IsNonInventoryPart && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo && (M_CO.coHeaderRec.OrderStatus === 'Quote' || M_CO.SOHeaderList[SoHeaderIndex].SOInfo.CommitOrderControls === 'Uncommitted' || ((SOLI.Status ==='Ordered' && SOLI.StockCommited === 0 ) || !(SOLI.StockCommited >= 0 && SOLI.QtyOrder > 0)))) " 
                                                                    ng-class = "{'bp-green-font': SOLI.Status == 'In Stock', 'bp-green-dark-font': soHeader.SOInfo.WorkStatus == 'Invoiced',
                                                                    'bp-red-font': (SOLI.Status == 'Required' || SOLI.Status === 'RETURN' || SOLI.Status === 'Oversold'),
                                                                    'bp-coral-light-bg': (SOLI.Status === 'RETURN' || SOLI.Status === 'Oversold'),
                                                                    'bp-status-bubble': (SOLI.Status === 'RETURN' || SOLI.Status === 'Oversold'),
                                                                    'bp-orange-font': (SOLI.Status === 'Ordered'),
                                                                    'bp-first-letter-capitalize': (SOLI.Status === 'RETURN' || SOLI.Status === 'Oversold')}">{{::SOLI.Status}}</span>
                                                                <!-- End: Status for kit LI - Inventory part -->
                                                                
                                                                <!-- Start: Status for kit LI - Non Inventory part (For kit LI qty can't be edited so can't be -ve and can't be oversold for non inventory part, hence no handling for 'Return' & 'Oversold' status)-->
                                                                <span ng-if="SOLI.IsPart && SOLI.IsNonInventoryPart" 
                                                                    ng-class = "{'bp-green-font': soHeader.SOInfo.WorkStatus != 'Invoiced','bp-green-dark-font': soHeader.SOInfo.WorkStatus == 'Invoiced'}">{{soHeader.SOInfo.WorkStatus == "Invoiced"  ? "Invoiced" : "In Stock" }}</span>
                                                                <!-- End: Status for kit LI - Non Inventory part (For kit LI qty can't be edited so can't be -ve and can't be oversold for non inventory part, hence no handling for 'Return' & 'Oversold' status)-->
                                                                
                                                               <span ng-if="!SOLI.IsPart && !SOLI.IsSublet" ng-class = "{'bp-cyan-font': soHeader.SOInfo.WorkStatus != 'Invoiced','bp-green-dark-font': soHeader.SOInfo.WorkStatus == 'Invoiced'}">{{soHeader.SOInfo.WorkStatus == "Invoiced"  ? "Invoiced" : "Ready" }}</span>
                                                                <span ng-if="SOLI.IsSublet" ng-class = "{'bp-cyan-font': soHeader.SOInfo.WorkStatus != 'Invoiced','bp-green-dark-font': soHeader.SOInfo.WorkStatus == 'Invoiced'}">{{SOLI.Status}}</span>
                                                            </td>
                                                            <td ng-if="SOKHitem.isAsyncActionInProgress" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"><div class="dummy-tag-name"></div></td>
                                                            <td ng-if="SOKHitem.isAsyncActionInProgress" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"><div class="dummy-tag-name"></div></td>
                                                            <td ng-if="!SOKHitem.isAsyncActionInProgress" class="text-center price-edit" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                    'bp-disabled': M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' 
                                                                        && !F_CO.displayEditBtnOnLineItem('SO', 'KitLI', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex) || soHeader.SOInfo.ClaimStatus == 'Approved'}">
                                                                <span ng-if = "(M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index
                                                                                || !GroupOnlyPermissions['Override price'].enabled || SOLI.IsFixedPrice)"
                                                                ng-class="{'fixedPriceWithLock': (SOLI.IsFixedPrice || SOLI.isFixedKitHeaderLineItemSO), 'pull-left': (SOLI.IsFixedPrice || SOLI.isFixedKitHeaderLineItemSO)}">{{SOLI.KitPrice | currency}}</span>
                                                                <span ng-if = "(M_CO.editLineItem == 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index
                                                                                && GroupOnlyPermissions['Override price'].enabled && !SOLI.IsFixedPrice)">
                                                                    <numbers-only id-value = "ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_Price"
                                                                        class-value = "bp-input-text inTimeEdit timeField text-center"
                                                                        input-model-value = "SOLI.KitPrice" 
                                                                        include-negative = "false"
                                                                        include-zero = "true"
                                                                        precision-length = "2"
                                                                        blur-value = "F_CO.updateSOLineItem('ServiceJob', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex, $event, '_Price')"
                                                                        input-keydown-value="F_CO.setFlagOnTabForBlurHandling($event)"/>
                                                                </span>
                                                                
                                                                <i class="bp-icons bp-font-12 bp-grey-font pull-left lockSvg" ng-if="(SOLI.IsFixedPrice) && (M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index)">lock</i>
                                                                <i class="bp-icons bp-font-12 bp-grey-font pull-left lockSvg" ng-if="(SOLI.isFixedKitHeaderLineItemSO) && (M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index)">lock</i>

                                                                <span class="price-variance-warning" ng-if="(M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index || !GroupOnlyPermissions['Override price'].enabled || SOLI.IsFixedPrice) && SOLI.Status == 'Required' && M_CO.IsForeignExchangeCostingEnabled && SOLI.IsForeignVendor">
                                                                    <span data-toggle="tooltip" data-original-title="{{'Special_ordering_a_foreign_part_click_to_learn_more' | translate}}" data-html="true">
                                                                        <i id = "SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_warning" ng-click="F_CO.openPriceVarianceWarningModal($event, 'ServiceJob', SoKitHeaderIndex, $index, SoHeaderIndex)" class="bp-icons bp-tart-orange-font bp-font-14">warningFilled</i>
                                                                    </span>
                                                                </span>
                                                                <span ng-if="(M_CO.editLineItem == 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index && GroupOnlyPermissions['Override price'].enabled && !SOLI.IsFixedPrice && SOLI.Status == 'Required' && M_CO.IsForeignExchangeCostingEnabled && SOLI.IsForeignVendor)">
                                                                    <span class="warning-icon" data-toggle="tooltip" data-original-title="{{'Special_ordering_a_foreign_part_click_to_learn_more' | translate}}" data-html="true">
                                                                        <i id = "SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_warning" ng-click="F_CO.openPriceVarianceWarningModal($event, 'ServiceJob', SoKitHeaderIndex, $index, SoHeaderIndex)" class="bp-icons bp-tart-orange-font bp-font-14">warningFilled</i>
                                                                    </span>
                                                                </span>
                                                            </td>
                                                            <td ng-if="!SOKHitem.isAsyncActionInProgress" class="text-center boldText" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                    'bp-disabled': M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' 
                                                                        && !F_CO.displayEditBtnOnLineItem('SO', 'KitLI', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex) || soHeader.SOInfo.ClaimStatus == 'Approved'}">
                                                                <span ng-if="!SOLI.SubTotal" ng-class="{'bp-red-font': (SOLI.QtyNeeded * SOLI.KitPrice) < 0}">{{(SOLI.QtyNeeded * SOLI.KitPrice) | currency}} <span ng-if = "SOLI.IsVariance">~</span></span>
                                                                <span ng-if="SOLI.SubTotal" ng-class="{'bp-red-font': SOLI.SubTotal < 0}">{{::SOLI.SubTotal | currency}}<span ng-if = "SOLI.IsVariance">~</span></span>
                                                            </td>
                                                            <td ng-if="SOLI.IsDummyLineItem" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"><div class="dummy-tag-name"></div></td>
                                                            <td ng-if="!SOLI.IsDummyLineItem" class="partInvIconAdjustment" ng-class="{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}',
                                                                'bp-disabled': (SOLI.Status == 'Invoiced' || soHeader.SOInfo.ClaimStatus == 'Approved') }">
                                                                 <i class="bp-icons bp-blue-font bp-font-20 bp-chevron bp-cursor-pointer" data-toggle="tooltip" title="{!$Label.More_options}" 
                                                                   ng-class="{'bp-chevron-up' : M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo, 'bp-chevron-down' : !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo}"
                                                                   ng-if="SOLI.IsPart && !SOLI.IsNonInventoryPart && SOLI.Status != 'Invoiced'"
                                                                   ng-click="F_CO.showHideKitItemInfo(SoHeaderIndex, SoKitHeaderIndex, $index)"
                                                                   id="ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_moreOptions">expandBadge</i>
                                                            </td>
                                                        </tr>
                                                        <tr ng-if="SOKHitem.Id && M_CO.supersededParts[SOLI.PartId] != null && SOLI.Status != 'Invoiced'">
                                                            <td></td>
                                                            <td colspan="8">
                                                                <div class="show_Availableline text-uppercase bgYellow"><span class="logo-icon">i</span>{{ 'part_has_been_superseded_to' | translate }} : {{M_CO.supersededParts[SOLI.PartId].partNumber}}</div>
                                                             </td>
                                                             <td></td>
                                                        </tr>
                                                        
                                                        <!-- Start: Special Order Section for Kit Line Item -->
                                                        <tr class="bp-expanded-deletable-div-transition itemOrderInfoTR" id="SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_StockCommitted" 
                                                          ng-if="(SOLI.IsPart && !SOLI.IsNonInventoryPart && M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo) && !M_CO.showQuote && M_CO.SOHeaderList[SoHeaderIndex].SOInfo.CommitOrderControls != 'Uncommitted'">
                                                         <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                        <td class="boldText" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}">
                                                            <div class="liItemDesc_setTextEllipsis bp-dark-grey2-font">
                                                                <span>{{' Committed_from_the_stock' | translate }}</span>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}">
                                                            <span ng-if = "M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index || (F_CO.isDealApproved() && soHeader.SOInfo.DealId)">{{SOLI.StockCommited}}</span>
                                                            <span ng-if = "M_CO.editLineItem == 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index && (!F_CO.isDealApproved() || !soHeader.SOInfo.DealId)">
                                                                <numbers-only id-value="ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_StockCommited"
                                                                    class-value="bp-input-text inTimeEdit timeField text-center"
                                                                    min-value="0"
                                                                    max-value="{{F_CO.getMaxCommitedValue(SOLI)}}"
                                                                    input-model-value="SOLI.StockCommited" 
                                                                    include-negative="false"
                                                                    include-zero="true"
                                                                    precision-length="2"
                                                                    force-precision-length="false"
                                                                    blur-value = "F_CO.updateSOLineItem('ServiceJob', SoHeaderIndex, SoKitHeaderIndex, $index, $event, '_StockCommited')"
                                                                    input-keydown-value="F_CO.setFlagOnTabForBlurHandling($event)"
                                                                    input-keyup-value="F_CO.calculateSpecialOrderValue('ServiceJobKit', 'StockCommited', SoHeaderIndex, SoKitHeaderIndex, $index, (SOLI.IsPart && !SOLI.IsNonInventoryPart));"/>
                                                            </span> <!-- max-value="{{SOLI.QtyNeeded}}" -->
                                                        </td>
                                                        <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}">
                                                            <span class="bp-green-font bp-bold-font">{{ 'Part_Object_Status_InStock' | translate }}</span>
                                                        </td>
                                                         <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                        <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                        <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                        </tr>
                                                        <tr class="bp-expanded-deletable-div-transition itemOrderInfoTR" id="SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_QtyOrder"
                                                        ng-if="(SOLI.IsPart && !SOLI.IsNonInventoryPart && M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo) && !M_CO.showQuote && M_CO.SOHeaderList[SoHeaderIndex].SOInfo.CommitOrderControls != 'Uncommitted'">
                                                        <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                        <td class="boldText" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}">
                                                            <div class="liItemDesc_setTextEllipsis bp-red-font">
                                                                <span>{{ 'Quantity_to_order' | translate }}</span>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}">
                                                            <span>{{SOLI.QtyOrder}}</span>
                                                        </td>
                                                        <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}">
                                                            <span class="bp-red-font bp-bold-font" ng-if="SOLI.Status !== 'Ordered'">{{ 'Part_Object_Status_Required' | translate }}</span>
                                                            <span class="bp-orange-font bp-bold-font" ng-if="SOLI.Status === 'Ordered'">{{ 'Label_Ordered' | translate }}</span>
                                                        </td>
                                                        <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                        <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                        <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                        </tr>
                                                        <tr class="inventory-status-liItem" id="SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_AvailableInventory" 
                                                            ng-repeat-end="ng-repeat-end" 
                                                            ng-if="SOKHitem.Id && SOLI.IsPart && !SOLI.IsDummyLineItem  && !SOLI.IsNonInventoryPart && (M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo || M_CO.editLineItem == 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index) && soHeader.SOInfo.WorkStatus != 'Complete'">
                                                            <td colspan="7" class="PN0">
                                                                <table class="table-extra-for-button">
                                                                    <col width="40%" ng-show="(!(SOLI.QtyOrder > 0 && SOLI.Status !== 'Ordered' && SOLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) || !((M_CO.isBRPEnabled && SOLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(SOLI.VendorId)) || !M_CO.isMeshEnabledOrg)" />
                                                                    <col width="34%" ng-show="((SOLI.QtyOrder > 0 && SOLI.Status !== 'Ordered' && SOLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) && ((M_CO.isBRPEnabled && SOLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(SOLI.VendorId)) && M_CO.isMeshEnabledOrg)" />
                                                                    <col width="" />
                                                                    <col width="10%" ng-show="(!(SOLI.QtyOrder > 0 && SOLI.Status !== 'Ordered' && SOLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) || !((M_CO.isBRPEnabled && SOLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(SOLI.VendorId)) || !M_CO.isMeshEnabledOrg)" />
                                                                    <col width="1%" ng-show="((SOLI.QtyOrder > 0 && SOLI.Status !== 'Ordered' && SOLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) && ((M_CO.isBRPEnabled && SOLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(SOLI.VendorId)) && M_CO.isMeshEnabledOrg)" />
                                                                    <tbody>
                                                                        <tr class="inventory-status-liItem" ng-class="{ 'liItem-bg-white': ((SOLI.ActualAvailableParts - SOLI.QtyNeeded) > 0 && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo), 'liItem-bg-red': (SOLI.ActualAvailableParts - SOLI.QtyNeeded <= 0 && SOLI.ActualAvailableParts - SOLI.StockCommited <= 0), 'liItem-bg-orange': (SOLI.ActualAvailableParts - SOLI.StockCommited > 0) && M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo }">
                                                                            <td class="helper-text-label">
                                                                                <span ng-if="(SOLI.ActualAvailableParts - SOLI.StockCommited) > 0 && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo" class="label-text"><span class="liItem-text-strong"> {{SOLI.AvailablePart}} </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{SOLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                                                <span ng-if="(SOLI.ActualAvailableParts - SOLI.QtyNeeded <= 0 && SOLI.ActualAvailableParts - SOLI.StockCommited <= 0)" class="label-text red"><span class="liItem-text-strong">0 </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{SOLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                                                <span ng-if="(SOLI.ActualAvailableParts - SOLI.StockCommited > 0) && M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo" class="label-text orange"><span class="liItem-text-strong"> {{SOLI.ActualAvailableParts - SOLI.StockCommited}} </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{SOLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                                            </td>
                                                                            <td class="text-left liItemBtn" id="SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_inventoryButtons">
                                                                                <button ng-if="(SOLI.QtyOrder > 0 && SOLI.Status !== 'Ordered') && SOLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled" class="bp-btn bp-btn-normal table-extra-btn-placement" ng-click="F_CO.openReallocateModalWindow(SOLI, M_CO.COHeaderId, 'ServiceOrder', SoHeaderIndex)">{{ 'Allocate_on_order' | translate }}</button>
                                                                                <button class="bp-btn secondary-btn table-extra-btn-placement" ng-if="(M_CO.isBRPEnabled && SOLI.IsBRPPart)" ng-click="F_CO.openPartLocatorWindow(SOLI, 'ServiceOrder', SoHeaderIndex)" >{{ 'Vendor_Availability' | translate }}</button>
                                                                                <button class="bp-btn secondary-btn table-extra-btn-placement" ng-if="F_CO.displayVendorAvailabilityButton(SOLI.VendorId)" ng-click="F_CO.openVendorAvailabilityWindow(SOLI.PartId, 'ServiceOrder', SoHeaderIndex)" >{{ 'Vendor_Availability' | translate }} - {{SOLI.CassonsSOH}}</button>
                                                                                <span ng-if="M_CO.isMeshEnabledOrg && M_CO.collectiveInfo.externalId && SOLI.ItemCode" class="table-extra-btn-placement" ng-bind-html="F_CO.partLookupHtml(SOLI.ItemCode, 'ServiceSection', SoKitHeaderIndex)"></span>
                                                                                <a class="view-related-label" data-target="#SupersededPart" data-toggle="modal" ng-click="showAlternatePartDialog=true; F_CO.getAlternateParts(SOLI, soHeader.SOInfo.Id, 'ServiceOrder', SoHeaderIndex);">{{ 'View_related_parts' | translate }}</a>
                                                                            </td>
                                                                            <td class="helper-text-label" ng-class="{ 'bg-white': ((SOLI.ActualAvailableParts - SOLI.StockCommited) > 0 && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo), 'bg-red': (SOLI.ActualAvailableParts - SOLI.QtyNeeded <= 0 && SOLI.ActualAvailableParts - SOLI.StockCommited <= 0), 'bg-orange': (SOLI.ActualAvailableParts - SOLI.StockCommited > 0) && M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].SOLIList[$index].ShowItemInfo }"></td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                        <!-- End: Special Order Section for Kit Line Item -->
                                                        
                                                        <tr ng-if="SOKHitem.Id && (soHeader.SOInfo.DealId == undefined || soHeader.SOInfo.DealId == null || soHeader.SOInfo.DealId == '') && (soHeader.SOInfo.WorkStatus != 'Invoiced' && soHeader.SOInfo.WorkStatus != 'Complete')">
                                                            <td></td>
                                                            <td colspan="5" class="breakUpKit" 
                                                            ng-class = "{'bp-disabled': soHeader.SOInfo.ClaimStatus == 'Approved' || SOKHitem.isAsyncActionInProgress}">
                                                                <span ng-click="F_CO.splitSOKHItem(SoHeaderIndex, soHeader.SOInfo.Id, SOKHitem.Id)">{{ 'Break_up_kit' | translate }}</span>
                                                            </td>
                                                            <td class="bg-white"></td>
                                                        </tr>
                                                        <!-- End: Kit Line Items Row with Kit Header -->
                                                        
                                                        <!-- Start: Line Items Row without Kit Header -->
                                                        <tr class = "bp-expanded-deletable-div-transition" id = "SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}"
                                                            ng-repeat-start="SOLI in SOKHitem.SOLIList" ng-init="SoLIIndex = $index" ng-if="!SOKHitem.Id"
                                                            ng-click="F_CO.editLineItem(SOLI, 'ServiceJob', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex, '', (SOLI.IsPart && !SOLI.IsNonInventoryPart))"
                                                            ng-class="{'bp-tr-hover' : !SOKHitem.isAsyncActionInProgress,'dummy-animation':SOKHitem.isAsyncActionInProgress,'no-border':!SOKHitem.Id && M_CO.supersededParts[SOLI.PartId] != null}">
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}',
                                                                    'bp-disabled': (!F_CO.displayEditBtnOnLineItem('SO', 'NonKitLI', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex)
                                                                        && M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || soHeader.SOInfo.ClaimStatus == 'Approved') }">
                                                                <i class="bp-icons bp-font-25 bp-grey-font stroke-3 itemSvg tableItem" ng-if="SOLI.IsPart">part</i>
                                                                <i class="bp-icons bp-font-25 bp-grey-font stroke-3 itemSvg tableItem" ng-if="SOLI.IsLabour">labor</i>
                                                                <i class="bp-icons bp-font-25 bp-grey-font stroke-3 itemSvg tableItem" ng-if="SOLI.IsFee">fee</i>
                                                                <i class="bp-icons bp-font-25 bp-grey-font stroke-3 itemSvg tableItem" ng-if="SOLI.IsSublet">sublet</i>
                                                            </td>
                                                            <td class="boldText" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}',
                                                                    'bp-disabled': (!F_CO.displayEditBtnOnLineItem('SO', 'NonKitLI', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex)
                                                                        && M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || soHeader.SOInfo.ClaimStatus == 'Approved') }">
                                                                <div class="liItemDesc_setTextEllipsis"
                                                                    ng-if="(M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index) || ((SOLI.IsPart && !SOLI.IsNonInventoryPart) || (F_CO.isDealApproved() && soHeader.SOInfo.DealId))"> <!-- InnerFlexContainer -->
                                                                    <span class="bp-blue-font" ng-class="{'bp-blue-hover' : SOLI.IsPart}" 
                                                                        id="ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_itemDesc"
                                                                        ng-click="F_CO.moveToState('ViewPart',{Id:SOLI.PartId},(SOLI.IsPart && !SOLI.IsNonInventoryPart))">{{::SOLI.ItemCode}} - {{::SOLI.ItemDescription}}</span> <!--  class ="setTextEllipsis"; {{SOLI.ItemDesc}}-->
                                                                </div>
                                                                
                                                                <div class="liItemDesc" ng-if="(M_CO.editLineItem == 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index) && ((!SOLI.IsPart || (SOLI.IsPart && SOLI.IsNonInventoryPart)) && (!F_CO.isDealApproved() || !soHeader.SOInfo.DealId))">
                                                                    <span class="editableDescInput" ng-class="{'focusInput': setBotrderOnSpan}">
                                                                        <span class="itemCode">{{::SOLI.ItemCode}} - </span>
                                                                        <input id = "ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_itemDesc"
                                                                            class = "bp-input-text text-center"
                                                                            ng-focus="setBotrderOnSpan = true;"
                                                                            ng-blur="setBotrderOnSpan = false; F_CO.updateSOLineItem('ServiceJob', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex, $event);"
                                                                            ng-keydown="F_CO.setFlagOnTabForBlurHandling($event)"
                                                                            type="text" ng-model = "SOLI.ItemDescription"
                                                                            maxlength = "255"/>
                                                                    </span>
                                                                </div>
                                                            </td>
                                                            <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}',
                                                                    'bp-disabled': (!F_CO.displayEditBtnOnLineItem('SO', 'NonKitLI', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex)
                                                                        && M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || soHeader.SOInfo.ClaimStatus == 'Approved') }">
                                                                <span ng-show = "M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index || (F_CO.isDealApproved() && soHeader.SOInfo.DealId)
                                                                                || (!(SOLI.QtyNeeded >= 0) && SOLI.QtyNeeded !== '.' && !GroupOnlyPermissions['Returns']['enabled']) || (SOLI.IsSublet && SOLI.POStatus == 'On Order')">{{SOLI.QtyNeeded}}</span>
                                                                <span ng-show = "M_CO.editLineItem == 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index && (!F_CO.isDealApproved() || !soHeader.SOInfo.DealId)
                                                                    && (((!SOLI.IsSublet && SOLI.QtyNeeded >= 0) || (SOLI.IsSublet && (!SOLI.VONumber || SOLI.POStatus == 'Open'))) || (!(SOLI.QtyNeeded >= 0) && GroupOnlyPermissions['Returns']['enabled']) || (SOLI.QtyNeeded === '.' && !GroupOnlyPermissions['Returns']['enabled'])) ">
                                                                    <numbers-only id-value = "ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_QtyNeeded"
                                                                        class-value = "bp-input-text inTimeEdit timeField text-center"
                                                                        min-value = "{{F_CO.getMinAttributeValueBasedOnReturnFlag('SO', SoHeaderIndex,SOLI, null, SOLI.IsPart)}}"
                                                                        default-value = "1"
                                                                        input-model-value = "SOLI.QtyNeeded" 
                                                                        include-negative = "F_CO.allowReturn('SO', SoHeaderIndex,SOLI, null, SOLI.IsPart)"
                                                                        include-zero = "false"
                                                                        precision-length = "2"
                                                                        force-precision-length = "false"
                                                                        blur-value="F_CO.updateSOLineItem('ServiceJob', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex, $event, '_QtyNeeded')"
                                                                        input-keydown-value="F_CO.setFlagOnTabForBlurHandling($event)"
                                                                        input-keyup-value="F_CO.calculateSpecialOrderValue('ServiceJob', 'QtyNeeded', SoHeaderIndex, SoKitHeaderIndex, $index, (SOLI.IsPart && !SOLI.IsNonInventoryPart));"/>
                                                                </span>
                                                            </td>
                                                            <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}" ng-if="SOKHitem.isAsyncActionInProgress"><div class="dummy-tag-name"></div></td>
                                                            <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}" ng-if="SOKHitem.isAsyncActionInProgress"><div class="dummy-tag-name"></div></td>
                                                            <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}" ng-if="SOKHitem.isAsyncActionInProgress"><div class="dummy-tag-name"></div></td>
                                                            <td ng-if="!SOKHitem.isAsyncActionInProgress" class="text-center bp-bold-font" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}',
                                                                    'bp-disabled': (!F_CO.displayEditBtnOnLineItem('SO', 'NonKitLI', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex)
                                                                        && M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || soHeader.SOInfo.ClaimStatus == 'Approved') }">
                                                                <span ng-if="M_CO.coHeaderRec.OrderStatus != 'Quote' && M_CO.SOHeaderList[SoHeaderIndex].SOInfo.CommitOrderControls != 'Uncommitted' && SOLI.Status!=='Ordered' && SOLI.IsPart && !SOLI.IsNonInventoryPart && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo && (SOLI.StockCommited == 0 && SOLI.QtyOrder > 0)" class="bp-red-font">{{ 'Part_Object_Status_Required' | translate }}</span>
                                                                <span ng-if="M_CO.coHeaderRec.OrderStatus != 'Quote' && M_CO.SOHeaderList[SoHeaderIndex].SOInfo.CommitOrderControls != 'Uncommitted' && SOLI.IsPart && !SOLI.IsNonInventoryPart && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo && (SOLI.StockCommited > 0 && SOLI.QtyOrder > 0)" class="bp-orange-font">{{ 'Part_Object_Status_Multiple' | translate }}</span>
                                                                
                                                                <!-- Start: Status for Non kit LI - Inventory part -->
                                                                <span ng-if="(SOLI.IsPart && !SOLI.IsNonInventoryPart && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo && (M_CO.coHeaderRec.OrderStatus === 'Quote' || M_CO.SOHeaderList[SoHeaderIndex].SOInfo.CommitOrderControls === 'Uncommitted' || ((SOLI.Status === 'Ordered' && SOLI.StockCommited === 0 ) || !(SOLI.StockCommited >= 0 && SOLI.QtyOrder > 0))))"
                                                                    ng-class="{'bp-green-font': SOLI.Status == 'In Stock', 'bp-green-dark-font': soHeader.SOInfo.WorkStatus == 'Invoiced',
                                                                    'bp-red-font': (SOLI.Status == 'Required' || SOLI.Status === 'RETURN' || SOLI.Status === 'Oversold'), 
                                                                    'bp-coral-light-bg': (SOLI.Status === 'RETURN' || SOLI.Status === 'Oversold'),
                                                                    'bp-status-bubble': (SOLI.Status === 'RETURN' || SOLI.Status === 'Oversold'),
                                                                    'bp-orange-font': (SOLI.Status === 'Ordered'),
                                                                    'bp-first-letter-capitalize': (SOLI.Status === 'RETURN' || SOLI.Status === 'Oversold')}">{{::SOLI.Status}}</span>
                                                                <!-- End: Status for Non kit LI - Inventory part -->
                                                                
                                                                <!-- Start: Status for Non kit LI - Non Inventory part -->
                                                                <span ng-if="SOLI.IsPart && SOLI.IsNonInventoryPart" 
                                                                    ng-class = "{'bp-green-font': (soHeader.SOInfo.WorkStatus != 'Invoiced' && (SOLI.QtyNeeded >= 0)),
                                                                    'bp-green-dark-font': soHeader.SOInfo.WorkStatus == 'Invoiced', 
                                                                    'bp-red-font': (soHeader.SOInfo.WorkStatus != 'Invoiced' && !(SOLI.QtyNeeded >= 0)),
                                                                    'bp-coral-light-bg': (soHeader.SOInfo.WorkStatus != 'Invoiced' && !(SOLI.QtyNeeded >= 0)),
                                                                    'bp-status-bubble': (soHeader.SOInfo.WorkStatus != 'Invoiced' && !(SOLI.QtyNeeded >= 0))}">
                                                                    {{(soHeader.SOInfo.WorkStatus == "Invoiced")  ? "Invoiced" : ((SOLI.QtyNeeded >= 0) ? "In Stock" : "Return")}}
                                                                </span>
                                                                <!-- End: Status for Non kit LI - Non Inventory part -->
                                                                <span ng-if="!SOLI.IsPart && !SOLI.IsSublet" ng-class = "{'bp-cyan-font': soHeader.SOInfo.WorkStatus != 'Invoiced','bp-green-dark-font': soHeader.SOInfo.WorkStatus == 'Invoiced'}">{{soHeader.SOInfo.WorkStatus == "Invoiced"  ? "Invoiced" : "Ready" }}</span>
                                                                <span ng-if="SOLI.IsSublet" ng-class = "{'bp-green-font':  SOLI.Status == 'In Stock',
                                                                    'bp-green-dark-font': soHeader.SOInfo.WorkStatus == 'Invoiced',
                                                                    'bp-cyan-font': SOLI.Status == 'Ready' ,
                                                                    'bp-red-font': (SOLI.Status == 'Required' || SOLI.Status === 'RETURN' || SOLI.Status === 'Oversold'),
                                                                    'bp-coral-light-bg': (SOLI.Status === 'RETURN' || SOLI.Status === 'Oversold'),
                                                                    'bp-status-bubble': (SOLI.Status === 'RETURN' || SOLI.Status === 'Oversold'),
                                                                    'bp-orange-font': (SOLI.Status === 'Ordered'),
                                                                    'bp-first-letter-capitalize': (SOLI.Status === 'RETURN' || SOLI.Status === 'Oversold')}">{{::SOLI.Status}}</span>
                                                            </td>
                                                            <td ng-if="!SOKHitem.isAsyncActionInProgress" class="text-center price-edit" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}',
                                                                    'bp-disabled': (!F_CO.displayEditBtnOnLineItem('SO', 'NonKitLI', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex)
                                                                        && M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || soHeader.SOInfo.ClaimStatus == 'Approved') }">
                                                                <span ng-if = "(M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index
                                                                                || !GroupOnlyPermissions['Override price'].enabled)">{{SOLI.KitPrice | currency}}</span>
                                                                <span ng-if = "(M_CO.editLineItem == 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index
                                                                                && GroupOnlyPermissions['Override price'].enabled)">
                                                                    <numbers-only id-value = "ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_Price"
                                                                        class-value = "bp-input-text inTimeEdit timeField text-center"
                                                                        input-model-value = "SOLI.KitPrice" 
                                                                        include-negative = "false"
                                                                        include-zero = "true"
                                                                        precision-length = "2"
                                                                        blur-value = "F_CO.updateSOLineItem('ServiceJob', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex, $event, '_Price')"
                                                                        input-keydown-value="F_CO.setFlagOnTabForBlurHandling($event)"/>
                                                                </span>

                                                                <span class="price-variance-warning" ng-if="(M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index || !GroupOnlyPermissions['Override price'].enabled) && SOLI.Status == 'Required' && M_CO.IsForeignExchangeCostingEnabled && SOLI.IsForeignVendor">
                                                                    <span data-toggle="tooltip" data-original-title="{{'Special_ordering_a_foreign_part_click_to_learn_more' | translate}}" data-html="true">
                                                                        <i id = "SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_warning" ng-click="F_CO.openPriceVarianceWarningModal($event, 'ServiceJob', SoKitHeaderIndex, $index, SoHeaderIndex)" class="bp-icons bp-tart-orange-font bp-font-14">warningFilled</i>
                                                                    </span>
                                                                </span>
                                                                <span ng-if="(M_CO.editLineItem == 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index && GroupOnlyPermissions['Override price'].enabled && SOLI.Status == 'Required' && M_CO.IsForeignExchangeCostingEnabled && SOLI.IsForeignVendor)">
                                                                    <span class="warning-icon" data-toggle="tooltip" data-original-title="{{'Special_ordering_a_foreign_part_click_to_learn_more' | translate}}" data-html="true">
                                                                        <i id = "SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_warning" ng-click="F_CO.openPriceVarianceWarningModal($event, 'ServiceJob', SoKitHeaderIndex, $index, SoHeaderIndex)" class="bp-icons bp-tart-orange-font bp-font-14">warningFilled</i>
                                                                    </span>
                                                                </span>

                                                            </td>
                                                            <td ng-if="!SOKHitem.isAsyncActionInProgress" class="text-center boldText" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}',
                                                                    'bp-disabled': (!F_CO.displayEditBtnOnLineItem('SO', 'NonKitLI', SoHeaderIndex, SoKitHeaderIndex, SoLIIndex)
                                                                        && M_CO.editLineItem !== 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}' || soHeader.SOInfo.ClaimStatus == 'Approved') }">
                                                                <span ng-if="!SOLI.SubTotal" ng-class="{'bp-red-font': (SOLI.QtyNeeded * SOLI.KitPrice) < 0}">{{(SOLI.QtyNeeded * SOLI.KitPrice) | currency}} <span ng-if = "SOLI.IsVariance">~</span></span>
                                                                <span ng-if="SOLI.SubTotal" ng-class="{'bp-red-font': SOLI.SubTotal < 0}">{{::SOLI.SubTotal | currency}} <span ng-if = "SOLI.IsVariance">~</span></span>
                                                            </td>
                                                            <td ng-if="SOLI.IsDummyLineItem" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"><div class="dummy-tag-name"></div></td>
                                                            <td ng-if="!SOLI.IsDummyLineItem" class="partInvIconAdjustment" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}',
                                                                'bp-disabled': (SOLI.Status === 'Invoiced' || soHeader.SOInfo.ClaimStatus == 'Approved') || (soHeader.SOInfo.DealId && (F_CO.isDealInvoiced() || F_CO.isDealApproved()))}">
                                                                <i class="bp-icons bp-blue-font bp-font-20 bp-chevron bp-cursor-pointer" data-toggle="tooltip" title="{!$Label.More_options}" 
                                                                   id="ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_moreOptions"
                                                                   ng-class="{'bp-chevron-up' : M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo, 'bp-chevron-down' : !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo}"
                                                                   ng-if="(SOLI.IsPart && !SOLI.IsNonInventoryPart && (SOLI.QtyNeeded >= 0) && SOLI.Status != 'Invoiced') || (SOLI.IsSublet && GroupOnlyPermissions['Costs']['read only'])"
                                                                   ng-click="F_CO.showHideItemInfo(SoHeaderIndex, SoKitHeaderIndex,$event)">expandBadge</i>
                                                               <span data-toggle="tooltip" title="More actions" ng-if="!M_CO.isServiceJobDisabled(SoHeaderIndex)"
                                                                    id="ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_deleteBtn">
                                                                    <i ng-if="M_CO.coHeaderRec.COType != 'Internal Service' && !soHeader.SOInfo.DealId" class="bp-icons bp-font-15 bp-blue-font LIDeleteBtn"
                                                                        ng-click="F_CO.openMoveLineItemModalWindowAction(soHeader.SOInfo.Id, SOLI.Id, SOLI.IsLabour || SOLI.IsSublet); F_CO.openDeleteConfirmationPopupForSOLineItem(SoHeaderIndex, soHeader.SOInfo.Id, SoKitHeaderIndex, SOKHitem.Id, SoLIIndex, SOLI.Id, 'Service Job', true,$event);">moreAction</i>
                                                                    <i ng-if="(M_CO.coHeaderRec.COType == 'Internal Service' || soHeader.SOInfo.DealId)" class="bp-icons bp-blue-font bp-font-18 LIDeleteBtn"
                                                                        ng-click="F_CO.openDeleteConfirmationPopupForSOLineItem(SoHeaderIndex, soHeader.SOInfo.Id, SoKitHeaderIndex, SOKHitem.Id, SoLIIndex, SOLI.Id, 'Service Job', false, $event)">delete</i>
                                                                </span>
                                                            </td>
                                                        </tr>
                                                        <tr ng-if="!SOKHitem.Id && M_CO.supersededParts[SOLI.PartId] != null && SOLI.Status != 'Invoiced'">
                                                            <td></td>
                                                            <td colspan="8">
                                                                <div class="show_Availableline text-uppercase ng-binding bgYellow"><span class="logo-icon">i</span>{{ 'part_has_been_superseded_to' | translate }} : {{M_CO.supersededParts[SOLI.PartId].partNumber}}</div>
                                                             </td>
                                                             <td></td>
                                                        </tr>
                                                        <!-- End: Line Items Row without Kit Header -->
                                                        
                                                        <!-- Start: Special Order Section without Kit Header -->
                                                        <tr ng-if="SOLI.IsSublet && M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo && GroupOnlyPermissions['Costs']['read only']">
                                                            <td colspan="4"></td>
                                                            <td class="text-center bp-first-letter-capitalize">
                                                                <span>{{ 'Cost' | translate }}: {{::SOLI.Cost | currency}}</span>
                                                            </td>
                                                            <td colspan="2" class="bg-white"></td>
                                                        </tr>
                                                        <tr class="bp-expanded-deletable-div-transition itemOrderInfoTR" id="SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_StockCommitted" 
                                                            ng-if="(!SOKHitem.Id && SOLI.IsPart && !SOLI.IsNonInventoryPart && M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo && (SOLI.QtyNeeded >= 0)) && !M_CO.showQuote && M_CO.SOHeaderList[SoHeaderIndex].SOInfo.CommitOrderControls != 'Uncommitted'">
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                            <td class="boldText" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}">
                                                                <div class="liItemDesc_setTextEllipsis bp-dark-grey2-font">
                                                                    <span>{{ 'Committed_from_the_stock' | translate }}</span>
                                                                </div>
                                                            </td>
                                                            <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}">
                                                                <span ng-if = "M_CO.editLineItem != 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index || (F_CO.isDealApproved() && soHeader.SOInfo.DealId)">{{::SOLI.StockCommited}}</span>
                                                                <span ng-if = "M_CO.editLineItem == 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index && (!F_CO.isDealApproved() || !soHeader.SOInfo.DealId)">
                                                                    <numbers-only id-value="ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_StockCommited"
                                                                        class-value="bp-input-text inTimeEdit timeField text-center"
                                                                        min-value="0"
                                                                        max-value="{{F_CO.getMaxCommitedValue(SOLI)}}"
                                                                        input-model-value="SOLI.StockCommited" 
                                                                        include-negative="false"
                                                                        include-zero="true"
                                                                        precision-length="2"
                                                                        force-precision-length="false"
                                                                        blur-value="F_CO.updateSOLineItem('ServiceJob', SoHeaderIndex, SoKitHeaderIndex, $index, $event, '_StockCommited')"
                                                                        input-keydown-value="F_CO.setFlagOnTabForBlurHandling($event)"
                                                                        input-keyup-value="F_CO.calculateSpecialOrderValue('ServiceJob', 'StockCommited', SoHeaderIndex, SoKitHeaderIndex, $index, (SOLI.IsPart && !SOLI.IsNonInventoryPart));"/>
                                                                </span> <!-- max-value="{{SOLI.QtyNeeded}}" -->
                                                            </td>
                                                            <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}">
                                                                <span class="bp-green-font bp-bold-font">{{ 'Part_Object_Status_InStock' | translate }}</span>
                                                            </td>
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                        </tr>
                                                        <tr class="bp-expanded-deletable-div-transition itemOrderInfoTR" id="SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_QtyOrder"
                                                            ng-if="!SOKHitem.Id && SOLI.IsPart && !SOLI.IsNonInventoryPart && M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo && (SOLI.QtyNeeded >= 0) && !M_CO.showQuote && M_CO.SOHeaderList[SoHeaderIndex].SOInfo.CommitOrderControls != 'Uncommitted'">
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                            <td class="boldText" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}">
                                                                <div class="liItemDesc_setTextEllipsis bp-red-font">
                                                                    <span>{{ 'Quantity_to_order' | translate }}</span>
                                                                </div>
                                                            </td>
                                                            <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}">
                                                                <span>{{SOLI.QtyOrder}}</span>
                                                            </td>
                                                            <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}">
                                                                <span class="bp-red-font bp-bold-font"  ng-if="SOLI.Status !== 'Ordered'">{{ 'Part_Object_Status_Required' | translate }}</span>
                                                                <span class="bp-orange-font bp-bold-font" ng-if="SOLI.Status === 'Ordered'">{{ 'Label_Ordered' | translate }}</span>
                                                            </td>
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}'}"></td>
                                                        </tr>
                                                        <tr class="inventory-status-liItem" id="SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_AvailableInventory" 
                                                            ng-repeat-end="ng-repeat-end" 
                                                            ng-if="!SOKHitem.Id && SOLI.IsPart && !SOLI.IsDummyLineItem && !SOLI.IsNonInventoryPart && (M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo || M_CO.editLineItem == 'ServiceJob_SOHeader' + SoHeaderIndex + '_SOKitHeader' + SoKitHeaderIndex + '_SOLI' + $index) && soHeader.SOInfo.WorkStatus != 'Complete'">
                                                            <td colspan="7" class="PN0">
                                                                <table class="table-extra-for-button">
                                                                    <col width="40%" ng-show="(!(SOLI.QtyOrder > 0 && SOLI.Status !== 'Ordered' && SOLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) || !((M_CO.isBRPEnabled && SOLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(SOLI.VendorId)) || !M_CO.isMeshEnabledOrg)" />
                                                                    <col width="34%" ng-show="((SOLI.QtyOrder > 0 && SOLI.Status !== 'Ordered' && SOLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) && ((M_CO.isBRPEnabled && SOLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(SOLI.VendorId)) && M_CO.isMeshEnabledOrg)" />
                                                                    <col width="" />
                                                                    <col width="10%" ng-show="(!(SOLI.QtyOrder > 0 && SOLI.Status !== 'Ordered' && SOLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) || !((M_CO.isBRPEnabled && SOLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(SOLI.VendorId)) || !M_CO.isMeshEnabledOrg)" />
                                                                    <col width="1%" ng-show="((SOLI.QtyOrder > 0 && SOLI.Status !== 'Ordered' && SOLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) && ((M_CO.isBRPEnabled && SOLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(SOLI.VendorId)) && M_CO.isMeshEnabledOrg)" />
                                                                    <tbody>
                                                                        <tr class="inventory-status-liItem" ng-class="{ 'liItem-bg-white': ((SOLI.ActualAvailableParts - SOLI.StockCommited) > 0 && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo), 'liItem-bg-red': (SOLI.ActualAvailableParts - SOLI.QtyNeeded <= 0 && SOLI.ActualAvailableParts - SOLI.StockCommited <= 0), 'liItem-bg-orange': (SOLI.ActualAvailableParts - SOLI.StockCommited > 0) && M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo }">
                                                                            <td class="helper-text-label" ng-if="(SOLI.QtyNeeded >= 0)">
                                                                                <span ng-if="(SOLI.ActualAvailableParts - SOLI.StockCommited) > 0 && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo" class="label-text "><span class="liItem-text-strong"> {{SOLI.AvailablePart}} </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{SOLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                                                <span ng-if="(SOLI.ActualAvailableParts - SOLI.QtyNeeded <= 0 && SOLI.ActualAvailableParts - SOLI.StockCommited <= 0)" class="label-text red"><span class="liItem-text-strong">0 </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{SOLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                                                <span ng-if="(SOLI.ActualAvailableParts - SOLI.StockCommited > 0) && M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo" class="label-text orange "><span class="liItem-text-strong"> {{SOLI.ActualAvailableParts - SOLI.StockCommited}} </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{SOLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                                            </td>
                                                                            <td class="helper-text-label" ng-if="!(SOLI.QtyNeeded >= 0)">
                                                                                <span ng-if="(SOLI.ActualAvailableParts - SOLI.StockCommited) > 0  && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo" class="label-text "><span class="liItem-text-strong"> {{SOLI.AvailablePart}} </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{SOLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                                                <span ng-if="(SOLI.ActualAvailableParts - SOLI.StockCommited) <= 0  && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo" class="label-text red"><span class="liItem-text-strong">0 </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{SOLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                                                <span ng-if="(SOLI.ActualAvailableParts - SOLI.StockCommited > 0) && M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo" class="label-text orange "><span class="liItem-text-strong"> {{SOLI.ActualAvailableParts - SOLI.StockCommited}} </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{SOLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                                            </td>                                                            
                                                            
                                                                            <td class="text-left liItemBtn" id="SOHeader{{SoHeaderIndex}}_SOKitHeader{{SoKitHeaderIndex}}_SOLI{{$index}}_inventoryButtons">
                                                                                <button ng-if="(SOLI.QtyOrder > 0 && SOLI.Status !== 'Ordered') && SOLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled" class="bp-btn bp-btn-normal table-extra-btn-placement" ng-click="F_CO.openReallocateModalWindow(SOLI, M_CO.COHeaderId, 'ServiceOrder', SoHeaderIndex)">{{ 'Allocate_on_order' | translate }}</button>
                                                                                <button class="bp-btn secondary-btn table-extra-btn-placement" ng-if="(M_CO.isBRPEnabled && SOLI.IsBRPPart)" ng-click="F_CO.openPartLocatorWindow(SOLI, 'ServiceOrder', SoHeaderIndex)" >{{ 'Vendor_Availability' | translate }}</button>
                                                                                <button class="bp-btn secondary-btn table-extra-btn-placement" ng-if="F_CO.displayVendorAvailabilityButton(SOLI.VendorId)" ng-click="F_CO.openVendorAvailabilityWindow(SOLI.PartId, 'ServiceOrder', SoHeaderIndex)" >{{ 'Vendor_Availability' | translate }} - {{SOLI.CassonsSOH}}</button>
                                                                                <span ng-if="M_CO.isMeshEnabledOrg && M_CO.collectiveInfo.externalId && SOLI.ItemCode" class="table-extra-btn-placement" ng-bind-html="F_CO.partLookupHtml(SOLI.ItemCode, 'ServiceSection', SoKitHeaderIndex)"></span>
                                                                                <a class="view-related-label" data-target="#SupersededPart" data-toggle="modal" ng-click="showAlternatePartDialog=true; F_CO.getAlternateParts(SOLI, soHeader.SOInfo.Id, 'ServiceOrder', SoHeaderIndex);">{{ 'View_related_parts' | translate }}</a>
                                                                            </td>
                                                                            <td class="helper-text-label" ng-class="{ 'bg-white': ((SOLI.ActualAvailableParts - SOLI.StockCommited) > 0 && !M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo), 'bg-red': (SOLI.ActualAvailableParts - SOLI.QtyNeeded <= 0 && SOLI.ActualAvailableParts - SOLI.StockCommited <= 0), 'bg-orange': (SOLI.ActualAvailableParts - SOLI.StockCommited > 0) && M_CO.SOHeaderList[SoHeaderIndex].SOGridItems[SoKitHeaderIndex].ShowItemInfo }"></td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                        <!-- End: Special Order Section without Kit Header -->
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="search-entity-wrapper PB55" ng-if="F_CO.showAutoComplete(soHeader.SOInfo.WorkStatus,soHeader.SOInfo.ClaimStatus) && !soHeader.SOInfo.DealId"
                                                ng-class="{'pull-left autocomplete-wrapper-left': (!M_CO.isServiceJobDisabled(SoHeaderIndex))}">
                                                <p class="search-entity-text">{{ 'Scan_or_search_to_add_a_part_labor_kit_fee_or_merchandise' | translate }}</p>
                                                <autocompletev2 ng-if="!M_CO.IsWebComponentSTAEnabled" id="autocompletev2ServiceJobId"
                                                    is-scaning-enabled="true"
                                                    template-name="Entity"
                                                    section-name="Service Job"
                                                    soheader-index="{{SoHeaderIndex}}"
                                                    section-id="ServiceJob{{SoHeaderIndex}}"
                                                    is-disabled="M_CO.isServiceJobDisabled(SoHeaderIndex)" />
                                                <div class="searchToAdd" ng-if="M_CO.IsWebComponentSTAEnabled">
                                                    <bpda-search-to-add id="autocompleteServiceJob{{SoHeaderIndex}}" 
                                                        is-scanning-enabled="true"
                                                        template-name="Entity"
                                                        section-name="Service Job"
                                                        soheader-index="{{SoHeaderIndex}}"
                                                        section-id="ServiceJob{{SoHeaderIndex}}"
                                                        sta-unique-id = "staServiceJob{{SoHeaderIndex}}"
                                                        ng-disabled="M_CO.isServiceJobDisabled(SoHeaderIndex)"
                                                        ng-attr-available-filters= "{{F_CO.populateSTAFilters('staServiceJob1')}}"
                                                        ng-attr-selected-filters="{{F_CO.populateSelectedSTAFilters('staServiceJob', SoHeaderIndex)}}"
                                                    >
                                                    </bpda-search-to-add>
                                                </div>
                                                <div class="bp-alert-info">
                                                    <bp-alert id="service-job-bp-alert{{SoHeaderIndex}}" duration="3000" color="info" closable="true">
                                                        <bp-icon slot="icon" color="inherit">info</bp-icon>
                                                        You don't have to wait while we add your line item. You can immediately add a new one now!
                                                    </bp-alert>
                                                </div>
                                            </div>
                                            <div class="autocomplete-wrapper-right pull-left"
                                                ng-if="F_CO.showAutoComplete(soHeader.SOInfo.WorkStatus,soHeader.SOInfo.ClaimStatus) && !M_CO.isServiceJobDisabled(SoHeaderIndex) && !soHeader.SOInfo.DealId">
                                                <i class="bp-icons bp-blue-font bp-font-14 bp-cursor-pointer pull-left MT-3" ng-click="F_CO.ShowPartsImportModel('Service Job',soHeader.SOInfo.Id)">partSmart</i>
                                                <a class="bp-blue-font bp-bold-font bp-font-14 pull-left line-height-small" ng-click="F_CO.ShowPartsImportModel('Service Job',soHeader.SOInfo.Id)">
                                                    {{ 'Add_items_from_a_pick_list' | translate }}
                                                         </a> 
                                                   </div> 
                                            <div class="search-entity-wrapper" ng-if="F_CO.showAutoComplete(soHeader.SOInfo.WorkStatus,soHeader.SOInfo.ClaimStatus) && soHeader.SOInfo.DealId"
                                                ng-class="{'pull-left autocomplete-wrapper-left': (!M_CO.isServiceJobDisabled(SoHeaderIndex) && !F_CO.isDealInvoiced() && !F_CO.isDealApproved())}">
                                                <p class="search-entity-text">{{ 'Scan_or_search_to_add_a_part_labor_kit_or_merchandise' | translate }}</p>
                                                <autocompletev2 ng-if="!M_CO.IsWebComponentSTAEnabled" id="autocompletev2ServiceJobId"
                                                    is-scaning-enabled="true"
                                                    template-name="Entity"
                                                    section-name="DealService Section"
                                                    soheader-index="{{SoHeaderIndex}}"
                                                    section-id="ServiceJob{{SoHeaderIndex}}"
                                                    is-disabled="M_CO.isServiceJobDisabled(SoHeaderIndex) || (soHeader.SOInfo.DealId && (F_CO.isDealInvoiced() || F_CO.isDealApproved()))" />
                                                <div class="searchToAdd" ng-if="M_CO.IsWebComponentSTAEnabled">
                                                    <bpda-search-to-add id="autocompleteServiceJob{{SoHeaderIndex}}" 
                                                        is-scanning-enabled="true"
                                                        template-name="Entity"
                                                        section-name="DealService Section"
                                                        soheader-index="{{SoHeaderIndex}}"
                                                        section-id="ServiceJob{{SoHeaderIndex}}"
                                                        sta-unique-id = "staDealService{{SoHeaderIndex}}"
                                                        ng-disabled="M_CO.isServiceJobDisabled(SoHeaderIndex) || (soHeader.SOInfo.DealId && (F_CO.isDealInvoiced() || F_CO.isDealApproved()))"
                                                        ng-attr-available-filters= "{{F_CO.populateSTAFilters('staDealService')}}"
                                                        ng-attr-selected-filters="{{F_CO.populateSelectedSTAFilters('staDealService', SoHeaderIndex)}}"
                                                    >
                                                    </bpda-search-to-add>
                                                </div>
                                                <div class="bp-alert-info">
                                                    <bp-alert id="service-job-bp-alert{{SoHeaderIndex}}" duration="3000" color="info" closable="true">
                                                        <bp-icon slot="icon" color="inherit">info</bp-icon>
                                                        You don't have to wait while we add your line item. You can immediately add a new one now!
                                                    </bp-alert>
                                                </div>
                                            </div>
                                            <div class="autocomplete-wrapper-right pull-left"
                                                ng-if="F_CO.showAutoComplete(soHeader.SOInfo.WorkStatus,soHeader.SOInfo.ClaimStatus) && !M_CO.isServiceJobDisabled(SoHeaderIndex) && (soHeader.SOInfo.DealId) && !F_CO.isDealInvoiced() && !F_CO.isDealApproved()">
                                                <i class="bp-icons bp-blue-font bp-font-14 bp-cursor-pointer pull-left MT-3" ng-click="F_CO.ShowPartsImportModel('Deal Service Job',soHeader.SOInfo.Id)">partSmart</i>
                                                <a class="bp-blue-font bp-bold-font bp-font-14 pull-left line-height-small" ng-click="F_CO.ShowPartsImportModel('Deal Service Job',soHeader.SOInfo.Id)">
                                                    {{ 'Add_items_from_a_pick_list' | translate }}
                                                         </a> 
                                                   </div> 
                                        </div>
                                    </div>
                                </div>
                                <div class="bp-inner-accordian open job-item-notes" ng-if="(soHeader.SOInfo.NotesForCustomer != null || soHeader.SOInfo.ShowNotesForCustomer)"
                                    ng-class="{'bp-inner-accordian-opened': M_CO.expandedInnerSectionName == 'ServiceJob{{$index}}_NotesForCustomer'}">
                                    <div class="inner-accordian-header col-md-12" ng-click = "F_CO.expandOrCollapseInnerSection('ServiceJob'+$index+'_NotesForCustomerSectionId', 'ServiceJob'+$index+'_NotesForCustomer')">
                                        <div class="inner-accordian-header-left">
                                            <h2 class="accordian-left-details">{{ 'Notes_for_customer' | translate }}</h2>
                                        </div>
                                        <div class="accordian-right-details">
                                            <a href="" class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_NotesForCustomer'">
                                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowDown</i>
                                            </a>    
                                            <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_NotesForCustomer'">
                                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowUp</i>
                                            </a>    
                                        </div>
                                    </div>
                                    <div class="inner-accordian-body bp-light-gray4 col-md-12 bp-collapse-div-transition" id="ServiceJob{{$index}}_NotesForCustomerSectionId"
                                        ng-class="{'bp-expand-div-transition': M_CO.expandedInnerSectionName == 'ServiceJob{{$index}}_NotesForCustomer'}">
                                        <div class="col-md-7 padding-bottom30 padding-top1">
                                            <div class="bp-multiselect" ng-click="F_CO.displayInput($event, $index, 'NewNote', 'NotesForCustomer', 'Notes')">
                                                <div ng-class="{'padding10': soHeader.SOInfo.NotesForCustomer.length > 0,'PB0':!(M_CO.toDisplayInput[SoHeaderIndex] == 'NotesForCustomer' || displayCauseConcernCorrectionInput(SoHeaderIndex, 'NotesForCustomer'))}">
                                                    <div ng-repeat="note in soHeader.SOInfo.NotesForCustomer track by $index" class="d-flex"> 
                                                        <textarea id="Notes{{SoHeaderIndex}}Tag{{$index}}" type="text" class="textarea-message-box bp-input-text MB10" ng-show="M_CO.editModeIndexMultiSelect['Notes'] == $index" 
                                                               ng-model="soHeader.SOInfo.NotesForCustomer[$index].Value"
                                                               ng-blur="F_CO.updateMultiSelect($event,SoHeaderIndex,$index, 'NotesForCustomer', 'Notes')"
                                                               ng-keydown="F_CO.updateMultiSelect($event, SoHeaderIndex,$index, 'NotesForCustomer', 'Notes')"
                                                               ng-disabled="!(F_CO.getSOPermissionType()['create/modify'])"
                                                               maxlength="1500" />
                                                        <span ng-class = "{'bg-coral-light2' : note.IsDecline }" ng-click="F_CO.editMultiselectTag($event,'NotesForCustomer','Notes',SoHeaderIndex,$index);" ng-show="M_CO.editModeIndexMultiSelect['Notes'] != $index">
                                                            {{note.Value}}
                                                            <i ng-class = "{'icon_fill_coral' : note.IsDecline }"  ng-if="(F_CO.getSOPermissionType()['create/modify'])" 
                                                            ng-click = "F_CO.showCCCNflyout($event,$index, SoHeaderIndex, 'NotesForCustomer','Notes',note.IsDecline)"  class="bp-icons bp-font-15 bp-blue-font LIDeleteBtn">moreAction</i>
                                                        </span>
                                                    </div>
                                                    <textarea id="Notes{{SoHeaderIndex}}" type="text" class="textarea-message-box bp-input-text" ng-show="M_CO.toDisplayInput[SoHeaderIndex] == 'NotesForCustomer' || displayCauseConcernCorrectionInput(SoHeaderIndex, 'NotesForCustomer')" 
                                                        ng-model="soHeader.SOInfo.NewNotesForCustomer" ng-blur="F_CO.addAndRemoveFromMultiSelect($event, $index,'NewNotesForCustomer','NotesForCustomer','Notes')"
                                                        ng-keydown="F_CO.addAndRemoveFromMultiSelect($event, $index,'NewNotesForCustomer','NotesForCustomer','Notes')"
                                                        placeholder="{{ 'Label_Notes' | translate }}" rel="Note" ng-disabled="!(F_CO.getSOPermissionType()['create/modify'])" 
                                                        maxlength="1500" ng-click="F_CO.setSoHeaderIndexForTextarea('Notes', SoHeaderIndex)" ng-class = "{'PT15' : soHeader.SOInfo.NotesForCustomer.length == 0, 'text-height': !soHeader.SOInfo.NewNotesForCustomer }" />
                                                </div>  
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Notes Accordion Ends-->
                                <!-- New log tech time start here -->
                                <div class="bp-inner-accordian open"  ng-class="{'bp-inner-accordian-opened': M_CO.expandedInnerSectionName == 'ServiceJob{{$index}}_LogTechnicianTime'}">
                                    <div class="inner-accordian-header col-md-12" ng-click = "F_CO.expandOrCollapseInnerSection('ServiceJob'+$index+'_LogTechnicianTimeSectionId', 'ServiceJob'+$index+'_LogTechnicianTime')">
                                       <div class="inner-accordian-header-left">
                                           <h2 class="accordian-left-details">{{'Technician_time' | translate}}
                                                <span class="badge" ng-if="soHeader.HoursLoggedList.length > 0 && M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_LogTechnicianTime'">{{::soHeader.HoursLoggedList.length}}</span>
                                           </h2>
                                       </div> 
                                       <div class="accordian-right-details  add-edit-appointment-container-co"> 
                                           <a class="down-arrow-icon" ng-if="M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_LogTechnicianTime'"> 
                                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowDown</i>
                                           </a> 
                                           <a class="down-arrow-icon" ng-if="M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_LogTechnicianTime'">
                                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowUp</i>
                                           </a> 
                                           <div class = "PR18 header-circle">
	                                           <div class = "accordian-right-circle" ng-repeat="assignedTech in soHeader.AssignedTechnicianList">
	                                           		<div class="first-name-wrappeer" data-toggle="tooltip" title="{{assignedTech.FirstName}} {{assignedTech.LastName}} ">
				                                       <div class = "circle" ng-class = "{'bp-main-bg-green' : assignedTech.IsClockedOn, 'bp-white-font' : assignedTech.IsClockedOn}"
				                                          >{{assignedTech.FirstName | limitTo : 1}}{{assignedTech.LastName | limitTo : 1}}
				                                       </div>  
				                                    </div>
	                                           </div>
	                                       </div>
                                       </div> 
                                   </div> 
                                   <div class="inner-accordian-body technician-time-table-wrapper bp-light-gray4 col-md-12 bp-collapse-div-transition ServiceJobLineItemWrapper SOHoursLogWrapper"  
                                        id="ServiceJob{{$index}}_LogTechnicianTimeSectionId"
                                        ng-class="{'bp-expand-div-transition': M_CO.expandedInnerSectionName == 'ServiceJob{{$index}}_LogTechnicianTime'}">
                                        <div class="expandableContainer">
                                            <div class="table-responsive technician-time-table" ng-if="soHeader.AssignedTechnicianList.length != 0">
                                                <table class = "bp-editable-table SOJobItemsGrid SOHoursLogGrid">
                                                    <col width="5%" />
                                                    <col width="5%" />
                                                    <col width="20%" />
                                                    <col width="20%" />
                                                    <col width="25" />
                                                    <col width="10%" />
                                                    <col width="15%" />
                                                    <tbody>
                                                        <tr class = "bp-expanded-deletable-div-transition" id = "assignedTech.Id" 
                                                            ng-repeat="assignedTech in soHeader.AssignedTechnicianList" ng-init="AssignedTechIndex = $index">
                                                            <td>
                                                            </td>
                                                            <td class="PT0 PB0">
                                                              <div class="first-name-wrappeer" data-toggle="tooltip" title="{{assignedTech.FirstName}} {{assignedTech.LastName}} ">
							                                       <div class = "circle"
							                                          >{{assignedTech.FirstName | limitTo : 1}}{{assignedTech.LastName | limitTo : 1}}
							                                       </div>  
							                                    </div>
                                                            </td>
                                                            <td class="boldText LogTechId PL0">
                                                                <div class="InnerFlexContainer">
                                                                    <span class =" hursLogged">{{::assignedTech.TechinicianName}}</span>
                                                                </div>
                                                            </td>
                                                            <td class="text-right">
                                                                <div ng-if="M_CO.AllowPauseOfJobClocking && assignedTech.PausedTime != null && assignedTech.PausedTime != '' && assignedTech.PausedTime != undefined">
                                                                    <span class="bp-grey1-font">{{::assignedTech.PausedTime}}</span>
                                                                </div>
                                                            </td>
                                                            <td class="text-center">
                                                                <span class="H300">Total: {{::assignedTech.TimeSpent}}</span>
                                                             </td>
                                                            <td class="">
                                                                <div>
                                                                    <span class="H400" ng-class= "{'bp-dark-grey1-font' : assignedTech.IsClockedOn, 'bp-grey1-font': !assignedTech.IsClockedOn}">{{::assignedTech.CurrentlyClocked}}</span>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="colcked-jobTime pull-right" ng-if="F_CO.isServiceJobActionable(soHeader.SOInfo)" >
                                                                    <div class="pull-left">
                                                                        <i ng-if = "!assignedTech.IsClockedOn" ng-click = "F_CO.checkTechnicianIdentityForClockOnOff(soHeader.SOInfo.Id,assignedTech.Id,SoHeaderIndex,$index,assignedTech.IsClockedOn,'isClockedONOff')" class="bp-icons bp-font-24 bp-mountain-meadow-font">play</i>
                                                                    </div>
                                                                    <div ng-if="M_CO.AllowPauseOfJobClocking" class="pull-left">
                                                                        <i ng-if="assignedTech.IsClockedOn && assignedTech.IsPaused" ng-click="F_CO.resumeTechnician(soHeader.SOInfo.Id, assignedTech.Id)" class="bp-icons bp-font-24 bp-mountain-meadow-font">play</i>
                                                                        <i ng-if="assignedTech.IsClockedOn && !assignedTech.IsPaused" ng-click="F_CO.pauseTechnician(soHeader.SOInfo.Id, assignedTech.Id)" class="bp-icons bp-font-24 bp-blue-font">pauseNew</i>
                                                                    </div>
                                                                    <div class="pull-left">
                                                                        <i ng-if = "assignedTech.IsClockedOn" ng-click = "F_CO.checkTechnicianIdentityForClockOnOff(soHeader.SOInfo.Id,assignedTech.Id,SoHeaderIndex,$index,assignedTech.IsClockedOn,'isClockedONOff')" class="bp-icons bp-font-24 bp-light-carmine-pink-font">pause</i>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                           </div>
                                           <div class="search-entity-wrapper MB10" ng-class = "{'MT30':soHeader.AssignedTechnicianList.length == 0}">
                                                <button class="bp-btn bp-btn-normal bp-first-letter-capitalize" id = "Assign_Tech_But_Id_{{$index}}" ng-disabled="M_CO.isSOItemDisabled(SoHeaderIndex)"
                                                    ng-click="F_CO.showTechnicianListOverlay('Assign_Tech_But_Id_' + $index, soHeader.SOInfo.Id)">{{'Assign_technician' | translate }}</button>            
                                           </div>
                                           <!-- End: Technician Time - Assign Technician section --> 
                                           <!-- Start: Technician Time - Manual log entry Section --> 
                                            <div class="table-responsive technician-time-table" ng-if="soHeader.HoursLoggedList.length != 0"> 
                                                 <p class="search-entity-text H300 bp-dark-grey1-font">{{'Manual_log_entry' | translate}}</p> 
                                                 <table class = "bp-editable-table SOJobItemsGrid SOHoursLogGrid">
                                                    <col width="5%" />
                                                    <col width="13%" />
                                                    <col ng-if="!M_CO.AllowPauseOfJobClocking" width="10%" />
                                                    <col ng-if="M_CO.AllowPauseOfJobClocking" width="7%" />
                                                    <col width="15%" />
                                                    <col ng-if="!M_CO.AllowPauseOfJobClocking" width="9%" />
                                                    <col ng-if="!M_CO.AllowPauseOfJobClocking" width="9%" />
                                                    <col ng-if="!M_CO.AllowPauseOfJobClocking" width="8%" />
                                                    <col ng-if="!M_CO.AllowPauseOfJobClocking" width="21%" />
                                                    <col ng-if="!M_CO.AllowPauseOfJobClocking" width="10%" />
                                                    <col ng-if="M_CO.AllowPauseOfJobClocking" width="7%" />
                                                    <col ng-if="M_CO.AllowPauseOfJobClocking" width="7%" />
                                                    <col ng-if="M_CO.AllowPauseOfJobClocking" width="6%" />
                                                    <col ng-if="M_CO.AllowPauseOfJobClocking" width="6%" />
                                                    <col ng-if="M_CO.AllowPauseOfJobClocking" width="6%" />
                                                    <col ng-if="M_CO.AllowPauseOfJobClocking" width="18%" />
                                                    <col ng-if="M_CO.AllowPauseOfJobClocking" width="10%" />
                                                    <thead>
                                                        <tr>
                                                            <th></th>
                                                            <th class = "bp-text-uppercase">{{ 'Label_Log' | translate }}</th>
                                                            <th class = "bp-text-uppercase text-center">{{ 'Label_Date' | translate }}</th>
                                                            <th class = "bp-text-uppercase">{{ 'Technician' | translate }}</th>
                                                            <th class = "bp-text-uppercase text-center">{{ 'In' | translate }}</th>
                                                            <th class = "bp-text-uppercase text-center">{{ 'Out' | translate }}</th>
                                                            <th class = "bp-text-uppercase text-center">{{ 'Label_Hours' | translate }}</th>
                                                            <th ng-if="M_CO.AllowPauseOfJobClocking" class = "bp-text-uppercase text-center">{{ 'Job_Hours' | translate }}</th>
                                                            <th ng-if="M_CO.AllowPauseOfJobClocking" class = "bp-text-uppercase text-center">{{ 'Paused' | translate }}</th>
                                                            <th class = "bp-text-uppercase">{{ 'Label_Notes' | translate }}</th>
                                                            <th class = "bp-text-uppercase"></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class = "bp-expanded-deletable-div-transition" id = "SOHeader{{SoHeaderIndex}}_HoursLogged{{$index}}" 
                                                            ng-repeat="HoursLogged in soHeader.HoursLoggedList" ng-init="HoursLoggedIndex = $index">
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_HoursLogged{{$index}}'}">
                                                                <i class="bp-icons bp-font-25 bp-grey-font stroke-3 itemSvg tableItem">clock</i>
                                                            </td>
                                                            <td class="boldText LogTechId" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_HoursLogged{{$index}}'}">
                                                                <div class="InnerFlexContainer">
                                                                    <span  ng-if = "!M_CO.isSOItemDisabled(SoHeaderIndex) && GroupOnlyPermissions['Manage job clocking']['enabled']" ng-click="F_CO.editHourLogged('ServiceJob', SoHeaderIndex, soHeader.SOInfo.Id, HoursLoggedIndex)">{{::HoursLogged.Log}}</span> <!-- blue color -->
                                                                    <span  class =" hursLogged" ng-if = "M_CO.isSOItemDisabled(SoHeaderIndex) || (!M_CO.isSOItemDisabled(SoHeaderIndex) && !GroupOnlyPermissions['Manage job clocking']['enabled'])" >{{::HoursLogged.Log}}</span> <!-- blue color -->                                                                    
                                                                </div>
                                                            </td>
                                                            <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_HoursLogged{{$index}}'}">
                                                                <span>{{::HoursLogged.StartDate}}</span>
                                                             </td>
                                                            <td class="" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_HoursLogged{{$index}}'}">
                                                                <div class="liItemDesc_setTextEllipsis">
                                                                    <span> {{::HoursLogged.EmployeeName}}</span>
                                                                </div>
                                                            </td>
                                                            <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_HoursLogged{{$index}}'}">
                                                                <span>{{::HoursLogged.TimeIn}}</span> 
                                                            </td>
                                                            <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_HoursLogged{{$index}}'}">
                                                                <span>{{::HoursLogged.TimeOut}}</span>
                                                            </td>
                                                            <td class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_HoursLogged{{$index}}'}">
                                                                <span>{{::HoursLogged.TotalHours}}</span>
                                                            </td>
                                                            <td ng-if="M_CO.AllowPauseOfJobClocking" class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_HoursLogged{{$index}}'}">
                                                                <span>{{::HoursLogged.JobHours}}</span>
                                                            </td>
                                                            <td ng-if="M_CO.AllowPauseOfJobClocking" class="text-center" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_HoursLogged{{$index}}'}">
                                                                <span>{{::HoursLogged.PausedHours}}</span>
                                                            </td>
                                                          <td class="logTechNotes" ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_HoursLogged{{$index}}'}">
                                                                <span class ="notes" ng-if = "HoursLogged.Notes">{{::HoursLogged.Notes}}</span>
                                                                <span ng-if = "!HoursLogged.Notes">- - - - - - - - -</span>
                                                            </td>
                                                            <td ng-class = "{'setBgColor' : M_CO.editLineItem == 'ServiceJob_SOHeader{{SoHeaderIndex}}_HoursLogged{{$index}}'}" >
                                                                <span data-toggle="tooltip" title="More actions" ng-class="{'bp-disabled': M_CO.isMoveHoursDisabled(SoHeaderIndex) || !GroupOnlyPermissions['Manage job clocking']['enabled']}">
                                                                    <i class="bp-icons bp-font-15 bp-blue-font LIDeleteBtn"
                                                                        ng-click="F_CO.openMoveLineItemModalWindowAction(soHeader.SOInfo.Id, HoursLogged.Id, true, null, true);F_CO.openDeleteConfirmationPopupForHoursLogged(SoHeaderIndex, soHeader.SOInfo.Id, HoursLoggedIndex, HoursLogged.Id, 'LogTechnicianTimeGrid');">moreAction</i>
                                                                </span>
                                                            </td>
                                                        </tr>
                                                        <tr class = "bp-expanded-deletable-div-transition total-row-list">
                                                            <td></td>
                                                            <td ng-if="!M_CO.AllowPauseOfJobClocking" class="boldText" colspan="5">
                                                                <div class="InnerFlexContainer">
                                                                    <span >Total hours</span>
                                                                </div>
                                                            </td>
                                                            <td ng-if="!M_CO.AllowPauseOfJobClocking" class="text-center boldText">
                                                                <span>{{soHeader.HoursLoggedList.totalLogHours}}</span>
                                                            </td>
                                                            <td ng-if="!M_CO.AllowPauseOfJobClocking" colspan="2"></td>
                                                            <td ng-if="M_CO.AllowPauseOfJobClocking" class="boldText" colspan="6">
                                                                <div class="InnerFlexContainer">
                                                                    <span >Total hours</span>
                                                                </div>
                                                            </td>
                                                            <td ng-if="M_CO.AllowPauseOfJobClocking" class="text-center boldText">
                                                                <span>{{soHeader.HoursLoggedList.totalJobHours}}</span>
                                                            </td>
                                                            <td ng-if="M_CO.AllowPauseOfJobClocking" colspan="3"></td>
                                                        </tr>
                                                    </tbody>
                                                </table> 
                                             </div>
                                             <div class="search-entity-wrapper" ng-class="{'MT30' : soHeader.HoursLoggedList.length == 0}">
                                             	<p class="search-entity-text H300 bp-dark-grey1-font" ng-if="soHeader.HoursLoggedList.length==0">{{'Manual_log_entry' | translate}}</p> 
                                                <button class="bp-btn bp-btn-normal bp-first-letter-capitalize" ng-disabled="M_CO.isSOItemDisabled(SoHeaderIndex) || !GroupOnlyPermissions['Manage job clocking']['enabled']"
                                                    ng-click="F_CO.openAddLogTechnicianTimePopUp(soHeader.SOInfo.Id, SoHeaderIndex)">{{'Log_time' | translate }}</button>            
                                             </div>
                                             <!-- End: Technician Time - Manual log entry Section --> 
                                         </div> 
                                    </div> 
                                </div>
                                <!-- New log tech time end here -->
                                
                                <!-- Customer Approval accordian start here -->
                                <div class="bp-inner-accordian open customer-approval-section" ng-class="{'bp-inner-accordian-opened': M_CO.expandedInnerSectionName == 'ServiceJob{{$index}}_CustomerApprovalSection'}" 
                                    ng-if="M_CO.SOHeaderList[SoHeaderIndex].CustomerApprovalList.length">
                                    <div class="inner-accordian-header col-md-12">
                                        <div class="inner-accordian-header-left" ng-click="F_CO.expandOrCollapseInnerSection('ServiceJob'+$index+'_CustomerApprovalSectionId', 'ServiceJob'+$index+'_CustomerApprovalSection')">
                                            <h2 class="accordian-left-details customer-approval-label">{!$Label.customer_approval_label}
                                                <span class="badge" ng-if="M_CO.SOHeaderList[SoHeaderIndex].CustomerApprovalList.length && M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_CustomerApprovalSection'">{{::M_CO.SOHeaderList[SoHeaderIndex].CustomerApprovalList.length}}</span>
                                            </h2>
                                        </div>
                                        <div class="accordian-right-details">
                                            <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName != 'ServiceJob'+$index+'_CustomerApprovalSection'" 
                                                ng-click = "F_CO.expandOrCollapseInnerSection('ServiceJob'+$index+'_CustomerApprovalSectionId', 'ServiceJob'+$index+'_CustomerApprovalSection')">
                                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowDown</i>
                                            </a>  
                                            <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_CustomerApprovalSection'" 
                                                ng-click = "F_CO.collapseInnerSection(); M_CO.SOHeaderList[SoHeaderIndex].addNewCustomerApproval = false;">
                                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowUp</i>
                                            </a>    
                                        </div>
                                    </div>
                                    <div class="inner-accordian-body bp-light-gray4 col-md-12 bp-collapse-div-transition ServiceJobLineItemWrapper"  
                                        id="ServiceJob{{$index}}_CustomerApprovalSectionId" ng-class="{'bp-expand-div-transition': M_CO.expandedInnerSectionName == 'ServiceJob{{$index}}_CustomerApprovalSection'}">
                                        <div class="expandableContainer customer-approval-list" ng-if="M_CO.SOHeaderList[SoHeaderIndex].CustomerApprovalList.length">
                                            <div class="table-responsive">
                                                <table class="bp-editable-table customer-approval-table SOJobItemsGrid">
                                                    <col width="5%"  />
                                                    <col width="30%"  />
                                                    <col width="25%" />
                                                    <col width="25%" />
                                                    <col width="15%" />
                                                    <thead>
                                                        <tr>
                                                            <th></th>
                                                            <th class="bp-text-uppercase">{{' Label_Approval' | translate }}</th>
                                                            <th class="bp-text-uppercase">{{' Date_Time ' | translate }}</th>
                                                            <th class="bp-text-uppercase">{{' Method_of_Approval' | translate }}</th>
                                                            <th></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="bp-expanded-deletable-div-transition" id="SOHeader{{SoHeaderIndex}}_CustomerApproval{{$index}}" 
                                                            ng-repeat="customerApproval in M_CO.SOHeaderList[SoHeaderIndex].CustomerApprovalList" ng-init="CustomerApprovalIndex = $index">
                                                            <td ng-class="{'highLightCA':M_CO.CustomerApproval.highlightLastAddedCAIndex == $index }"></td>
                                                            <td class="boldText" ng-class="{'highLightCA':M_CO.CustomerApproval.highlightLastAddedCAIndex == $index}">
                                                                <span class="setTextEllipsis cutomer-approval-id bp-cursor-pointer" ng-click = "F_CO.getCustomerApprovalHistoryForSelectedSO(customerApproval.Id);">{{::customerApproval.ApprovalId}}</span>
                                                            </td>
                                                            <td ng-class="{'highLightCA':M_CO.CustomerApproval.highlightLastAddedCAIndex == $index }">
                                                                <span>{{::customerApproval.ApprovalDate}}</span>
                                                            </td>
                                                            <td ng-class="{'highLightCA':M_CO.CustomerApproval.highlightLastAddedCAIndex == $index }">
                                                                <span>{{::customerApproval.ApprovalType}}</span>
                                                            </td>
                                                            <td ng-class="{'highLightCA':M_CO.CustomerApproval.highlightLastAddedCAIndex == $index }">
                                                                <i class="bp-icons bp-blue-font bp-font-18 stroke-3" ng-click = "F_CO.getCustomerApprovalHistoryForSelectedSO(customerApproval.Id);" >print</i> 
                                                                <span data-toggle="tooltip" title="Email">
                                                                    <i class="bp-icons bp-blue-font bp-font-18 stroke-3" ng-click="F_CO.openEmailPopUpForCustomerApproval(customerApproval.Id,customerApproval.ApprovalDetailJson)">email</i>
                                                                </span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="add-more-btn" ng-if = "soHeader.SOInfo.WorkStatus != 'Invoiced' ">
                                                <button class="bp-btn bp-btn-secondaryCTA bp-text-uppercase line-height-medium bp-font-13"  ng-click="F_CO.openCustomerApprovalModal(SoHeaderIndex)"
                                                    >{{' Get_Another_Approval' | translate }}</button>
                                            </div>
                                        </div>
                                    </div>
                                </div> 
                                <!-- Customer Approval accordian end here -->
                                
                                <!-- Start: SO: Document Section -->
                                <co-document-section inner-accordian-wrapper-class-value="bp-inner-accordian open" 
                                    expand-collapse-inner-accordian="F_CO.expandOrCollapseInnerSection('ServiceJob'+$index+'_DocumentSectionId', 'ServiceJob'+$index+'_DocumentSection')"
                                    is-inner-section-expanded="M_CO.expandedInnerSectionName == 'ServiceJob'+$index+'_DocumentSection'"
                                    inner-accordian-body-wrapper-id-value="ServiceJob{{$index}}_DocumentSectionId"
                                    is-co-closed="M_CO.coHeaderRec.OrderStatus === 'Closed'"
                                    form-list="M_CO.documents.forms.so[soHeader.SOInfo.Id]"
                                    attachment-list="M_CO.documents.attachments.so[soHeader.SOInfo.Id]"
                                    add-form-action="F_CO.addFormsToSection(soHeader.SOInfo.Id, 'so');"
                                    delete-form-action="F_CO.deleteFormsFromSection(formId, soHeader.SOInfo.Id, 'so');"
                                    delete-attachment-action="F_CO.deleteAttachmentFromSection(attachmentId, soHeader.SOInfo.Id, 'so');"
                                    print-document-action="F_CO.printDocument(docUrl, coFormId, isEditable, formEditConfig, editModalName,formName,isLandscapeMode,isAttachment);"
                                    attachment-file-upload-interface-modal="FileUpload.interface"
                                    set-add-attachment-data="F_CO.setAttachmentData(soHeader.SOInfo.Id, 'so');"
                                    active-form-count="M_CO.documents.sectionNameToActiveFormCountMap['Service']"
                                    active-forms="M_CO.documents.activeForms.so[soHeader.SOInfo.Id]"
                                    section-status="soHeader.SOInfo.WorkStatus" />
                                <!-- End: SO: Document Section -->
                                
                                <!-- Job Actions accordian start here -->
                                <div class="bp-inner-accordian open always-open bp-inner-accordian-last-child" ng-If="F_CO.showActionSubSection('Service job', soHeader)">
                                    <div class="inner-accordian-header col-md-12">
                                        <div class="inner-accordian-header-left">
                                            <h2 class="accordian-left-details">{{ 'Job_actions' | translate }}</h2>
                                        </div>
                                        <div class="accordian-action-right" ng-if="GroupOnlyPermissions['Service job']['create/modify'] && (!soHeader.SOGridItems.length && soHeader.SOInfo.WorkStatus != 'Complete' && soHeader.SOInfo.WorkStatus != 'Reviewed' && soHeader.SOInfo.WorkStatus != 'Invoiced' && soHeader.SOInfo.WorkStatus != 'Signed Out' && soHeader.HoursLoggedList.length == 0 && !M_CO.soAppointments[soHeader.SOInfo.Id])">
                                            <span class="icon-container" ng-click="F_CO.openConfirmationDialog('RemoveSection', false, 'ServiceJob', soHeader.SOInfo.Id);">
                                                <i class="bp-icons bp-blue-font bp-font-19 bp-fw-100 bp-lh-20">delete</i>
                                                <span class="bp-font-14 bp-blue-font bp-cursor-pointer">{{ 'Remove_service_job_Label' | translate }}</span>
                                            </span>
                                        </div>

                                        <div class="accordian-action-right" ng-if="GroupOnlyPermissions['Service job']['create/modify'] && (!soHeader.SOGridItems.length && soHeader.SOInfo.WorkStatus != 'Complete' && soHeader.SOInfo.WorkStatus != 'Reviewed' && soHeader.SOInfo.WorkStatus != 'Invoiced' && soHeader.SOInfo.WorkStatus != 'Signed Out' && soHeader.HoursLoggedList.length == 0 && M_CO.soAppointments[soHeader.SOInfo.Id])">
                                            <span class="icon-container" ng-click="F_CO.openDeleteCoinfirmationModal('deleteServiceJobModalWindow',soHeader.SOInfo.Id);">
                                                <i class="bp-icons bp-blue-font bp-font-19 bp-fw-100 bp-lh-20">delete</i>
                                                <span class="bp-font-14 bp-blue-font bp-cursor-pointer">{{ 'Remove_service_job_Label' | translate }}</span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="inner-accordian-body col-md-12" ng-if="M_CO.coHeaderRec.OrderStatus != 'Quote'">
                                        <ul class="job-actions-buttons">
                                            <li ng-repeat="action in M_CO.ServiceJobAction " ng-class="{'bp-disabled': F_CO.isArchivedQuote()}" ng-if="F_CO.displayServiceJobAction(action,soHeader,SoHeaderIndex)"
                                                id="serviceJobAction{{$index}}" ng-click = "F_CO.serviceJobActionToBePerformed(action,soHeader,SoHeaderIndex)">
                                                <a>
                                                <i class="bp-icons stroke-5">addCircle</i>
                                                {{action}}  </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- Job Actions accordian end here -->
                            </div>
                        </div>
                    </div>
                    <!-- End: Service Job -->
      
    <bp-ng-modal-window id-val="deleteServiceJobModalWindow" mobal-window-payload="M_CO.ModalWindowPayload" cancel-btn-action="F_CO.hideModalWindow('deleteServiceJobModalWindow');" primary-btn-action="F_CO.deleteServiceJob(M_CO.COHeaderId, M_CO.deleteSoHeaderID)">
        <cite class="delete-info">
            <p class="MB20">
                Deleting the service job will also delete the related appointment.
            </p>
            <p>
                Are you sure you want to delete the service job?
            </p>
            
        </cite>
    </bp-ng-modal-window>
    <bp-ng-modal-window id-val="priceVarianceWarning" mobal-window-payload="M_CO.ModalWindowPayload" cancel-btn-action="F_CO.closePriceVarianceWarningModal()" primary-btn-action="F_CO.closePriceVarianceWarningModal()">
        <div>
            <span>
                <p class="modal-window-message-info">{{ 'Price_variance_warning_message' | translate }}</p>
            </span>
        </div>
    </bp-ng-modal-window>
</apex:component>