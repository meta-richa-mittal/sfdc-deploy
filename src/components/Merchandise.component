<apex:component controller="GlobalController">
    <!-- Start: Merchandise Section -->
    <div class="bp-accordion-entry expanded"  ng-class="{'bp-collapse' : M_CO.expandedSectionName != 'MerchandiseSection','disable-accordion' : !GroupOnlyPermissions['Merchandise']['view']}">
        <div class="bp-accordion-header bp-orange d-flex new-header-container">
             <div class="icon-container" ng-click="F_CO.expandOrCollapseSection('MerchandiseSectionId','MerchandiseSection', '', GroupOnlyPermissions['Merchandise']['view'])">
                <i class="bp-icons stroke-5 bp-lh-20">part</i>
                </div>
             <div class = "main-section-header" ng-click="F_CO.expandOrCollapseSection('MerchandiseSectionId','MerchandiseSection', '', GroupOnlyPermissions['Merchandise']['view'])">
             <section-header
                        	section-name = "M_CO.sectionName['Parts & accessories']"
                        	transaction-type-label = "M_CO.COHeaderId ? M_CO.coHeaderRec.MerchandiseTransactionType : ''"
                        	is-top-left-container-show = "true"
                        	is-total-container-show = 'true'
                        	no-title-ellipsis = "true"
                        	total = "M_CO.coHeaderRec.MerchandiseTotal | currency"
                            total-fetching-state = "M_CO.isAsyncActionInProgressForMerchSection"
                        	total-label = "Total:"
                            is-badge-container-show = 'true'
                            show-so-status="true"
                            so-status="M_CO.coHeaderRec.SpecialOrderStatus"
                        	>
                        	
                        	</section-header>
                        	</div>
            <div class = "right-container bp-accordion-toggle bp-orange-dark-bg" ng-if="M_CO.expandedSectionName != 'MerchandiseSection'" ng-click="F_CO.expandOrCollapseSection('MerchandiseSectionId','MerchandiseSection', '', GroupOnlyPermissions['Merchandise']['view'])">
                        		<i class="bp-icons bp-font-16 stroke-1 size-unset">arrowDown</i>
                        	</div>
                        	 <div class=" right-container bp-accordion-toggle bp-orange-dark-bg" ng-if="M_CO.expandedSectionName == 'MerchandiseSection'" ng-click="F_CO.expandOrCollapseSection('MerchandiseSectionId','MerchandiseSection', '', GroupOnlyPermissions['Merchandise']['view'])">
                                <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowUp</i>
                            </div>
        </div>
        <div class="bp-accordion-detail bp-collapse-div-transition bp-light-gray4 MerchandiseSectionGrid" id="MerchandiseSectionId" ng-class="{'merchandiseSectionOpen': M_CO.expandedSectionName == 'MerchandiseSection'}">
            <div class="bp-inner-accordian open dfSummary" ng-class="{'bp-inner-accordian-opened': M_CO.expandedInnerSectionName == 'Merchandise_SummarySection', 'bp-disabled': !M_CO.COHeaderId}">
                <div class="inner-accordian-header col-md-12" ng-click = "F_CO.expandOrCollapseInnerSection('Merchandise_SummarySectionId', 'Merchandise_SummarySection')">
                    <div class="inner-accordian-header-left">
                        <h2 class="accordian-left-details text-upperCase">{{ 'Summary' | translate }}</h2>
                    </div>
                    <div class="accordian-right-details">
                        <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName != 'Merchandise_SummarySection'">
                            <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowDown</i>
                        </a> 
                        <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName == 'Merchandise_SummarySection'">
                            <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowUp</i>
                        </a>
                    </div>
                </div>

                <div class="inner-accordian-body bp-collapse-div-transition" id="Merchandise_SummarySectionId" ng-class="{'bp-expand-div-transition': M_CO.expandedSectionName == 'Merchandise_SummarySection'}">
                    <div class = "col-xs-12 col-sm-6 form-container">
                        <div class = "col-xs-12">
                            <div class="col-xs-12 P0 text-left" ng-if = "M_CO.isShopifyEnabled && M_CO.coHeaderRec.ShopifyId">
                                <label class="H400 shopify-label">{{ 'Shopify_ID' | translate }}</label>
                                <span class="blue T3" ng-if = "!M_CO.coHeaderRec.ShopifyUrl">{{M_CO.coHeaderRec.ShopifyId}}</span>
                                <span class="blue T3" ng-if = "M_CO.coHeaderRec.ShopifyUrl"><a href="{{M_CO.coHeaderRec.ShopifyUrl}}" target = "_blank"> {{M_CO.coHeaderRec.ShopifyId}} </a></span>
                            </div>
                            <div class = "col-xs-12 P0 PT0 PB0 expandableContainer">
                                <label class = "col-xs-12">Salesperson</label>
                                <div class="table-responsive technician-time-table" ng-if="M_CO.MerchSalesPersonList.length > 0">
                                    <table class = "bp-editable-table SOJobItemsGrid SOHoursLogGrid deal-salesperson-list">
                                        <col width="5%" />
                                        <col width="50%" />
                                        <thead>
                                            <tr>
                                                <th class = "bp-text-uppercase text-center">{{'Label_Name' | translate}}</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class = "bp-expanded-deletable-div-transition" ng-repeat="assignedSalesperson in M_CO.MerchSalesPersonList" ng-init="AssignedSalespersonIndex = $index">
                                                <td class="PT0 PB0">
                                                <div class="first-name-wrappeer" data-toggle="tooltip" title="{{assignedSalesperson.NameInitials}}">
                                                    <div class = "circle"
                                                        >{{assignedSalesperson.NameInitials}}
                                                    </div>
                                                    </div>
                                                </td>
                                                <td class="boldText LogTechId PL0">
                                                    <div class="InnerFlexContainer">
                                                        <span class =" hursLogged">{{::assignedSalesperson.TechnicianName}}</span>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="MB10" ng-class = "{'MT30': M_CO.MerchSalesPersonList.length == 0}">
                                    <button class="bp-btn bp-btn-normal bp-first-letter-capitalize" id = "Assign_Merch_Salesperson" ng-disabled="(!GroupOnlyPermissions['Merchandise']['create/modify'] || M_CO.coHeaderRec.OrderStatus === 'Closed')"
                                        ng-click="F_CO.showTechnicianListOverlay('Assign_Merch_Salesperson', M_CO.coHeaderRec.COHeaderId, true)">{{'Label_Assign_Salesperson' | translate }}</button>            
                                </div>
                            </div>
                            <div class="col-xs-12 P0 text-left" ng-class="{'bp-disabled': !F_CO.isActiveMerchandise() || F_CO.isArchivedQuote()}">
                                <label class="bp-bold-font H400 MB20 bp-first-letter-capitalize">{{ 'transaction_type' | translate }}</label>
                                <span class="transaction-type-tool-tip" ng-mouseover = "M.CO.showTransactionTypeTooltip = true" ng-mouseleave = "M.CO.showTransactionTypeTooltip = false">i</span>
                                <span ng-show = "M.CO.showTransactionTypeTooltip" class="transactionTypetooltip H200 line-height-normal">Select how you want to categorize this transaction for search and reporting purposes</span>
                            </div>
                            <div class="transaction-tab" ng-class="{'bp-disabled': !F_CO.isActiveMerchandise() || F_CO.isArchivedQuote()}">
                                <a class="btn tab-btns H400 transactiontypebtn" ng-repeat = "transactiolabelrec in M_CO.transactionTypelabel" ng-click = "M_CO.selectedTransactionTypeIndex = $index;M_CO.saveCoHeaderInfo()" ng-class="{'selected': M_CO.selectedTransactionTypeIndex == $index}">{{transactiolabelrec.CodeLabel}}</a>
                            </div>

                            <div ng-class="{'bp-disabled': !F_CO.isActiveMerchandise() || F_CO.isArchivedQuote()}">
                                <div class="col-xs-12 override-tax P0 MB20">
                                    <div ng-if="M_CO.IsAutomaticTaxRates && M_CO.coHeaderRec.CustomerId != undefined && M_CO.coHeaderRec.COType != 'Cash Sale'">
                                        <bp-ng-slider value="{{M_CO.coHeaderRec.IsTaxBasedOnCustomerAddress}}" ng-class-name= "{'c-checkd-slider':M_CO.coHeaderRec.IsTaxBasedOnCustomerAddress}" on-click-fun="F_CO.toggleTaxBasedOnCustomerAddress('merchandiseSection');" field-value="Tax based on the customer address"></bp-ng-slider>
                                    </div>
                                    <div ng-if="GroupOnlyPermissions['Sales Taxes']['assign'] && !M_CO.IsTaxIncludingPricing">
                                        <bp-ng-slider value="{{M_CO.coHeaderRec.IsOverrideTax}}" ng-class-name= "{'c-checkd-slider':M_CO.coHeaderRec.IsOverrideTax}" on-click-fun="F_CO.toggleOverrideTax();" field-value="Override how taxes are calculated?"></bp-ng-slider>
                                    </div>
                                </div>

                                <div class="col-xs-12 P0" ng-if="M_CO.coHeaderRec.IsOverrideTax">
                                    <p class="bp-lh-19 bp-font-16 modified-p-margin-bottom">{{'Applicable_tax_Label' | translate}}</p>
                                    <div class="col-lg-12 P0">
                                        <div class="account-type-container">
                                            <div class="bp-autocomplete-Wrapper autocomplete_v2">
                                                <span class="bp-autocomplete-image-icon">
                                                    <i ng-include="'{!Application_Images}/Icons/arrowDown.svg'" class="bp-blue bp-cursor-pointer svg_width_2px" ng-click = "F_CO.setFocusOnInput('MerchSalesTaxRecInput')"></i>
                                                </span>
                                                <input  type="text" id="MerchSalesTaxRecInput" class="bp-autocomplete-input bp-cursor-pointer bp-input-text  manage-long-salesperson-person" placeholder="{{'Please_select' | translate }}"
                                                autocomplete="off" ng-keyup="F_CO.keyPressNavigationOnDropdownElements($event, 'merchSalesTaxRecDropdownDiv', 'merchSalesTaxRec', M_CO.applicableSalesTaxList, M_CO.coHeaderRec.ApplicableTaxName, ('MerchSalesTaxRecInput'))"
                                                ng-model="M_CO.coHeaderRec.ApplicableTaxName" 
                                                ng-focus = "M_CO.showSalesTaxListDropdown = true; F_CO.setMerchApplicableTaxDefaultDataOnFocus();"
                                                ng-blur="F_CO.setMerchApplicableTax(); M_CO.showSalesTaxListDropdown = false; F_CO.hideDropdown();"  
                                                ng-disabled="(!GroupOnlyPermissions['Sales Taxes']['assign'])"/>
                                                <div class = "bp-autocomplete-dropdown-wrapper" ng-if="M_CO.showSalesTaxListDropdown" id="merchSalesTaxRecDropdownDiv">
                                                    <ul>
                                                        <li ng-repeat="salesTax in M_CO.filteredApplicableSalesTaxList track by $index" id="merchSalesTaxRec"
                                                        ng-class="{'selected-row': $index == M_CO.currentDropDownIndex}"
                                                        ng-mousedown="F_CO.selectCOApplicableSalesTax(salesTax)">
                                                            <div class="form-group-info col-xs-12 P0">
                                                                <span >{{salesTax.Name}}</span>
                                                            </div>
                                                        </li> 
                                                    </ul>
                                                    <ul ng-If="M_CO.filteredApplicableSalesTaxList.length == 0">
                                                        <li id="unitSalesTaxNoResults" class="BP_angucomplete-row-NoResults-Msg">
                                                            <div class="">{{'No_Results_Found' | translate}}</div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div ng-if="M_CO.coHeaderRec.IsOverrideTax" class="col-xs-12 d-flex tax-detail-toggle override-tax multi-select P0 MB20">
                                    <div class="tax-detail-label lables bp-bold-font bp-dark-grey1-font P0 bp-font-16">{{'Use_this_tax_for_these_items' | translate}}</div>
                                    <div class="values bp-dark-grey1-font">
                                        <div class="multi-select-dropdown-wrapper">
                                            <multi-select ng-if="M_CO.coHeaderRec.OverrideTaxList" result-list = "M_CO.coHeaderRec.OverrideTaxList.unitTaxApplicableOn" type = "item type" select-all-rec = "M_CO.coHeaderRec.OverrideTaxList.isUnitTaxApplicableOnAllOptionType" section-name="Merchandise"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="transaction-type-wrapper" ng-class="{'bp-disabled': !F_CO.isActiveMerchandise() || F_CO.isArchivedQuote()}">
                                    <h4 class="H400">Inventory and special order handling:</h4>
                                    <div ng-if="M_CO.coHeaderRec.OrderStatus == 'Quote' || F_CO.getStatusForSpecialOrder()" class="warning-container" ng-class="{'orange-warning-container': F_CO.getStatusForSpecialOrder()}"> 
                                        <div class="bp-warning-template">
                                            <span class="bp-warning-icon" ng-if="M_CO.coHeaderRec.OrderStatus == 'Quote'">
                                                i
                                            </span>
                                            <span class="bp-orange-warning-icon" ng-if = "F_CO.getStatusForSpecialOrder()">
                                                <i class="orange" ng-include="'{!Application_Images}/Icons/warning-filled.svg'"></i>
                                            </span>
                                            <div class="bp-warning-msg">    
                                                <span class="bp-dark-grey1-font H301 line-height-large" ng-if="M_CO.coHeaderRec.OrderStatus == 'Quote'">All parts will remain uncommited and unordered because your order is set as a quote.</span>
                                                <span class="H301" ng-if="F_CO.getStatusForSpecialOrder()">Parts have already been ordered, you can no longer change this setting.</span>
                                            </div>
                                        </div>
                                    </div> 
                                	<ul class="transaction-type-rec" ng-class="{'disable-radio-button': M_CO.coHeaderRec.OrderStatus == 'Quote' || F_CO.getStatusForSpecialOrder() || M_CO.isAsyncActionInProgress}">
                                        <li ng-repeat = "transactionrec in M_CO.transactionType">
                                            <div class="circle" ng-click = "M_CO.transactionSelectedIndex = $index; M_CO.saveCoHeaderInfo()" ng-class="{'radioButtonSelected': M_CO.transactionSelectedIndex == $index}" ></div>
                                            <label class="H400 transaction-type-label">{{transactionrec.label}}</label>
                                            <span class="H301 line-height-large">{{transactionrec.value}}</span>
                                        </li>
                                    </ul>
                            </div>
                        </div>
                    </div>
                    <div class = "col-xs-12 col-sm-6 form-container">
                            <div class="col-xs-12">
                        <div>
                            <label class="col-xs-6 bp-font-16 MB0">{{ 'pa_Totals' | translate }}</label>
                        </div>

                        <table class="col-xs-12 table" id="totals_table">
      
                            <col width="37%" />
                            <col width="20%" />
                            <col width="20%" />
                            <col width="23%" />
                            
                            <thead class="totalsTableHead">
                                <tr>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                </tr>       
                            </thead>
                             <tbody class="totalsTableBody">
                                    <tr >
                                    <td><label class = "MT20">{{ 'Number of items' | translate }}</label></td>
                                    <td > <span class="bp-dark-grey1-font MT20">{{F_CO.getMerchandiseSummeryTotals('Number of items')}}</span></td>
                                    <td></td>
                                    <td></td>
                                 </tr>
                                    <tr >
                                    <td> <label>{{ 'Number of pieces' | translate }}</label></td>
                                    <td ><span class="bp-dark-grey1-font">{{F_CO.getMerchandiseSummeryTotals('Number of pieces')}}</span></td>
                                    <td class="result-col"><label>{{ 'Discounts' | translate }}</label></td>
                                    <td class="result-col"><label class="bulkDiscountHeading">{{ 'Bulk discounts' | translate }}</label></td>
                                 </tr>
                                    <tr >
                                    <td><label>{{ 'Parts total' | translate }}</label></td>
                                    <td ><span class="bp-dark-grey1-font">{{F_CO.getMerchandiseSummeryTotals('Parts total') | currency}}</span></td>
                                    <td class="result-col"><span>{{F_CO.getMerchandiseSummeryTotals('Parts discount') | currency}}</span></td>
                                    <td class="result-col">
                                        <span><numbers-only id-value = "partsBulkDiscount"
                                        class-value = "rightContentInput"
                                        min-value = "0"
                                        max-value = "100"
                                        input-model-value = "M_CO.coHeaderRec.MerchPartsBulkDiscountPct"
                                        blur-value = "F_CO.saveMerchBulkDiscountPercent(true, M_CO.coHeaderRec.MerchPartsBulkDiscountPct)" 
                                        include-negative = "false"
                                        place-holder-value ="0"
                                        precision-length = "2"
                                        force-precision-length = "true"
                                        disabled-value = "!F_CO.isActiveMerchandise() || !GroupOnlyPermissions['Apply bulk discounts'].enabled"/>%</span>
                                    </td>
                                 </tr>
                                    <tr >
                                    <td><label>{{ 'Fees total' | translate }}</label></td>
                                    <td><span class="bp-dark-grey1-font">{{F_CO.getMerchandiseSummeryTotals('Fee total') | currency}}</span></td>
                                    <td class="result-col"> <span >{{F_CO.getMerchandiseSummeryTotals('Fee discount') | currency}}</span></td>
                                    <td class="result-col">
                                        <span>
                                        <numbers-only id-value = "feeBulkDiscount"
                                        class-value = "rightContentInput"
                                        min-value = "0"
                                        max-value = "100"
                                        input-model-value = "M_CO.coHeaderRec.MerchFeesBulkDiscountPct"
                                        blur-value = "F_CO.saveMerchBulkDiscountPercent(false, M_CO.coHeaderRec.MerchFeesBulkDiscountPct)"  
                                        include-negative = "false"
                                        place-holder-value ="0"
                                        precision-length = "2"
                                        force-precision-length = "true"
                                        disabled-value = "!F_CO.isActiveMerchandise() || !GroupOnlyPermissions['Apply bulk discounts'].enabled "/>%</span>
                                    </td>
                                 </tr>
                                    <tr ng-if="!M_CO.IsTaxIncludingPricing">
                                    <td><label class = "bp-bold-font">{{ 'SUBTOTAL' | translate }}</label></td>
                                    <td><span class="bp-dark-grey1-font bp-font-14 bp-bold-font">{{(F_CO.getMerchandiseSummeryTotals('Parts total') + F_CO.getMerchandiseSummeryTotals('Fee total')) | currency}}</span></td>
                                    <td></td>
                                    <td></td>
                                 </tr>
                                    <tr ng-if="!M_CO.IsTaxIncludingPricing">
                                    <td ><label>{{ 'Sales taxes' | translate }}</label></td>
                                    <td class="dealTotalSummary" ng-class="{'dummy-animation': M_CO.fetchingMerchandiseSalesTax}">
                                        <div class="sales-tax-section">
                                            <span class="bp-dark-grey1-font sales-tax-value" ng-if="!M_CO.fetchingMerchandiseSalesTax">{{M_CO.coHeaderRec.MerchandiseSalesTaxTotal ? M_CO.coHeaderRec.MerchandiseSalesTaxTotal : 0 | currency}}</span>
                                            <span class="bp-dark-grey1-font sales-tax-value dummySalesTax dummy-tag-name" ng-if="M_CO.fetchingMerchandiseSalesTax"></span>
                                            <span class="info-icon">
                                                <i class="fa fa-info-circle" data-toggle="tooltip" title="Sales taxes" tooltip-loader="tooltip-loader" id="Merchandise_Section_SalesTaxList" ng-click="F_CO.showSectionSalesTaxList($event, 'PartsAccessories')"></i>
                                            </span>
                                        </div>
                                    </td>
                                    <td></td>
                                    <td></td>
                                 </tr>
                                    <tr >
                                    <td><label class = "bp-bold-font">{{ 'PA_TOTALS' | translate }}</label></td>
                                    <td class="dealTotalSummary" ng-class="{'dummy-animation': M_CO.fetchingMerchandiseSalesTax}"> 
                                        <span class="bp-dark-grey1-font bp-font-14 bp-bold-font" ng-if="!M_CO.fetchingMerchandiseSalesTax">{{F_CO.getMerchandiseSummeryTotals('totals') | currency}}</span>
                                        <span class="bp-dark-grey1-font dummySalesTax dummy-tag-name" ng-if="M_CO.fetchingMerchandiseSalesTax"></span>
                                    </td>
                                    <td></td>
                                    <td></td>
                                 </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            </div>
        <div class="bp-inner-accordian open dfSummary" ng-class="{'bp-inner-accordian-opened': M_CO.expandedInnerSectionName == 'Merchandise_PartsAccessoriesFeesSection'}">
            <div class="inner-accordian-header col-md-12" ng-click = "F_CO.expandOrCollapseInnerSection('Merchandise_PartsAccessoriesFeesSectionId', 'Merchandise_PartsAccessoriesFeesSection')">
                <div class="inner-accordian-header-left">
                    <h2 class="accordian-left-details text-upperCase">{{ 'Parts_Accessories_Fees' | translate }}</h2>
                </div>
                <div class="accordian-right-details">
                    <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName != 'Merchandise_PartsAccessoriesFeesSection'">
                        <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowDown</i>
                    </a> 
                    <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName == 'Merchandise_PartsAccessoriesFeesSection'">
                        <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowUp</i>
                    </a>
                </div>
            </div>
            <div class="inner-accordian-body bp-collapse-div-transition col-md-12 merchandiseLineItemWrapper" id="Merchandise_PartsAccessoriesFeesSectionId" ng-class="{'bp-expand-div-transition': M_CO.expandedSectionName == 'Merchandise_PartsAccessoriesFeesSection'}">
            <div class="expandableContainer">
                <div class="table-responsive" ng-if="M_CO.COKHList.length > 0" ng-class="{'PB67' : M_CO.coHeaderRec.OrderStatus === 'Closed'}">
                    <table class="bp-editable-table SOJobItemsGrid">
                        <col width="5%" />
                        <col width="20%" />
                        <col width="15%" />
                        <col width="15%" />
                        <col width="15%" />
                        <col width="15%" />
                        <col width="15%" />
                        <thead>
                            <tr>
                                <th></th>
                                <th class="bp-text-uppercase">{{ 'Item_description' | translate }}</th>
                                <th class="bp-text-uppercase text-center">{{ 'Qty_needed' | translate }}</th>
                                <th class="bp-text-uppercase text-center">{{ 'Label_Status' | translate }}</th>
                                <th class="bp-text-uppercase text-center">{{ 'Label_Price' | translate }}</th>
                                <th class="bp-text-uppercase text-center">{{ 'Label_Subtotal' | translate }}</th>
                                <th class="bp-text-uppercase"></th>
                            </tr>
                        </thead>
                        <tbody ng-repeat="COKHitem in M_CO.COKHList" ng-init="CoKitHeaderIndex = $index">

                            <!-- Start: Kit Header Row -->
                            <tr ng-if="COKHitem.Id" class="bp-expanded-deletable-div-transition kitHeaderTr" ng-class="{'bp-tr-hover' : !COKHitem.isAsyncActionInProgress,'dummy-animation':COKHitem.isAsyncActionInProgress}" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}" ng-click="F_CO.editLineItem(COKHitem, 'Merchandise_Section_COKitHeader', CoKitHeaderIndex)">
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                    'bp-disabled': M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}' 
                                                        && !F_CO.displayEditBtnOnLineItem('Merchandise', 'KHItem', '', CoKitHeaderIndex)}">
                                    <i class="bp-icons bp-font-25 bp-grey-font stroke-3 itemSvg tableItem">kit</i>
                                </td>
                                <td class="boldText" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                    'bp-disabled': M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}' 
                                                        && !F_CO.displayEditBtnOnLineItem('Merchandise', 'KHItem', '', CoKitHeaderIndex)}">
                                    <div class="liItemDesc_setTextEllipsis">
                                        <!-- InnerFlexContainer -->
                                        <span class="bp-blue-font">{{::COKHitem.ItemDescription}}</span>
                                        <!-- setTextEllipsis -->
                                    </div>
                                </td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                    'bp-disabled': M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}' 
                                                        && !F_CO.displayEditBtnOnLineItem('Merchandise', 'KHItem', '', CoKitHeaderIndex)}">
                                </td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                    'bp-disabled': M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}' 
                                                        && !F_CO.displayEditBtnOnLineItem('Merchandise', 'KHItem', '', CoKitHeaderIndex)}">
                                </td>
                                <td ng-if="COKHitem.isAsyncActionInProgress" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}'}"><div class="dummy-tag-name"></div></td>
                                <td ng-if="COKHitem.isAsyncActionInProgress" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}'}"><div class="dummy-tag-name"></div></td>

                                <td ng-if="!COKHitem.isAsyncActionInProgress" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                    'bp-disabled': M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}' 
                                                        && !F_CO.displayEditBtnOnLineItem('Merchandise', 'KHItem', '', CoKitHeaderIndex)}">
                                    <span ng-if="M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex" ng-class="{'fixedPriceWithLock': (COKHitem.IsFixedPrice || COKHitem.IsFixedKitHeaderCO), 'pull-left': (COKHitem.IsFixedPrice || COKHitem.IsFixedKitHeaderCO)}">{{::COKHitem.Price | currency}}</span>
                                    <span ng-if="M_CO.editLineItem == 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex">
                                                        <numbers-only id-value = "Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_Price"
                                                            class-value = "bp-input-text inTimeEdit timeField text-center"
                                                            input-model-value = "COKHitem.Price" 
                                                            include-negative = "false"
                                                            include-zero = "true"
                                                            precision-length = "2"
                                                            blur-value = "F_CO.updateCOKHItem('Merchandise', CoKitHeaderIndex, $event, '_Price')"
                                                            input-keydown-value="F_CO.setFlagOnTabForBlurHandling($event)"/>
                                                    </span>
                                    <i class="bp-icons bp-font-12 bp-grey-font pull-left lockSvg" ng-if="(COKHitem.IsFixedPrice) && (M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex)">lock</i>
                                    <i class="bp-icons bp-font-12 bp-grey-font pull-left lockSvg" ng-if="(COKHitem.IsFixedKitHeaderCO) && (M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex)">lock</i>
                                </td>
                                <td ng-if="!COKHitem.isAsyncActionInProgress" class="text-center boldText" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                    'bp-disabled': M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}' 
                                                        && !F_CO.displayEditBtnOnLineItem('Merchandise', 'KHItem', '', CoKitHeaderIndex)}">
                                    <span>{{::COKHitem.Price | currency}}</span>
                                </td>
                                <td ng-if="COKHitem.IsDummyKit" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}'}"><div class="dummy-tag-name"></div></td>
                                <td ng-if="!COKHitem.IsDummyKit" class="partInvIconAdjustment" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                    'bp-disabled': (COKHitem.COLIList[0].Status === 'Invoiced' || !GroupOnlyPermissions['Merchandise']['create/modify'] || F_CO.isArchivedQuote())}">
                                    <span data-toggle="tooltip" title="More actions" tooltip-loader = "tooltip-loader" ng-if="COKHitem.COLIList[0].Status != 'Invoiced' 
                                                        && GroupOnlyPermissions['Merchandise']['create/modify'] && !F_CO.isArchivedQuote()" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_deleteBtn">

                                        <i class="bp-icons bp-blue-font bp-font-18 LIDeleteBtn" ng-if = "M_CO.coHeaderRec.CustomerId != undefined && M_CO.coHeaderRec.COType != 'Cash Sale'" ng-click="F_CO.openMoveLineItemModalWindowAction('Merchandise', COKHitem.Id, null, $event); F_CO.openMoveOrDeleteConfirmationPopup('', '', CoKitHeaderIndex, COKHitem.Id, '', '', 'Merchandise', true);">moreAction</i>
                                        <i class="bp-icons bp-blue-font bp-font-18 LIDeleteBtn" ng-if = "M_CO.coHeaderRec.CustomerId == undefined && M_CO.coHeaderRec.COType == 'Cash Sale'" ng-click = "F_CO.openMoveOrDeleteConfirmationPopup('', '', CoKitHeaderIndex, COKHitem.Id, '', '', 'Merchandise', true)">delete</i>
                                                    </span>
                                </td>
                            </tr>
                            <!-- End: Kit Header Row -->

                            <!-- Start: Kit Line Items Row with Kit Header (Kit Line Items) -->
                            <tr class="bp-expanded-deletable-div-transition kitLITr bp-tr-hover" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}" ng-if="COKHitem.Id" ng-click="F_CO.editLineItem(COLI, 'Merchandise_Section_COKitHeader', CoKitHeaderIndex, CoLIIndex, '', '', (COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart))" ng-repeat-start="COLI in COKHitem.COLIList" ng-init="CoLIIndex = $index"
                            ng-class="{'bp-tr-hover' : !COKHitem.isAsyncActionInProgress,'dummy-animation':COKHitem.isAsyncActionInProgress,'no-border':COKHitem.Id && M_CO.supersededParts[COLI.PartId] != null}">
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}' || M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                         'bp-disabled': M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}' 
                                                             && !F_CO.displayEditBtnOnLineItem('Merchandise', 'KitLI', '', CoKitHeaderIndex, CoLIIndex)}">
                                </td>
                                <td class="boldText" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}' || M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                         'bp-disabled': M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}' 
                                                             && !F_CO.displayEditBtnOnLineItem('Merchandise', 'KitLI', '', CoKitHeaderIndex, CoLIIndex)}">
                                    <div class="liItemDesc_setTextEllipsis" ng-if="(M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index) || (COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart)">
                                        <i class="bp-icons pull-left bp-font-23 bp-grey-font stroke-3 bp-fw-100 itemSvg kitItemSvg" ng-if="COLI.EntityType == 'Part'">part</i>
                                        <i class="bp-icons pull-left bp-font-23 bp-grey-font stroke-3 bp-fw-100 itemSvg kitItemSvg" ng-if="COLI.EntityType == 'Env Fee' || COLI.EntityType == 'Fee'">fee</i>

                                        <span class="bp-blue-font" ng-class="{'bp-blue-hover' : (COLI.EntityType == 'Part')}" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_itemDesc" ng-click="F_CO.moveToState('ViewPart',{Id:COLI.PartId},(COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart))">
                                                             {{::COLI.ItemCode}} - {{::COLI.ItemDescription}}
                                                         </span>
                                    </div>

                                    <div class="liItemDesc" ng-if="(M_CO.editLineItem == 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index) && (COLI.EntityType != 'Part' || (COLI.EntityType == 'Part' && COLI.IsNonInventoryPart))">
                                        <i class="bp-icons pull-left bp-font-23 bp-grey-font stroke-3 bp-fw-100 itemSvg kitItemSvg" ng-if="COLI.EntityType == 'Part'">part</i>
                                        <i class="bp-icons pull-left bp-font-23 bp-grey-font stroke-3 bp-fw-100 itemSvg kitItemSvg" ng-if="COLI.EntityType == 'Env Fee' || COLI.EntityType == 'Fee'">fee</i>

                                        <span class="editableDescInput editableKitDescInput" ng-class="{'focusInput': setBotrderOnSpan}">
                                                             <span class="itemCode">{{::COLI.ItemCode}} - </span>
                                        <input id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_itemDesc" class="bp-input-text text-center" ng-focus="setBotrderOnSpan = true;" ng-blur="setBotrderOnSpan = false; F_CO.UpdateCOLineItem(CoKitHeaderIndex, CoLIIndex, $event);" ng-keydown="F_CO.setFlagOnTabForBlurHandling($event)" type="text" ng-model="COLI.ItemDescription" maxlength = "255"/>
                                        </span>
                                    </div>
                                </td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}' || M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                         'bp-disabled': M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}' 
                                                             && !F_CO.displayEditBtnOnLineItem('Merchandise', 'KitLI', '', CoKitHeaderIndex, CoLIIndex)}">
                                    <span>{{::COLI.Qty}}</span>
                                </td>
                                <td class="text-center bp-bold-font" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}' || M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                         'bp-disabled': M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'
                                                             && !F_CO.displayEditBtnOnLineItem('Merchandise', 'KitLI', '', CoKitHeaderIndex, CoLIIndex)}">
                                    <span ng-if="M_CO.coHeaderRec.OrderStatus != 'Quote' && M_CO.coHeaderRec.MerchandiseCommitOrdercontrols != 'Uncommitted' && COLI.EntityType == 'Part' && COLI.Status!=='Ordered' && !COLI.IsNonInventoryPart && !M_CO.COKHList[CoKitHeaderIndex].COLIList[CoLIIndex].ShowItemInfo && (COLI.QtyCommitted == 0 && COLI.QtyOrder > 0)" class="bp-red-font col-xs-12 P0">{{ 'Part_Object_Status_Required' | translate }}</span>
                                    <span ng-if="M_CO.coHeaderRec.OrderStatus != 'Quote' && M_CO.coHeaderRec.MerchandiseCommitOrdercontrols != 'Uncommitted' && COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart && !M_CO.COKHList[CoKitHeaderIndex].COLIList[CoLIIndex].ShowItemInfo && (COLI.QtyCommitted > 0 && COLI.QtyOrder > 0)" class="bp-orange-font col-xs-12 P0">{{ 'Part_Object_Status_Multiple' | translate }}</span>

                                    <!-- Start: Status for kit LI - Inventory part -->
                                    <span ng-if="(COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart && !M_CO.COKHList[CoKitHeaderIndex].COLIList[CoLIIndex].ShowItemInfo && (M_CO.coHeaderRec.OrderStatus === 'Quote' || M_CO.coHeaderRec.MerchandiseCommitOrdercontrols === 'Uncommitted' || (!(COLI.QtyCommitted >= 0 && COLI.QtyOrder > 0) || (COLI.Status === 'Ordered' && COLI.QtyCommitted == 0 ))))" ng-class="{'bp-green-font': COLI.Status == 'In Stock', 'bp-green-dark-font': COLI.Status == 'Invoiced',
                                                         'bp-red-font': (COLI.Status == 'Required' || COLI.Status === 'RETURN' || COLI.Status === 'Oversold'),
                                                         'bp-coral-light-bg': (COLI.Status === 'RETURN' || COLI.Status === 'Oversold'),
                                                         'bp-status-bubble': (COLI.Status === 'RETURN' || COLI.Status === 'Oversold'),
                                                         'bp-orange-font': (COLI.Status === 'Ordered'),
                                                         'bp-first-letter-capitalize': (COLI.Status === 'RETURN' || COLI.Status === 'Oversold')}" class="P0"> {{((COLI.Qty - COLI.QtyCommitted) > 0 &amp;&amp; (COLI.QtyCommitted != 0)) ? "Multiple" : COLI.Status }}</span>
                                    <!-- col-xs-12  -->
                                    <!-- End: Status for kit LI - Inventory part -->

                                    <!-- Start: Status for kit LI - Non Inventory part -->
                                    <span ng-if="COLI.EntityType == 'Part' && COLI.IsNonInventoryPart" ng-class="{'bp-green-font': (COLI.Status != 'Invoiced' && (COLI.Qty >= 0)),
                                                         'bp-green-dark-font': COLI.Status == 'Invoiced', 
                                                         'bp-red-font': (COLI.Status != 'Invoiced' && !(COLI.Qty >= 0)), 
                                                         'bp-coral-light-bg': (COLI.Status != 'Invoiced' && !(COLI.Qty >= 0)),
                                                         'bp-status-bubble': (COLI.Status != 'Invoiced' && !(COLI.Qty >= 0))}" class="P0"><!-- col-xs-12  -->
                                                         {{(COLI.Status == "Invoiced")  ? "Invoiced" : ((COLI.Qty >= 0) ? "In Stock" : 'Return')}}
                                                     </span>
                                    <!-- End: Status for kit LI - Non Inventory part -->

                                    <span ng-if="COLI.EntityType != 'Part'" ng-class="{'bp-cyan-font': COLI.Status != 'Invoiced','bp-green-dark-font': COLI.Status == 'Invoiced'}" class="col-xs-12 P0"> {{COLI.Status == "Invoiced"  ? "Invoiced" : "Ready" }}</span>
                                </td>
                                <td ng-if="COKHitem.isAsyncActionInProgress" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"><div class="dummy-tag-name"></div></td>
                                <td ng-if="COKHitem.isAsyncActionInProgress" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"><div class="dummy-tag-name"></div></td>
                                <td ng-if="!COKHitem.isAsyncActionInProgress" class="text-center price-edit" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}' || M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                         'bp-disabled': M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}' 
                                                             && !F_CO.displayEditBtnOnLineItem('Merchandise', 'KitLI', '', CoKitHeaderIndex, CoLIIndex)}">
                                    <span ng-if="(M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index
                                                                     || !GroupOnlyPermissions['Override price'].enabled || COLI.IsFixedPrice)" ng-class="{'fixedPriceWithLock': (COLI.IsFixedPrice || COLI.IsFixedPriceForCO), 'pull-left': (COLI.IsFixedPrice || COLI.IsFixedPriceForCO)}">
                                                        {{::COLI.Price | currency}}
                                                     </span>
                                    <span ng-if="(M_CO.editLineItem == 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index 
                                                        && GroupOnlyPermissions['Override price'].enabled && !COLI.IsFixedPrice)">
                                                        <numbers-only id-value = "Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_Price"
                                                            class-value = "bp-input-text inTimeEdit timeField text-center"
                                                            input-model-value = "COLI.Price" 
                                                            include-negative = "false"
                                                            include-zero = "true"
                                                            precision-length = "2"
                                                            blur-value="F_CO.UpdateCOLineItem(CoKitHeaderIndex, CoLIIndex, $event, '_Price');" 
                                                            input-keydown-value="F_CO.setFlagOnTabForBlurHandling($event)"
                                                            />
                                                    </span>

                                    <i class="bp-icons bp-font-12 bp-grey-font pull-left lockSvg" ng-if="(COLI.IsFixedPrice) && (M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index)">lock</i>
                                    <i class="bp-icons bp-font-12 bp-grey-font pull-left lockSvg" ng-if="(COLI.IsFixedPriceForCO) && (M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index)">lock</i>

                                    <span class="price-variance-warning" ng-if="(M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index || !GroupOnlyPermissions['Override price'].enabled || COLI.IsFixedPrice) && COLI.Status == 'Required' && M_CO.IsForeignExchangeCostingEnabled && COLI.IsForeignVendor">
                                        <span data-toggle="tooltip" data-original-title="{{'Special_ordering_a_foreign_part_click_to_learn_more' | translate}}" data-html="true">
                                            <i id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_warning" ng-click="F_CO.openPriceVarianceWarningModal($event, 'Merchandise', CoKitHeaderIndex, $index)" class="bp-icons bp-tart-orange-font bp-font-14">warningFilled</i>
                                        </span>
                                    </span>
                                    <span ng-if="(M_CO.editLineItem == 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index && GroupOnlyPermissions['Override price'].enabled && !COLI.IsFixedPrice && COLI.Status == 'Required' && M_CO.IsForeignExchangeCostingEnabled && COLI.IsForeignVendor)">
                                        <span class="warning-icon" data-toggle="tooltip" data-original-title="{{'Special_ordering_a_foreign_part_click_to_learn_more' | translate}}" data-html="true">
                                            <i id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_warning" ng-click="F_CO.openPriceVarianceWarningModal($event, 'Merchandise', CoKitHeaderIndex, $index)" class="bp-icons bp-tart-orange-font bp-font-14">warningFilled</i>
                                        </span>
                                    </span>
                                </td>
                                <td ng-if="!COKHitem.isAsyncActionInProgress" class="text-center boldText" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}' || M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                         'bp-disabled': M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}' 
                                                             && !F_CO.displayEditBtnOnLineItem('Merchandise', 'KitLI', '', CoKitHeaderIndex, CoLIIndex)}">
                                    <span ng-class="{'bp-red-font': (COLI.Qty * COLI.Price) < 0}">{{(COLI.Qty * COLI.Price) | currency}}</span>
                                </td>
                                <td ng-if="COLI.IsDummyLineItem" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"><div class="dummy-tag-name"></div></td>
                                <td ng-if="!COLI.IsDummyLineItem" class="partInvIconAdjustment" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}' || M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}',
                                                     'bp-disabled': (COLI.Status === 'Invoiced' || F_CO.isArchivedQuote())}">

                                    <i class="bp-icons bp-blue-font bp-font-20 bp-chevron bp-cursor-pointer" data-toggle="tooltip" title="{!$Label.More_options}" tooltip-loader = "tooltip-loader" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_moreOptions" ng-class="{'bp-chevron-up' : M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo, 'bp-chevron-down' : !M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo}" ng-if="COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart && (COLI.Qty >= 0) && COLI.Status != 'Invoiced' && !F_CO.isArchivedQuote()" ng-click="F_CO.showHideMerchandiseItemInfo(CoKitHeaderIndex, CoLIIndex)">expandBadge</i>
                                </td>
                            </tr>
                            <tr ng-if="COKHitem.Id && M_CO.supersededParts[COLI.PartId] != null && COLI.Status != 'Invoiced'">
                                <td></td>
                                <td colspan="8">
                                    <div class="show_Availableline text-uppercase bgYellow"><span class="logo-icon">i</span>{{ 'part_has_been_superseded_to' | translate}} : {{M_CO.supersededParts[COLI.PartId].partNumber}}</div>
                                 </td>
                                 <td></td>
                            </tr>

                            <!-- Start: Merchandise Special Order Section For Kit Line Items -->
                            <tr class="bp-expanded-deletable-div-transition itemOrderInfoTR" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_StockCommitted" ng-if="COKHitem.Id && COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart && M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo && (COLI.Qty >= 0) && !M_CO.showQuote && M_CO.coHeaderRec.MerchandiseCommitOrdercontrols != 'Uncommitted'">
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                                <td class="boldText" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}">
                                    <div class="liItemDesc_setTextEllipsis bp-dark-grey2-font">
                                        <span>{{' Committed_from_the_stock' | translate }}</span>
                                    </div>
                                </td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}">
                                    <span ng-if="M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index">{{::COLI.StockCommited}}</span>
                                    <span ng-if="M_CO.editLineItem == 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index">
                                                         <numbers-only id-value="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_StockCommitted"
                                                             class-value="bp-input-text inTimeEdit timeField text-center"
                                                             min-value="0"
                                                             max-value="{{F_CO.getMaxCommitedValue(COLI)}}"
                                                             input-model-value="COLI.QtyCommitted" 
                                                             include-negative="false"
                                                             include-zero="true"
                                                             precision-length="2"
                                                             force-precision-length="false"
                                                             blur-value = "F_CO.UpdateCOLineItem(CoKitHeaderIndex, $index, $event, '_StockCommitted');"
                                                             input-keydown-value="F_CO.setFlagOnTabForBlurHandling($event)"
                                                             input-keyup-value="F_CO.calculateSpecialOrderValue('Merchandise', 'StockCommited', CoKitHeaderIndex, null, $index, (COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart));"/>
                                                     </span>
                                </td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}">
                                    <span class="bp-green-font bp-bold-font">{{ 'Part_Object_Status_InStock' | translate }}</span>
                                </td>
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                            </tr>
                            <tr class="bp-expanded-deletable-div-transition itemOrderInfoTR" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_QtyOrder" ng-if="COKHitem.Id && (COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart && M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo && (COLI.Qty >= 0)) && !M_CO.showQuote && M_CO.coHeaderRec.MerchandiseCommitOrdercontrols != 'Uncommitted'">
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                                <td class="boldText" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}">
                                    <div class="liItemDesc_setTextEllipsis bp-red-font">
                                        <span>{{ 'Quantity_to_order' | translate }}</span>
                                    </div>
                                </td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}">
                                    <span>{{COLI.QtyOrder}}</span>
                                </td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}">
                                    <span class="bp-red-font bp-bold-font" ng-if="COLI.Status !== 'Ordered'">{{ 'Part_Object_Status_Required' | translate }}</span>
                                    <span class="bp-orange-font bp-bold-font" ng-if="COLI.Status === 'Ordered'">{{ 'Label_Ordered' | translate }}</span>
                                </td>
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                            </tr>

                            <tr class="inventory-status-liItem" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_AvailableInventory"  ng-repeat-end="ng-repeat-end" ng-if="COKHitem.Id && (COLI.EntityType == 'Part') && !COLI.IsDummyLineItem && !COLI.IsNonInventoryPart && (M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo || M_CO.editLineItem == 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index)">
                                <td colspan="7" class="PN0">
                                    <table class="table-extra-for-button">
                                        <col width="40%" ng-show="(!(COLI.QtyOrder > 0 && COLI.Status !== 'Ordered' && COLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) || !((M_CO.isBRPEnabled && COLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(COLI.VendorId)) || !M_CO.isMeshEnabledOrg)" />
                                        <col width="34%" ng-show="((COLI.QtyOrder > 0 && COLI.Status !== 'Ordered' && COLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) && ((M_CO.isBRPEnabled && COLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(COLI.VendorId)) && M_CO.isMeshEnabledOrg)" />
                                        <col width="" />
                                        <col width="10%" ng-show="(!(COLI.QtyOrder > 0 && COLI.Status !== 'Ordered' && COLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) || !((M_CO.isBRPEnabled && COLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(COLI.VendorId)) || !M_CO.isMeshEnabledOrg)" />
                                        <col width="1%" ng-show="((COLI.QtyOrder > 0 && COLI.Status !== 'Ordered' && COLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) && ((M_CO.isBRPEnabled && COLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(COLI.VendorId)) && M_CO.isMeshEnabledOrg)" />
                                        <tbody>
                                            <tr class="inventory-status-liItem" ng-class="{ 'liItem-bg-white': ((COLI.ActualAvailableParts - COLI.QtyCommitted) > 0 && !M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo), 'liItem-bg-red': ((COLI.ActualAvailableParts - COLI.Qty) <= 0 && COLI.ActualAvailableParts - COLI.QtyCommitted <= 0), 'liItem-bg-orange': ((COLI.ActualAvailableParts - COLI.QtyCommitted > 0) && M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo)}">
                                                <td  class="helper-text-label">
                                                    <span ng-if="(COLI.ActualAvailableParts - COLI.QtyCommitted) > 0 && !M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo" class="label-text"><span class="liItem-text-strong"> {{::COLI.AvaliablePartsQty}} </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{COLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                    <span ng-if="((COLI.ActualAvailableParts - COLI.Qty) <= 0 && COLI.ActualAvailableParts - COLI.QtyCommitted <= 0)" class="label-text red"><span class="liItem-text-strong">0 </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{COLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                    <span ng-if="(COLI.ActualAvailableParts - COLI.QtyCommitted > 0) && M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo" class="label-text orange"><span class="liItem-text-strong"> {{COLI.ActualAvailableParts - COLI.QtyCommitted}} </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{COLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                </td>
                                                <td class="text-left liItemBtn" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_inventoryButtons">
                                                    <button id="allocateOnOrder" ng-if="(COLI.QtyOrder > 0 && COLI.Status !== 'Ordered') && COLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled" class="bp-btn bp-btn-normal table-extra-btn-placement" ng-click="F_CO.openReallocateModalWindow(COLI, M_CO.COHeaderId, 'Merchandise')">{{ 'Allocate_on_order' | translate }}</button>
                                                    <button class="bp-btn secondary-btn table-extra-btn-placement" ng-if="(M_CO.isBRPEnabled && COLI.IsBRPPart)" ng-click="F_CO.openPartLocatorWindow(COLI, 'Merchandise')" >{{ 'Vendor_Availability' | translate }}</button>
                                                    <button class="bp-btn secondary-btn table-extra-btn-placement" ng-if="F_CO.displayVendorAvailabilityButton(COLI.VendorId)" ng-click="F_CO.openVendorAvailabilityWindow(COLI.PartId, 'Merchandise')" >{{ 'Vendor_Availability' | translate }} - {{COLI.CassonsSOH}}</button>
                                                    <span ng-if="M_CO.isMeshEnabledOrg && M_CO.collectiveInfo.externalId && COLI.ItemCode" class="table-extra-btn-placement" ng-bind-html="F_CO.partLookupHtml(COLI.ItemCode, 'MerchandiseSection', CoKitHeaderIndex)"></span>
                                                    <a class="view-related-label" data-target="#SupersededPart" data-toggle="modal" ng-click="showAlternatePartDialog=true; F_CO.getAlternateParts(COLI, M_CO.COHeaderId, 'Merchandise', CoKitHeaderIndex);">{{ 'View_related_parts' | translate }}</a>
                                                </td>
                                                <td class="helper-text-label" ng-class="{ 'bg-white': ((COLI.ActualAvailableParts - COLI.QtyCommitted) > 0 && !M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo), 'bg-red': ((COLI.ActualAvailableParts - COLI.Qty) <= 0 && COLI.ActualAvailableParts - COLI.QtyCommitted <= 0), 'bg-orange': ((COLI.ActualAvailableParts - COLI.QtyCommitted > 0) && M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo)}"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                            <!-- End: Merchandise Special Order Section For Kit Line Items -->

                            <tr ng-if="COKHitem.Id && COKHitem.COLIList[0].Status !== 'Invoiced' && GroupOnlyPermissions['Merchandise']['create/modify'] && !F_CO.isArchivedQuote()">
                                <td></td>
                                <td colspan="5" class="breakUpKit" ng-class = "{'bp-disabled': COKHitem.isAsyncActionInProgress}">
                                    <span ng-click="F_CO.splitCOKHItem(COKHitem.Id)">{{ 'Break_up_kit' | translate }}</span>
                                </td>
                                <td class="bg-white"></td>
                            </tr>
                            <!-- End: Kit Line Items Row with Kit Header (Kit Line Items) -->

                            <!-- Start: Line Items Row without Kit Header (Non Kit Line Items) -->
                            <tr class="bp-expanded-deletable-div-transition" ng-repeat-start="COLI in COKHitem.COLIList" ng-if="!COKHitem.Id" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}" ng-init="CoLIIndex = $index" ng-click="F_CO.editLineItem(COLI, 'Merchandise_Section_COKitHeader', CoKitHeaderIndex, CoLIIndex, '', '', (COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart))"
                            ng-class="{'bp-tr-hover' : !COKHitem.isAsyncActionInProgress,'dummy-animation':COKHitem.isAsyncActionInProgress,'no-border':!COKHitem.Id && M_CO.supersededParts[COLI.PartId] != null}">
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}',
                                                    'bp-disabled': (!F_CO.displayEditBtnOnLineItem('Merchandise', 'NonKitLI', '', CoKitHeaderIndex, CoLIIndex) 
                                                        && M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}')}">
                                    <i class="bp-icons bp-font-25 bp-grey-font stroke-3 itemSvg tableItem" ng-if="COLI.EntityType == 'Part'">part</i>
                                    <i class="bp-icons bp-font-25 bp-grey-font stroke-3 itemSvg tableItem" ng-if="COLI.EntityType == 'Env Fee' || COLI.EntityType == 'Fee'">fee</i>
                                </td>
                                <td class="boldText" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}',
                                                    'bp-disabled': (!F_CO.displayEditBtnOnLineItem('Merchandise', 'NonKitLI', '', CoKitHeaderIndex, CoLIIndex) 
                                                        && M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}')}">
                                    <div class="liItemDesc_setTextEllipsis" ng-if="(M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index) || (COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart)">
                                        <!-- InnerFlexContainer -->
                                        <span class="bp-blue-font" ng-class="{'bp-blue-hover' : COLI.EntityType == 'Part'}" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_itemDesc" ng-click="F_CO.moveToState('ViewPart',{Id:COLI.PartId},(COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart))">
                                                            {{::COLI.ItemCode}} - {{::COLI.ItemDescription}}
                                                        </span>
                                        <!--  class ="setTextEllipsis"; {{COLI.Item}}-->
                                    </div>

                                    <div class="liItemDesc" ng-if="(M_CO.editLineItem == 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index) && (COLI.EntityType != 'Part' || (COLI.EntityType == 'Part' && COLI.IsNonInventoryPart))">
                                        <span class="editableDescInput" ng-class="{'focusInput': setBotrderOnSpan}"> 
                                                            <span class="itemCode">{{::COLI.ItemCode}} - </span>
                                        <input id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_itemDesc" class="bp-input-text text-center" ng-focus="setBotrderOnSpan = true;" ng-blur="setBotrderOnSpan = false; F_CO.UpdateCOLineItem(CoKitHeaderIndex, CoLIIndex, $event);" ng-keydown="F_CO.setFlagOnTabForBlurHandling($event)" type="text" ng-model="COLI.ItemDescription" maxlength = "255"/>
                                        </span>
                                    </div>
                                </td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}', 
                                                    'bp-disabled': (!F_CO.displayEditBtnOnLineItem('Merchandise', 'NonKitLI', '', CoKitHeaderIndex, CoLIIndex) 
                                                        && M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}')}">
                                    <span ng-show="M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index || (!(COLI.Qty >= 0) && COLI.Qty !== '.' && !GroupOnlyPermissions['Returns']['enabled'])">{{COLI.Qty}}</span>
                                    <span ng-show="M_CO.editLineItem == 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index
                                    					&& (COLI.Qty >= 0 || (!(COLI.Qty >= 0) && GroupOnlyPermissions['Returns']['enabled']) || (COLI.Qty === '.' && !GroupOnlyPermissions['Returns']['enabled'])) ">
                                                        <numbers-only id-value = "Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_Qty"
                                                            class-value = "bp-input-text inTimeEdit timeField text-center"
                                                            min-value = "{{F_CO.getMinAttributeValueBasedOnReturnFlag('Merch', null, null, (COLI.EntityType == 'Env Fee' || COLI.EntityType == 'Fee'))}}"
                                                            default-value = "1"
                                                            input-model-value = "COLI.Qty" 
                                                            include-negative = "F_CO.allowReturn('Merch', null, null, (COLI.EntityType == 'Env Fee' || COLI.EntityType == 'Fee'))"
                                                            include-zero = "false"
                                                            precision-length = "2"
                                                            force-precision-length = "false"
                                                            blur-value="F_CO.UpdateCOLineItem(CoKitHeaderIndex, CoLIIndex, $event, '_Qty');" 
                                                            input-keydown-value="F_CO.setFlagOnTabForBlurHandling($event)"
                                                            input-keyup-value="F_CO.calculateSpecialOrderValue('Merchandise', 'QtyNeeded', CoKitHeaderIndex, null, $index, (COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart));"/>
                                                    </span>
                                </td> 
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}" ng-if="COKHitem.isAsyncActionInProgress"><div class="dummy-tag-name"></div></td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}" ng-if="COKHitem.isAsyncActionInProgress"><div class="dummy-tag-name"></div></td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}" ng-if="COKHitem.isAsyncActionInProgress"><div class="dummy-tag-name"></div></td>
                                <td ng-if="!COKHitem.isAsyncActionInProgress" class="text-center bp-bold-font" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}',
                                                    'bp-disabled': (!F_CO.displayEditBtnOnLineItem('Merchandise', 'NonKitLI', '', CoKitHeaderIndex, CoLIIndex) 
                                                        && M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}')}">
                                    <!-- <div class="InnerFlexContainer"> -->
                                    <span ng-if="M_CO.coHeaderRec.OrderStatus != 'Quote' && M_CO.coHeaderRec.MerchandiseCommitOrdercontrols != 'Uncommitted' && COLI.EntityType == 'Part' && COLI.Status!=='Ordered' && !COLI.IsNonInventoryPart && !M_CO.COKHList[CoKitHeaderIndex].COLIList[CoLIIndex].ShowItemInfo && (COLI.QtyCommitted == 0 && COLI.QtyOrder > 0)" class="bp-red-font col-xs-12 P0">{{ 'Part_Object_Status_Required' | translate }}</span>
                                    <span ng-if="M_CO.coHeaderRec.OrderStatus != 'Quote' && M_CO.coHeaderRec.MerchandiseCommitOrdercontrols != 'Uncommitted' && COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart && !M_CO.COKHList[CoKitHeaderIndex].COLIList[CoLIIndex].ShowItemInfo && (COLI.QtyCommitted > 0 && COLI.QtyOrder > 0)" class="bp-orange-font col-xs-12 P0">{{ 'Part_Object_Status_Multiple' | translate }}</span>

                                    <!-- Start: Status for Non kit LI - Inventory part -->
                                    <span ng-if="(COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart && !M_CO.COKHList[CoKitHeaderIndex].COLIList[CoLIIndex].ShowItemInfo && (M_CO.coHeaderRec.OrderStatus === 'Quote' || M_CO.coHeaderRec.MerchandiseCommitOrdercontrols === 'Uncommitted' || (!(COLI.QtyCommitted >= 0 && COLI.QtyOrder > 0) || (COLI.Status === 'Ordered' && COLI.QtyCommitted == 0 ))))" ng-class="{'bp-green-font': COLI.Status == 'In Stock', 'bp-green-dark-font': COLI.Status == 'Invoiced',
                                                            'bp-red-font': (COLI.Status == 'Required' || COLI.Status === 'RETURN' || COLI.Status === 'Oversold'),
                                                            'bp-coral-light-bg': (COLI.Status === 'RETURN' || COLI.Status === 'Oversold'),
                                                            'bp-status-bubble': (COLI.Status === 'RETURN' || COLI.Status === 'Oversold'),
                                                            'bp-orange-font': (COLI.Status === 'Ordered'),
                                                            'bp-first-letter-capitalize': (COLI.Status === 'RETURN' || COLI.Status === 'Oversold')}" class="P0">{{COLI.Status}}</span>
                                    <!-- col-xs-12  -->
                                    <!-- End: Status for Non kit LI - Inventory part -->

                                    <!-- Start: Status for Non kit LI - Non Inventory part -->
                                    <span ng-if="COLI.EntityType == 'Part' && COLI.IsNonInventoryPart" ng-class="{'bp-green-font': (COLI.Status != 'Invoiced' && (COLI.Qty >= 0)),
                                                            'bp-green-dark-font': COLI.Status == 'Invoiced', 
                                                            'bp-red-font': (COLI.Status != 'Invoiced' && !(COLI.Qty >= 0)), 
                                                            'bp-coral-light-bg': (COLI.Status != 'Invoiced' && !(COLI.Qty >= 0)),
                                                            'bp-status-bubble': (COLI.Status != 'Invoiced' && !(COLI.Qty >= 0))}" class="P0"><!-- col-xs-12  -->
                                                            {{(COLI.Status == "Invoiced")  ? "Invoiced" : ((COLI.Qty >= 0) ? "In Stock" : 'Return')}}
                                                        </span>
                                    <!-- End: Status for Non kit LI - Non Inventory part -->
                                    <span ng-if="COLI.EntityType != 'Part'" ng-class="{'bp-cyan-font': COLI.Status != 'Invoiced','bp-green-dark-font': COLI.Status == 'Invoiced'}" class="col-xs-12 P0"> {{COLI.Status == "Invoiced"  ? "Invoiced" : "Ready" }}</span>
                                    <!-- </div>  -->
                                </td>
                                <td ng-if="!COKHitem.isAsyncActionInProgress" class="text-center price-edit" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}',
                                            'bp-disabled': (!F_CO.displayEditBtnOnLineItem('Merchandise', 'NonKitLI', '', CoKitHeaderIndex, CoLIIndex) 
                                                        && M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}')}">
                                    <span ng-if="(M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index 
                                                        || !GroupOnlyPermissions['Override price'].enabled)">
                                                     {{::COLI.Price | currency}}</span>
                                    <span ng-if="(M_CO.editLineItem == 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index && GroupOnlyPermissions['Override price'].enabled)">
                                        <numbers-only id-value = "Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_Price"
                                            class-value = "bp-input-text inTimeEdit timeField text-center"
                                            input-model-value = "COLI.Price" 
                                            include-negative = "false"
                                            include-zero = "true"
                                            precision-length = "2"
                                            blur-value="F_CO.UpdateCOLineItem(CoKitHeaderIndex, CoLIIndex, $event, '_Price');" 
                                            input-keydown-value="F_CO.setFlagOnTabForBlurHandling($event)"
                                            />
                                    </span>

                                    <span class="price-variance-warning" ng-if="(M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index || !GroupOnlyPermissions['Override price'].enabled) && COLI.Status == 'Required' && M_CO.IsForeignExchangeCostingEnabled && COLI.IsForeignVendor">
                                        <span data-toggle="tooltip" data-original-title="{{'Special_ordering_a_foreign_part_click_to_learn_more' | translate}}" data-html="true">
                                            <i id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_warning" ng-click="F_CO.openPriceVarianceWarningModal($event, 'Merchandise', CoKitHeaderIndex, $index)" class="bp-icons bp-tart-orange-font bp-font-14">warningFilled</i>
                                        </span>
                                    </span>
                                    <span ng-if="(M_CO.editLineItem == 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index && GroupOnlyPermissions['Override price'].enabled && COLI.Status == 'Required' && M_CO.IsForeignExchangeCostingEnabled && COLI.IsForeignVendor)">
                                        <span class="warning-icon" data-toggle="tooltip" data-original-title="{{'Special_ordering_a_foreign_part_click_to_learn_more' | translate}}" data-html="true">
                                            <i id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_warning" ng-click="F_CO.openPriceVarianceWarningModal($event, 'Merchandise', CoKitHeaderIndex, $index)" class="bp-icons bp-tart-orange-font bp-font-14">warningFilled</i>
                                        </span>
                                    </span>
                                    
                                </td>
                                <td ng-if="!COKHitem.isAsyncActionInProgress" class="text-center boldText" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}',
                                                    'bp-disabled': (!F_CO.displayEditBtnOnLineItem('Merchandise', 'NonKitLI', '', CoKitHeaderIndex, CoLIIndex) 
                                                        && M_CO.editLineItem !== 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}')}">
                                    <span ng-class="{'bp-red-font': (COLI.Qty * COLI.Price) < 0}">{{(COLI.Qty * COLI.Price) | currency}}</span>
                                </td>
                                <td ng-if="COLI.IsDummyLineItem" class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"><div class="dummy-tag-name"></div></td>
                                <td ng-if="!COLI.IsDummyLineItem" class="partInvIconAdjustment" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}',
                                                    'bp-disabled': (COLI.Status === 'Invoiced || F_CO.isArchivedQuote()')}">
                                    <i class="bp-icons bp-blue-font bp-font-20 bp-chevron bp-cursor-pointer" data-toggle="tooltip" title="{!$Label.More_options}" tooltip-loader = "tooltip-loader" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_moreOptions" ng-class="{'bp-chevron-up' : M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo, 'bp-chevron-down' : !M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo}" ng-if="COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart && (COLI.Qty >= 0) && COLI.Status != 'Invoiced' && !F_CO.isArchivedQuote()" ng-click="F_CO.showHideMerchandiseItemInfo(CoKitHeaderIndex, CoLIIndex)">expandBadge</i>
                                    <span data-toggle="tooltip" title="More actions" tooltip-loader = "tooltip-loader" ng-if="COLI.Status != 'Invoiced' 
                                                            && GroupOnlyPermissions['Merchandise']['create/modify'] && !F_CO.isArchivedQuote()" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_deleteBtn">
                                        <i class="bp-icons bp-blue-font bp-font-18 LIDeleteBtn" ng-if = "M_CO.coHeaderRec.CustomerId != undefined && M_CO.coHeaderRec.COType != 'Cash Sale'" ng-click="F_CO.openMoveLineItemModalWindowAction('Merchandise', COLI.CoLineItemId, null, $event); F_CO.openMoveOrDeleteConfirmationPopup('', '', CoKitHeaderIndex, COKHitem.Id, CoLIIndex, COLI.CoLineItemId, 'Merchandise', true);">moreAction</i>
                                        <i class="bp-icons bp-blue-font bp-font-18 LIDeleteBtn" ng-if = "M_CO.coHeaderRec.CustomerId == undefined && M_CO.coHeaderRec.COType == 'Cash Sale'" ng-click = "F_CO.openMoveOrDeleteConfirmationPopup('', '', CoKitHeaderIndex, COKHitem.Id, CoLIIndex, COLI.CoLineItemId, 'Merchandise', true);">delete</i>
                                                    </span>
                                </td>
                            </tr>
                            <tr ng-if="!COKHitem.Id && M_CO.supersededParts[COLI.PartId] != null && COLI.Status != 'Invoiced'">
                                <td></td>
                                <td colspan="8">
                                    <div class="show_Availableline text-uppercase bgYellow"><span class="logo-icon">i</span>{{ 'part_has_been_superseded_to' | translate}} : {{M_CO.supersededParts[COLI.PartId].partNumber}}</div>
                                 </td>
                                 <td></td>
                            </tr>

                            <!-- Start: Merchandise Special Order Section For Non Kit Line Items -->
                            <tr class="bp-expanded-deletable-div-transition itemOrderInfoTR" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_StockCommittedSection" ng-if="!COKHitem.Id && COLI.EntityType == 'Part' && M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo && !COLI.IsNonInventoryPart && (COLI.Qty >= 0) && !M_CO.showQuote && M_CO.coHeaderRec.MerchandiseCommitOrdercontrols != 'Uncommitted'">
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                                <td class="boldText" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}">
                                    <div class="liItemDesc_setTextEllipsis bp-dark-grey2-font">
                                        <span>{{ 'Committed_from_the_stock' | translate }}</span>
                                    </div>
                                </td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}">
                                    <span ng-if="M_CO.editLineItem != 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index">{{COLI.QtyCommitted}}</span>
                                    <span ng-if="M_CO.editLineItem == 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index">
                                                        <numbers-only id-value="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_StockCommitted"
                                                            class-value="bp-input-text inTimeEdit timeField text-center"
                                                            min-value="0"
                                                            max-value="{{F_CO.getMaxCommitedValue(COLI)}}"
                                                            input-model-value="COLI.QtyCommitted" 
                                                            include-negative="false"
                                                            include-zero="true"
                                                            precision-length="2"
                                                            force-precision-length="false"
                                                            blur-value="F_CO.UpdateCOLineItem(CoKitHeaderIndex, $index, $event, '_StockCommitted');"
                                                            input-keydown-value="F_CO.setFlagOnTabForBlurHandling($event)"
                                                            input-keyup-value="F_CO.calculateSpecialOrderValue('Merchandise', 'StockCommited', CoKitHeaderIndex, null, $index, (COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart));"/>
                                                    </span>
                                    <!-- max-value="{{COLI.Qty}}" -->
                                </td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}">
                                    <span class="bp-green-font bp-bold-font">{{ 'Part_Object_Status_InStock' | translate }}</span>
                                </td>
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                            </tr>
                            <tr class="bp-expanded-deletable-div-transition itemOrderInfoTR" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_QtyOrder" ng-if="!COKHitem.Id && (COLI.EntityType == 'Part' && !COLI.IsNonInventoryPart && M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo && (COLI.Qty >= 0)) && !M_CO.showQuote && M_CO.coHeaderRec.MerchandiseCommitOrdercontrols != 'Uncommitted' ">
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                                <td class="boldText" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}">
                                    <div class="liItemDesc_setTextEllipsis bp-red-font">
                                        <span>{{ 'Quantity_to_order' | translate }}</span>
                                    </div>
                                </td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}">
                                    <span>{{COLI.QtyOrder}}</span>
                                </td>
                                <td class="text-center" ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}">
                                    <span class="bp-red-font bp-bold-font" ng-if="COLI.Status !== 'Ordered'">{{ 'Part_Object_Status_Required' | translate }}</span>
                                    <span class="bp-orange-font bp-bold-font" ng-if="COLI.Status === 'Ordered'">{{ 'Label_Ordered' | translate }}</span>
                                </td>
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                                <td ng-class="{'setBgColor' : M_CO.editLineItem == 'Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}'}"></td>
                            </tr>
                            <tr class="inventory-status-liItem" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_AvailableInventory"  ng-repeat-end="ng-repeat-end" ng-if="!COKHitem.Id && COLI.EntityType == 'Part' && !COLI.IsDummyLineItem && !COLI.IsNonInventoryPart && (M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo || M_CO.editLineItem == 'Merchandise_Section_COKitHeader' + CoKitHeaderIndex + '_COLI' + $index)">
                                <td colspan="7" class="PN0">
                                    <table class="table-extra-for-button">
                                        <col width="40%" ng-show="(!(COLI.QtyOrder > 0 && COLI.Status !== 'Ordered' && COLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) || !((M_CO.isBRPEnabled && COLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(COLI.VendorId)) || !M_CO.isMeshEnabledOrg)" />
                                        <col width="34%" ng-show="((COLI.QtyOrder > 0 && COLI.Status !== 'Ordered' && COLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) && ((M_CO.isBRPEnabled && COLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(COLI.VendorId)) && M_CO.isMeshEnabledOrg)" />
                                        <col width="" />
                                        <col width="10%" ng-show="(!(COLI.QtyOrder > 0 && COLI.Status !== 'Ordered' && COLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) || !((M_CO.isBRPEnabled && COLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(COLI.VendorId)) || !M_CO.isMeshEnabledOrg)" />
                                        <col width="1%" ng-show="((COLI.QtyOrder > 0 && COLI.Status !== 'Ordered' && COLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled) && ((M_CO.isBRPEnabled && COLI.IsBRPPart) || F_CO.displayVendorAvailabilityButton(COLI.VendorId)) && M_CO.isMeshEnabledOrg)" />
                                        <tbody>
                                            <tr class="inventory-status-liItem" ng-class="{ 'liItem-bg-white': ((COLI.ActualAvailableParts - COLI.QtyCommitted) > 0 && !M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo), 'liItem-bg-red': ((COLI.ActualAvailableParts - COLI.Qty) <= 0 && COLI.ActualAvailableParts - COLI.QtyCommitted <= 0), 'liItem-bg-orange': ((COLI.ActualAvailableParts - COLI.QtyCommitted > 0) && M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo) }">
                                                <td  class="helper-text-label" ng-if="(COLI.Qty >= 0)">
                                                    <span ng-if="(COLI.ActualAvailableParts - COLI.QtyCommitted) > 0 && !M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo" class="label-text "><span class="liItem-text-strong"> {{COLI.AvaliablePartsQty}} </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{COLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                    <span ng-if="((COLI.ActualAvailableParts - COLI.Qty) <= 0 && COLI.ActualAvailableParts - COLI.QtyCommitted <= 0)" class="label-text red"><span class="liItem-text-strong">0 </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{COLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                    <span ng-if="(COLI.ActualAvailableParts - COLI.QtyCommitted > 0) && M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo" class="label-text orange "><span class="liItem-text-strong"> {{COLI.ActualAvailableParts - COLI.QtyCommitted}} </span><span>{{ 'remaining_in_stock_with' | translate }}</span> <span class="liItem-text-strong">{{COLI.OnOrderPartQty}}</span> <span>{{ 'on_order' | translate }}</span></span>
                                                </td>
                                                <td  class="helper-text-label" ng-if="!(COLI.Qty >= 0)">
                                                    <span ng-if="(COLI.ActualAvailableParts - COLI.QtyCommitted) > 0  && !M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo" class="label-text">{{ 'Available_inventory' | translate }}: {{::COLI.AvaliablePartsQty}}</span>
                                                    <span ng-if="(COLI.ActualAvailableParts - COLI.QtyCommitted) <= 0  && !M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo" class="label-text red">{{ 'Available_inventory' | translate }}: 0 - <span class="text-uppercase">{{ 'Part_Object_Status_OutofStock' | translate }}</span></span>
                                                    <span ng-if="(COLI.ActualAvailableParts - COLI.QtyCommitted) > 0 && M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo" class="label-text orange">{{ 'Quantity_remaining' | translate }}: {{COLI.ActualAvailableParts - COLI.QtyCommitted}}</span>
                                                </td>
                                                <td class="text-left liItemBtn" id="Merchandise_Section_COKitHeader{{CoKitHeaderIndex}}_COLI{{$index}}_inventoryButtons">
                                                    <button id="allocateOnOrder" ng-if="(COLI.QtyOrder > 0 && COLI.Status !== 'Ordered') && COLI.OnOrderPartQty > 0 && GroupOnlyPermissions['Reallocate on order parts'].enabled" class="bp-btn bp-btn-normal table-extra-btn-placement" ng-click="F_CO.openReallocateModalWindow(COLI, M_CO.COHeaderId, 'Merchandise')">{{ 'Allocate_on_order' | translate }}</button>
                                                    <button class="bp-btn secondary-btn table-extra-btn-placement" ng-if="(M_CO.isBRPEnabled && COLI.IsBRPPart)" ng-click="F_CO.openPartLocatorWindow(COLI, 'Merchandise')" >{{ 'Vendor_Availability' | translate }}</button>
                                                    <button class="bp-btn secondary-btn table-extra-btn-placement" ng-if="F_CO.displayVendorAvailabilityButton(COLI.VendorId)" ng-click="F_CO.openVendorAvailabilityWindow(COLI.PartId, 'Merchandise')" >{{ 'Vendor_Availability' | translate }} - {{COLI.CassonsSOH}}</button>
                                                    <span ng-if="M_CO.isMeshEnabledOrg && M_CO.collectiveInfo.externalId && COLI.ItemCode" class="table-extra-btn-placement" ng-bind-html="F_CO.partLookupHtml(COLI.ItemCode, 'MerchandiseSection', CoKitHeaderIndex)"></span>
                                                    <a class="view-related-label" data-target="#SupersededPart" data-toggle="modal" ng-click="showAlternatePartDialog=true; F_CO.getAlternateParts(COLI, M_CO.COHeaderId, 'Merchandise', CoKitHeaderIndex);">{{ 'View_related_parts' | translate }}</a>
                                                </td>
                                                <td class="helper-text-label" ng-class="{ 'bg-white': ((COLI.ActualAvailableParts - COLI.QtyCommitted) > 0 && !M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo), 'bg-red': ((COLI.ActualAvailableParts - COLI.Qty) <= 0 && COLI.ActualAvailableParts - COLI.QtyCommitted <= 0), 'bg-orange': ((COLI.ActualAvailableParts - COLI.QtyCommitted > 0) && M_CO.COKHList[CoKitHeaderIndex].COLIList[$index].ShowItemInfo) }"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                            <!-- End: Merchandise Special Order Section For Non Kit Line Items -->
                            <!-- End: Line Items Row without Kit Header (Non Kit Line Items) -->
                        </tbody>
                    </table>
                </div>
                <div class="search-entity-wrapper pull-left autocomplete-wrapper-left" ng-if="F_CO.showAutoComplete()" >
                    <p class="search-entity-text">{{ 'Scan_or_search_to_add_a_part_kit_fee_or_merchandise' | translate }}</p>
                    <autocompletev2 ng-if="!M_CO.IsWebComponentSTAEnabled" is-scaning-enabled="true" id="autocompletev2MerchandiseSectioId" template-name="Entity" section-name="Merchandise Section" section-id="MerchandiseSectionWrapperId" is-disabled="F_CO.disableSTA('Merchandise');" customer-id="{{M_CO.coHeaderRec.CustomerId}}" />
                    <div class="searchToAdd" ng-if="M_CO.IsWebComponentSTAEnabled">
                        <bpda-search-to-add id="autocompleteMerchandiseSectionWrapperId"
                            is-scanning-enabled="true"
                            template-name = "Entity"
                            section-name = "Merchandise Section"
                            section-id = "MerchandiseSectionWrapperId"
                            customer-id = "{{M_CO.coHeaderRec.CustomerId}}"
                            ng-disabled="F_CO.disableSTA('Merchandise')"
                            ng-attr-available-filters= "{{F_CO.populateSTAFilters('staMerchandise')}}"
                            ng-attr-selected-filters="{{F_CO.populateSelectedSTAFilters('autocompleteMerchandiseSectionWrapperId')}}"
                        >
                        </bpda-search-to-add>
                    </div>
                    <div class="bp-alert-info">
                        <bp-alert id="merch-bp-alert" duration="3000" color="info" closable="true">
                            <bp-icon slot="icon" color="inherit">info</bp-icon>
                            You don't have to wait while we add your line item. You can immediately add a new one now!
                        </bp-alert>
                    </div>
                </div>
                <div class="autocomplete-wrapper-right pull-left" ng-if="F_CO.showAutoComplete()">
                    <i class="bp-icons bp-blue-font bp-font-14 bp-cursor-pointer pull-left MT-3" ng-click="F_CO.ShowPartsImportModel('Merchandise',M_CO.COHeaderId)">partSmart</i>
                    <a class="bp-blue-font bp-bold-font bp-font-14 pull-left line-height-small" ng-click="F_CO.ShowPartsImportModel('Merchandise',M_CO.COHeaderId)">
                        {{ 'Add_items_from_a_pick_list' | translate }}
                    </a>
                </div>
                <div class="accordian-action-right bottom" ng-if="GroupOnlyPermissions['Merchandise']['create/modify'] && !F_CO.isArchivedQuote() && M_CO.COKHList.length == 0 && M_CO.COHeaderId">
                    <span class="icon-container" ng-click="F_CO.openConfirmationDialog('RemoveSection', false, 'Merchandise');">
                        <i class="bp-icons bp-blue-font bp-font-19 bp-fw-100 bp-lh-20">delete</i>
                                        <span class="bp-font-14 bp-blue-font bp-cursor-pointer">{{ 'Remove_merchandise_Label' | translate }}</span>
                    </span>
                </div>
            </div>
            </div>
            </div>
        <!-- Notes accordion -->
        <div class="bp-inner-accordian open job-item-notes" ng-if="(M_CO.coHeaderRec.MerchandiseNotesForCustomer != null)"
            ng-class="{'bp-inner-accordian-opened': M_CO.expandedInnerSectionName == 'Merchandise_NotesForCustomerSection'}">
            <div class="inner-accordian-header col-md-12" ng-click = "F_CO.expandOrCollapseInnerSection('Merchandise_NotesForCustomerSectionId', 'Merchandise_NotesForCustomerSection')">
                <div class="inner-accordian-header-left">
                    <h2 class="accordian-left-details">{{ 'Notes_for_customer' | translate }}</h2>
                </div>
                <div class="accordian-right-details">
                    <a href="" class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName != 'Merchandise_NotesForCustomerSection'">
                        <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowDown</i>
                    </a>    
                    <a class="down-arrow-icon" ng-if = "M_CO.expandedInnerSectionName == 'Merchandise_NotesForCustomerSection'">
                        <i class="bp-icons bp-font-16 stroke-1 size-unset">arrowUp</i>
                    </a>    
                </div>
            </div>
            <div class="inner-accordian-body bp-light-gray4 col-md-12 bp-collapse-div-transition" id="Merchandise_NotesForCustomerSectionId"
                ng-class="{'bp-expand-div-transition': M_CO.expandedInnerSectionName == 'Merchandise_NotesForCustomerSection'}">
                <div class="col-md-7 padding-bottom30 padding-top1">
                    <div class="bp-multiselect" ng-click="F_CO.displayNotesInputForMerch($event, 'Notes')">
                        <div ng-class="{'padding10': M_CO.coHeaderRec.MerchandiseNotesForCustomer.length > 0,'PB0':!(M_CO.toDisplayInput == 'MerchandiseNotesForCustomer' || displayCauseConcernCorrectionInput(-1, 'MerchandiseNotesForCustomer'))}">
                            <div ng-repeat="note in M_CO.coHeaderRec.MerchandiseNotesForCustomer track by $index" class="d-flex"> 
                                <textarea id="NotesMerchandiseTag{{$index}}" type="text" class="textarea-message-box bp-input-text MB10" ng-show="M_CO.editModeIndexMultiSelect['NotesMerchandise'] == $index" 
                                        ng-model="M_CO.coHeaderRec.MerchandiseNotesForCustomer[$index].Value"
                                        ng-blur="F_CO.updateMultiSelectForMerch($event, $index, 'Notes')"
                                        ng-keydown="F_CO.updateMultiSelectForMerch($event, $index, 'Notes')"
                                        ng-disabled="!GroupOnlyPermissions['Merchandise']['create/modify']"
                                        maxlength="1500" />
                                <span ng-class="{'bg-coral-light2' : note.IsDecline }" ng-click="F_CO.editMultiselectTagForMerch($event, 'NotesMerchandise', $index);" ng-show="M_CO.editModeIndexMultiSelect['NotesMerchandise'] != $index">
                                    {{note.Value}}
                                    <i ng-class="{'icon_fill_coral' : note.IsDecline }"  ng-if="GroupOnlyPermissions['Merchandise']['create/modify']" 
                                    ng-click = "F_CO.showCCCNflyout($event, $index, -1, 'MerchandiseNotesForCustomer', 'Notes', note.IsDecline)"  class="bp-icons bp-font-15 bp-blue-font LIDeleteBtn">moreAction</i>
                                </span>
                            </div>
                            <textarea id="NotesMerchandise" type="text" class="textarea-message-box bp-input-text" ng-show="M_CO.toDisplayInput == 'MerchandiseNotesForCustomer' || displayCauseConcernCorrectionInput(-1, 'MerchandiseNotesForCustomer')" 
                                ng-model="M_CO.coHeaderRec.NewMerchandiseNotesForCustomer" ng-blur="F_CO.addAndRemoveFromMultiSelectForMerch($event, 'Notes')"
                                ng-keydown="F_CO.addAndRemoveFromMultiSelectForMerch($event, 'Notes')"
                                placeholder="{{'Label_Notes' | translate}}" rel="Note" ng-disabled="!GroupOnlyPermissions['Merchandise']['create/modify']" 
                                maxlength="1500" ng-click="F_CO.setSoHeaderIndexForTextarea('NotesMerchandise', -1)" ng-class = "{'PT15' : M_CO.coHeaderRec.MerchandiseNotesForCustomer.length == 0, 'text-height': !M_CO.coHeaderRec.NewMerchandiseNotesForCustomer }" />
                        </div>  
                    </div>
                </div>
            </div>
        </div>
        <!-- Notes accordion -->
        </div>
    </div>
    <bp-ng-modal-window id-val="priceVarianceWarning" mobal-window-payload="M_CO.ModalWindowPayload" cancel-btn-action="F_CO.closePriceVarianceWarningModal()" primary-btn-action="F_CO.closePriceVarianceWarningModal()">
        <div>
            <span>
                <p class="modal-window-message-info">{{ 'Price_variance_warning_message' | translate }}</p>
            </span>
        </div>
    </bp-ng-modal-window>
    <!-- End: Merchandise Section -->
</apex:component>